{"version":3,"file":"forum.js","sources":["../src/forum/components/WithdrawalPage.tsx","../src/common/models/WithdrawalPlatform.ts","../src/common/models/WithdrawalRequest.ts","../src/common/extend.ts","../src/forum/index.ts"],"sourcesContent":["import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Stream from 'flarum/common/utils/Stream';\nimport icon from 'flarum/common/helpers/icon';\nimport type Mithril from 'mithril';\n\ninterface WithdrawalPlatform {\n  id: number;\n  attributes: {\n    name: string;\n    symbol: string;\n    minAmount: number;\n    maxAmount: number;\n    fee: number;\n    icon?: string;\n  };\n}\n\ninterface WithdrawalRequest {\n  id: number;\n  attributes: {\n    amount: number;\n    accountDetails: string;\n    status: string;\n    createdAt: string;\n  };\n  relationships: {\n    platform: {\n      data: { id: number };\n    };\n  };\n}\n\nexport default class WithdrawalPage extends Page {\n  private platforms: WithdrawalPlatform[] = [];\n  private requests: WithdrawalRequest[] = [];\n  private loading = true;\n  private submitting = false;\n  private loadingBalance = true;\n  private userBalance = 0;\n  private showDropdown = false;\n\n  private amount = Stream('');\n  private selectedPlatform = Stream<WithdrawalPlatform | null>(null);\n  private accountDetails = Stream('');\n  private saveAddress = Stream(false);\n\n  oninit(vnode: Mithril.VnodeDOM) {\n    super.oninit(vnode);\n\n    app.setTitle(app.translator.trans('withdrawal.forum.page.title'));\n\n    this.loadData();\n    this.loadUserBalance();\n  }\n\n  view() {\n    if (this.loading) {\n      return (\n        <div className=\"WithdrawalPage\">\n          <div className=\"WithdrawalPage-loading\">\n            <LoadingIndicator />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"WithdrawalPage\">\n        <div className=\"WithdrawalPage-modal\">\n          <div className=\"WithdrawalPage-header\">\n            <div className=\"WithdrawalPage-tabs\">\n              <div className=\"WithdrawalPage-tab active\">\n                {app.translator.trans('withdrawal.forum.tabs.crypto')}\n              </div>\n            </div>\n            <button className=\"WithdrawalPage-close\" onclick={() => window.history.back()}>\n              {icon('fas fa-times')}\n            </button>\n          </div>\n\n          <div className=\"WithdrawalPage-content\">\n            {this.renderCryptoTypeToggle()}\n            {this.renderPlatformSelector()}\n            {this.renderAmountSection()}\n            {this.renderAddressSection()}\n            {this.renderSecurityNotices()}\n            {this.renderSubmitButton()}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  private renderCryptoTypeToggle(): Mithril.Children {\n    return (\n      <div className=\"WithdrawalPage-typeToggle\">\n        <div className=\"WithdrawalPage-typeOption active\">\n          {app.translator.trans('withdrawal.forum.types.crypto')}\n        </div>\n        <div className=\"WithdrawalPage-typeOption\">\n          {app.translator.trans('withdrawal.forum.types.fiat')}\n          <span className=\"WithdrawalPage-infoIcon\">{icon('fas fa-info-circle')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  private renderPlatformSelector(): Mithril.Children {\n    const selected = this.selectedPlatform();\n    \n    return (\n      <div className=\"WithdrawalPage-platformSelector\">\n        <div className=\"WithdrawalPage-platformDropdown\" onclick={() => this.showDropdown = !this.showDropdown}>\n          <div className=\"WithdrawalPage-platformSelected\">\n            <div className=\"WithdrawalPage-platformInfo\">\n              <div className=\"WithdrawalPage-platformIcon\">\n                {selected ? this.renderPlatformIcon(selected) : icon('fas fa-bitcoin', { className: 'default-icon' })}\n              </div>\n              <div className=\"WithdrawalPage-platformDetails\">\n                <div className=\"WithdrawalPage-platformSymbol\">\n                  {selected && selected.attributes ? selected.attributes.symbol || 'BTC' : 'BTC'}\n                </div>\n                <div className=\"WithdrawalPage-platformFlow\">\n                  {app.translator.trans('withdrawal.forum.remaining_flow', { amount: '0.00000000' })}\n                </div>\n              </div>\n            </div>\n            <div className=\"WithdrawalPage-platformName\">\n              {selected && selected.attributes ? selected.attributes.name : 'Bitcoin'}\n            </div>\n          </div>\n          {icon('fas fa-chevron-down', { className: 'WithdrawalPage-dropdownIcon' })}\n        </div>\n\n        {this.showDropdown && this.renderPlatformDropdown()}\n      </div>\n    );\n  }\n\n  private renderPlatformDropdown(): Mithril.Children {\n    // Ensure platforms array is valid and filter out invalid items\n    const validPlatforms = (this.platforms || []).filter(platform => \n      platform && platform.attributes && platform.attributes.symbol\n    );\n\n    if (validPlatforms.length === 0) {\n      return (\n        <div className=\"WithdrawalPage-dropdownMenu\">\n          <div className=\"WithdrawalPage-dropdownItem WithdrawalPage-noData\">\n            {app.translator.trans('withdrawal.forum.no_platforms')}\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"WithdrawalPage-dropdownMenu\">\n        {validPlatforms.map(platform => (\n          <div \n            key={platform.id}\n            className=\"WithdrawalPage-dropdownItem\"\n            onclick={() => {\n              this.selectedPlatform(platform);\n              this.showDropdown = false;\n              this.amount(''); // Clear amount when switching platforms\n            }}\n          >\n            <div className=\"WithdrawalPage-platformIcon\">\n              {this.renderPlatformIcon(platform)}\n            </div>\n            <div className=\"WithdrawalPage-platformDetails\">\n              <div className=\"WithdrawalPage-platformSymbol\">{platform.attributes.symbol}</div>\n              <div className=\"WithdrawalPage-platformName\">{platform.attributes.name}</div>\n            </div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  private renderPlatformIcon(platform: WithdrawalPlatform): Mithril.Children {\n    // Add null checks to prevent errors\n    if (!platform || !platform.attributes || !platform.attributes.symbol) {\n      return icon('fas fa-coins', { className: 'crypto-icon default' });\n    }\n\n    // Map common cryptocurrency symbols to icons\n    const iconMap: Record<string, string> = {\n      'BTC': 'fab fa-bitcoin',\n      'ETH': 'fab fa-ethereum',\n      'LTC': 'fas fa-coins',\n      'USDT': 'fas fa-dollar-sign',\n      'USDC': 'fas fa-dollar-sign',\n      'BNB': 'fas fa-coins',\n      'ADA': 'fas fa-coins',\n      'DOT': 'fas fa-coins',\n      'SOL': 'fas fa-coins',\n      'MATIC': 'fas fa-coins'\n    };\n\n    const symbol = platform.attributes.symbol;\n    const iconClass = iconMap[symbol] || 'fas fa-coins';\n    return icon(iconClass, { className: `crypto-icon ${symbol.toLowerCase()}` });\n  }\n\n  private renderAmountSection(): Mithril.Children {\n    const selected = this.selectedPlatform();\n    const minAmount = selected?.attributes.minAmount || 0.001;\n    const maxAmount = selected?.attributes.maxAmount || 10;\n    const fee = selected?.attributes.fee || 0.0005;\n\n    return (\n      <div className=\"WithdrawalPage-amountSection\">\n        <div className=\"WithdrawalPage-formGroup\">\n          <div className=\"WithdrawalPage-balanceHeader\">\n            <span className=\"WithdrawalPage-label\">\n              {app.translator.trans('withdrawal.forum.form.amount')}\n            </span>\n            <span className=\"WithdrawalPage-balance\">\n              {app.translator.trans('withdrawal.forum.available_balance', { \n                amount: this.loadingBalance ? '0.00000000' : this.userBalance.toFixed(8) \n              })}\n            </span>\n          </div>\n\n          <div className=\"WithdrawalPage-amountInput\">\n            <input\n              type=\"text\"\n              className=\"WithdrawalPage-input\"\n              placeholder=\"0.00000000\"\n              value={this.amount()}\n              oninput={(e: Event) => this.amount((e.target as HTMLInputElement).value)}\n            />\n            <Button\n              className=\"WithdrawalPage-allButton\"\n              onclick={this.fillAllAmount.bind(this)}\n            >\n              {app.translator.trans('withdrawal.forum.form.all_button')}\n            </Button>\n          </div>\n\n          <div className=\"WithdrawalPage-amountLimits\">\n            <div className=\"WithdrawalPage-limitRow\">\n              <span className=\"WithdrawalPage-limitLabel\">\n                {app.translator.trans('withdrawal.forum.limits.min_max')}\n              </span>\n              <span className=\"WithdrawalPage-limitValue\">\n                {icon('fas fa-coins')} {minAmount} ~ {maxAmount}\n              </span>\n            </div>\n            <div className=\"WithdrawalPage-limitRow\">\n              <span className=\"WithdrawalPage-limitLabel\">\n                {app.translator.trans('withdrawal.forum.limits.fee')}\n              </span>\n              <span className=\"WithdrawalPage-limitValue\">\n                {icon('fas fa-coins')} {fee}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  private renderAddressSection(): Mithril.Children {\n    const selected = this.selectedPlatform();\n    const symbol = selected?.attributes.symbol || 'BTC';\n\n    return (\n      <div className=\"WithdrawalPage-addressSection\">\n        <div className=\"WithdrawalPage-formGroup\">\n          <div className=\"WithdrawalPage-addressHeader\">\n            <span className=\"WithdrawalPage-label\">\n              {app.translator.trans('withdrawal.forum.form.address', { symbol })}\n              <span className=\"WithdrawalPage-required\">*</span>\n            </span>\n            <div className=\"WithdrawalPage-saveAddress\" onclick={() => this.saveAddress(!this.saveAddress())}>\n              {icon('fas fa-bookmark')}\n              {app.translator.trans('withdrawal.forum.form.save_address')}\n            </div>\n          </div>\n\n          <div className=\"WithdrawalPage-addressInput\">\n            <input\n              type=\"text\"\n              className=\"WithdrawalPage-input\"\n              placeholder={app.translator.trans('withdrawal.forum.form.address_placeholder')}\n              value={this.accountDetails()}\n              oninput={(e: Event) => this.accountDetails((e.target as HTMLInputElement).value)}\n            />\n            <button className=\"WithdrawalPage-pasteButton\" onclick={this.pasteFromClipboard.bind(this)}>\n              {icon('fas fa-paste')}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  private renderSecurityNotices(): Mithril.Children {\n    return (\n      <div className=\"WithdrawalPage-securityNotices\">\n        <div className=\"WithdrawalPage-securityNotice\" onclick={() => this.redirectToPhoneBinding()}>\n          <div className=\"WithdrawalPage-noticeContent\">\n            <span className=\"WithdrawalPage-noticeText\">\n              {app.translator.trans('withdrawal.forum.security.bind_phone')}\n            </span>\n            <span className=\"WithdrawalPage-noticeAction\">GO</span>\n          </div>\n          {icon('fas fa-chevron-right')}\n        </div>\n\n        <div className=\"WithdrawalPage-securityNotice\" onclick={() => this.redirectTo2FA()}>\n          <div className=\"WithdrawalPage-noticeContent\">\n            <span className=\"WithdrawalPage-noticeText\">\n              {app.translator.trans('withdrawal.forum.security.bind_2fa')}\n            </span>\n            <span className=\"WithdrawalPage-noticeAction\">GO</span>\n          </div>\n          {icon('fas fa-chevron-right')}\n        </div>\n      </div>\n    );\n  }\n\n  private renderSubmitButton(): Mithril.Children {\n    const amount = parseFloat(this.amount()) || 0;\n    const selected = this.selectedPlatform();\n    const fee = selected?.attributes.fee || 0;\n    const finalAmount = Math.max(0, amount - fee);\n    const symbol = selected?.attributes.symbol || 'BTC';\n\n    return (\n      <div className=\"WithdrawalPage-submitSection\">\n        <Button\n          className=\"WithdrawalPage-submitButton\"\n          loading={this.submitting}\n          disabled={!this.canSubmit()}\n          onclick={this.submit.bind(this)}\n        >\n          {app.translator.trans('withdrawal.forum.form.submit')}\n        </Button>\n\n        {amount > 0 && (\n          <div className=\"WithdrawalPage-finalAmount\">\n            {app.translator.trans('withdrawal.forum.final_amount', { \n              amount: finalAmount.toFixed(8), \n              symbol \n            })}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  private canSubmit(): boolean {\n    return !!(\n      this.selectedPlatform() &&\n      this.amount() &&\n      this.accountDetails() &&\n      !this.submitting &&\n      parseFloat(this.amount()) > 0\n    );\n  }\n\n  private fillAllAmount(): void {\n    if (this.loadingBalance) return;\n    this.amount(this.userBalance.toFixed(8));\n  }\n\n  private async pasteFromClipboard(): Promise<void> {\n    try {\n      if (navigator.clipboard && navigator.clipboard.readText) {\n        const text = await navigator.clipboard.readText();\n        this.accountDetails(text.trim());\n        m.redraw();\n      }\n    } catch (error) {\n      console.error('Failed to read from clipboard:', error);\n      app.alerts.show({\n        type: 'error',\n        dismissible: true\n      }, app.translator.trans('withdrawal.forum.clipboard_error'));\n    }\n  }\n\n  private redirectToPhoneBinding(): void {\n    // TODO: Implement phone binding redirect\n    app.alerts.show({\n      type: 'info',\n      dismissible: true\n    }, app.translator.trans('withdrawal.forum.phone_binding_redirect'));\n  }\n\n  private redirectTo2FA(): void {\n    // TODO: Implement 2FA setup redirect  \n    app.alerts.show({\n      type: 'info',\n      dismissible: true\n    }, app.translator.trans('withdrawal.forum.2fa_redirect'));\n  }\n\n  private async submit(): Promise<void> {\n    if (!this.canSubmit()) return;\n\n    this.submitting = true;\n\n    try {\n      const platform = this.selectedPlatform()!;\n      \n      const response = await app.request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/withdrawal-requests',\n        body: {\n          data: {\n            type: 'withdrawal-requests',\n            attributes: {\n              platformId: platform.id,\n              amount: parseFloat(this.amount()),\n              accountDetails: this.accountDetails()\n            }\n          }\n        }\n      });\n      \n      if (response && response.data) {\n        app.store.pushPayload(response);\n      }\n\n      app.alerts.show({\n        type: 'success',\n        dismissible: true\n      }, app.translator.trans('withdrawal.forum.form.success'));\n\n      // Reset form\n      this.amount('');\n      this.accountDetails('');\n      this.saveAddress(false);\n\n      // Reload data\n      this.loadRequests();\n    } catch (error) {\n      console.error('Error submitting withdrawal request:', error);\n      app.alerts.show({\n        type: 'error',\n        dismissible: true\n      }, app.translator.trans('withdrawal.forum.form.error'));\n    } finally {\n      this.submitting = false;\n      m.redraw();\n    }\n  }\n\n  private async loadData(): Promise<void> {\n    try {\n      await Promise.all([\n        this.loadPlatforms(),\n        this.loadRequests()\n      ]);\n    } catch (error) {\n      console.error('Error loading data:', error);\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n\n  private async loadPlatforms(): Promise<void> {\n    try {\n      console.log('Loading withdrawal platforms...');\n      const response = await app.store.find('withdrawal-platforms');\n      console.log('Platform response:', response);\n      \n      this.platforms = Array.isArray(response) ? response.filter(p => p !== null) : (response ? [response] : []);\n      console.log('Processed platforms:', this.platforms);\n      \n      // Auto-select first platform if available\n      if (this.platforms.length > 0 && !this.selectedPlatform()) {\n        this.selectedPlatform(this.platforms[0]);\n      }\n    } catch (error) {\n      console.error('Error loading platforms:', error);\n      this.platforms = [];\n    }\n  }\n\n  private async loadRequests(): Promise<void> {\n    try {\n      const response = await app.store.find('withdrawal-requests');\n      this.requests = Array.isArray(response) ? response.filter(r => r !== null) : (response ? [response] : []);\n    } catch (error) {\n      console.error('Error loading requests:', error);\n      this.requests = [];\n    }\n  }\n\n  private async loadUserBalance(): Promise<void> {\n    try {\n      // Integration with antoinefr/flarum-ext-money extension\n      this.userBalance = app.session.user?.attribute('money') || 0;\n      this.loadingBalance = false;\n      m.redraw();\n    } catch (error) {\n      console.error('Error loading user balance:', error);\n      this.loadingBalance = false;\n      m.redraw();\n    }\n  }\n}","import Model from 'flarum/common/Model';\n\nexport default class WithdrawalPlatform extends Model {\n  name = Model.attribute('name');\n  symbol = Model.attribute('symbol');\n  minAmount = Model.attribute('minAmount');\n  maxAmount = Model.attribute('maxAmount');\n  fee = Model.attribute('fee');\n  icon = Model.attribute('icon');\n  isActive = Model.attribute('isActive');\n  createdAt = Model.attribute('createdAt', Model.transformDate);\n  updatedAt = Model.attribute('updatedAt', Model.transformDate);\n}","import Model from 'flarum/common/Model';\n\nexport default class WithdrawalRequest extends Model {\n  amount = Model.attribute('amount');\n  accountDetails = Model.attribute('accountDetails');\n  status = Model.attribute('status');\n  createdAt = Model.attribute('createdAt', Model.transformDate);\n  updatedAt = Model.attribute('updatedAt', Model.transformDate);\n  \n  user = Model.hasOne('user');\n  platform = Model.hasOne('withdrawal-platforms');\n}","import Extend from 'flarum/common/extenders';\nimport WithdrawalPlatform from './models/WithdrawalPlatform';\nimport WithdrawalRequest from './models/WithdrawalRequest';\n\nexport default [\n  new Extend.Store()\n    .add('withdrawal-platforms', WithdrawalPlatform)\n    .add('withdrawal-requests', WithdrawalRequest),\n];","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport WithdrawalPage from './components/WithdrawalPage';\nimport WithdrawalPlatform from '../common/models/WithdrawalPlatform';\nimport WithdrawalRequest from '../common/models/WithdrawalRequest';\n\napp.initializers.add('wusong8899-withdrawal', () => {\n  // Register models in store\n  app.store.models['withdrawal-platforms'] = WithdrawalPlatform;\n  app.store.models['withdrawal-requests'] = WithdrawalRequest;\n  \n  app.routes.withdrawal = { path: '/withdrawal', component: WithdrawalPage };\n\n  extend(HeaderSecondary.prototype, 'items', function (items: ItemList<any>) {\n    if (app.session.user) {\n      items.add(\n        'withdrawal',\n        LinkButton.component(\n          {\n            href: app.route('withdrawal'),\n            icon: 'fas fa-money-bill-transfer',\n          },\n          app.translator.trans('withdrawal.forum.header.withdrawal_button')\n        ),\n        10\n      );\n    }\n  });\n});\n\nexport { default as extend } from '../common/extend';"],"names":["WithdrawalPage","Page","Stream","vnode","app","LoadingIndicator","icon","selected","validPlatforms","platform","iconMap","symbol","iconClass","minAmount","maxAmount","fee","e","Button","amount","finalAmount","text","error","response","p","r","WithdrawalPlatform","Model","WithdrawalRequest","Extend","extend","HeaderSecondary","items","LinkButton"],"mappings":"8CAmCA,MAAqBA,UAAuBC,CAAK,CAAjD,aAAA,CAAA,MAAA,GAAA,SAAA,EACE,KAAQ,UAAkC,CAAA,EAC1C,KAAQ,SAAgC,CAAA,EACxC,KAAQ,QAAU,GAClB,KAAQ,WAAa,GACrB,KAAQ,eAAiB,GACzB,KAAQ,YAAc,EACtB,KAAQ,aAAe,GAEvB,KAAQ,OAASC,EAAO,EAAE,EAC1B,KAAQ,iBAAmBA,EAAkC,IAAI,EACjE,KAAQ,eAAiBA,EAAO,EAAE,EAClC,KAAQ,YAAcA,EAAO,EAAK,CAAA,CAElC,OAAOC,EAAyB,CAC9B,MAAM,OAAOA,CAAK,EAElBC,EAAI,SAASA,EAAI,WAAW,MAAM,6BAA6B,CAAC,EAEhE,KAAK,SAAA,EACL,KAAK,gBAAA,CACP,CAEA,MAAO,CACL,OAAI,KAAK,QAEL,EAAC,MAAA,CAAI,UAAU,gBAAA,EACb,EAAC,MAAA,CAAI,UAAU,wBAAA,EACb,EAACC,EAAA,IAAiB,CACpB,CACF,EAKF,EAAC,MAAA,CAAI,UAAU,gBAAA,EACb,EAAC,MAAA,CAAI,UAAU,sBAAA,EACb,EAAC,MAAA,CAAI,UAAU,uBAAA,IACZ,MAAA,CAAI,UAAU,qBAAA,EACb,EAAC,MAAA,CAAI,UAAU,2BAAA,EACZD,EAAI,WAAW,MAAM,8BAA8B,CACtD,CACF,EACA,EAAC,SAAA,CAAO,UAAU,uBAAuB,QAAS,IAAM,OAAO,QAAQ,KAAA,CAAK,EACzEE,EAAK,cAAc,CACtB,CACF,EAEA,EAAC,MAAA,CAAI,UAAU,wBAAA,EACZ,KAAK,uBAAA,EACL,KAAK,uBAAA,EACL,KAAK,sBACL,KAAK,qBAAA,EACL,KAAK,sBAAA,EACL,KAAK,mBAAA,CACR,CACF,CACF,CAEJ,CAEQ,wBAA2C,CACjD,OACE,EAAC,MAAA,CAAI,UAAU,2BAAA,EACb,EAAC,MAAA,CAAI,UAAU,kCAAA,EACZF,EAAI,WAAW,MAAM,+BAA+B,CACvD,EACA,EAAC,MAAA,CAAI,UAAU,2BAAA,EACZA,EAAI,WAAW,MAAM,6BAA6B,EACnD,EAAC,OAAA,CAAK,UAAU,yBAAA,EAA2BE,EAAK,oBAAoB,CAAE,CACxE,CACF,CAEJ,CAEQ,wBAA2C,CACjD,MAAMC,EAAW,KAAK,iBAAA,EAEtB,OACE,EAAC,OAAI,UAAU,iCAAA,IACZ,MAAA,CAAI,UAAU,kCAAkC,QAAS,IAAM,KAAK,aAAe,CAAC,KAAK,cACxF,EAAC,OAAI,UAAU,iCAAA,EACb,EAAC,MAAA,CAAI,UAAU,6BAAA,IACZ,MAAA,CAAI,UAAU,+BACZA,EAAW,KAAK,mBAAmBA,CAAQ,EAAID,EAAK,iBAAkB,CAAE,UAAW,eAAgB,CACtG,EACA,EAAC,MAAA,CAAI,UAAU,gCAAA,EACb,EAAC,MAAA,CAAI,UAAU,+BAAA,EACZC,GAAYA,EAAS,YAAaA,EAAS,WAAW,QAAU,KACnE,EACA,EAAC,OAAI,UAAU,6BAAA,EACZH,EAAI,WAAW,MAAM,kCAAmC,CAAE,OAAQ,aAAc,CACnF,CACF,CACF,EACA,EAAC,OAAI,UAAU,6BAAA,EACZG,GAAYA,EAAS,WAAaA,EAAS,WAAW,KAAO,SAChE,CACF,EACCD,EAAK,sBAAuB,CAAE,UAAW,8BAA+B,CAC3E,EAEC,KAAK,cAAgB,KAAK,uBAAA,CAC7B,CAEJ,CAEQ,wBAA2C,CAEjD,MAAME,GAAkB,KAAK,WAAa,CAAA,GAAI,OAAOC,GACnDA,GAAYA,EAAS,YAAcA,EAAS,WAAW,MAAA,EAGzD,OAAID,EAAe,SAAW,EAE1B,EAAC,MAAA,CAAI,UAAU,6BAAA,EACb,EAAC,MAAA,CAAI,UAAU,mDAAA,EACZJ,EAAI,WAAW,MAAM,+BAA+B,CACvD,CACF,IAKD,MAAA,CAAI,UAAU,6BAAA,EACZI,EAAe,IAAIC,GAClB,EAAC,MAAA,CACC,IAAKA,EAAS,GACd,UAAU,8BACV,QAAS,IAAM,CACb,KAAK,iBAAiBA,CAAQ,EAC9B,KAAK,aAAe,GACpB,KAAK,OAAO,EAAE,CAChB,CAAA,IAEC,MAAA,CAAI,UAAU,+BACZ,KAAK,mBAAmBA,CAAQ,CACnC,IACC,MAAA,CAAI,UAAU,kCACb,EAAC,MAAA,CAAI,UAAU,iCAAiCA,EAAS,WAAW,MAAO,IAC1E,MAAA,CAAI,UAAU,+BAA+BA,EAAS,WAAW,IAAK,CACzE,CAAA,CAEH,CACH,CAEJ,CAEQ,mBAAmBA,EAAgD,CAEzE,GAAI,CAACA,GAAY,CAACA,EAAS,YAAc,CAACA,EAAS,WAAW,OAC5D,OAAOH,EAAK,eAAgB,CAAE,UAAW,sBAAuB,EAIlE,MAAMI,EAAkC,CACtC,IAAO,iBACP,IAAO,kBACP,IAAO,eACP,KAAQ,qBACR,KAAQ,qBACR,IAAO,eACP,IAAO,eACP,IAAO,eACP,IAAO,eACP,MAAS,cAAA,EAGLC,EAASF,EAAS,WAAW,OAC7BG,EAAYF,EAAQC,CAAM,GAAK,eACrC,OAAOL,EAAKM,EAAW,CAAE,UAAW,eAAeD,EAAO,aAAa,GAAI,CAC7E,CAEQ,qBAAwC,CAC9C,MAAMJ,EAAW,KAAK,iBAAA,EAChBM,EAAYN,GAAU,WAAW,WAAa,KAC9CO,EAAYP,GAAU,WAAW,WAAa,GAC9CQ,EAAMR,GAAU,WAAW,KAAO,KAExC,OACE,EAAC,MAAA,CAAI,UAAU,8BAAA,EACb,EAAC,MAAA,CAAI,UAAU,0BAAA,EACb,EAAC,MAAA,CAAI,UAAU,8BAAA,EACb,EAAC,OAAA,CAAK,UAAU,sBAAA,EACbH,EAAI,WAAW,MAAM,8BAA8B,CACtD,EACA,EAAC,OAAA,CAAK,UAAU,wBAAA,EACbA,EAAI,WAAW,MAAM,qCAAsC,CAC1D,OAAQ,KAAK,eAAiB,aAAe,KAAK,YAAY,QAAQ,CAAC,CAAA,CACxE,CACH,CACF,EAEA,EAAC,MAAA,CAAI,UAAU,4BAAA,EACb,EAAC,QAAA,CACC,KAAK,OACL,UAAU,uBACV,YAAY,aACZ,MAAO,KAAK,OAAA,EACZ,QAAUY,GAAa,KAAK,OAAQA,EAAE,OAA4B,KAAK,CAAA,CAAA,EAEzE,EAACC,EAAA,CACC,UAAU,2BACV,QAAS,KAAK,cAAc,KAAK,IAAI,CAAA,EAEpCb,EAAI,WAAW,MAAM,kCAAkC,CAAA,CAE5D,EAEA,EAAC,MAAA,CAAI,UAAU,6BAAA,EACb,EAAC,MAAA,CAAI,UAAU,yBAAA,EACb,EAAC,OAAA,CAAK,UAAU,2BAAA,EACbA,EAAI,WAAW,MAAM,iCAAiC,CACzD,EACA,EAAC,OAAA,CAAK,UAAU,2BAAA,EACbE,EAAK,cAAc,EAAE,IAAEO,EAAU,MAAIC,CACxC,CACF,EACA,EAAC,MAAA,CAAI,UAAU,yBAAA,EACb,EAAC,OAAA,CAAK,UAAU,2BAAA,EACbV,EAAI,WAAW,MAAM,6BAA6B,CACrD,EACA,EAAC,OAAA,CAAK,UAAU,2BAAA,EACbE,EAAK,cAAc,EAAE,IAAES,CAC1B,CACF,CACF,CACF,CACF,CAEJ,CAEQ,sBAAyC,CAE/C,MAAMJ,EADW,KAAK,iBAAA,GACG,WAAW,QAAU,MAE9C,OACE,EAAC,MAAA,CAAI,UAAU,+BAAA,EACb,EAAC,MAAA,CAAI,UAAU,0BAAA,EACb,EAAC,MAAA,CAAI,UAAU,8BAAA,EACb,EAAC,QAAK,UAAU,sBAAA,EACbP,EAAI,WAAW,MAAM,gCAAiC,CAAE,OAAAO,CAAA,CAAQ,EACjE,EAAC,OAAA,CAAK,UAAU,yBAAA,EAA0B,GAAC,CAC7C,EACA,EAAC,MAAA,CAAI,UAAU,6BAA6B,QAAS,IAAM,KAAK,YAAY,CAAC,KAAK,YAAA,CAAa,CAAA,EAC5FL,EAAK,iBAAiB,EACtBF,EAAI,WAAW,MAAM,oCAAoC,CAC5D,CACF,EAEA,EAAC,MAAA,CAAI,UAAU,6BAAA,EACb,EAAC,QAAA,CACC,KAAK,OACL,UAAU,uBACV,YAAaA,EAAI,WAAW,MAAM,2CAA2C,EAC7E,MAAO,KAAK,eAAA,EACZ,QAAUY,GAAa,KAAK,eAAgBA,EAAE,OAA4B,KAAK,CAAA,CAAA,EAEjF,EAAC,SAAA,CAAO,UAAU,6BAA6B,QAAS,KAAK,mBAAmB,KAAK,IAAI,GACtFV,EAAK,cAAc,CACtB,CACF,CACF,CACF,CAEJ,CAEQ,uBAA0C,CAChD,OACE,EAAC,MAAA,CAAI,UAAU,gCAAA,IACZ,MAAA,CAAI,UAAU,gCAAgC,QAAS,IAAM,KAAK,uBAAA,KAChE,MAAA,CAAI,UAAU,8BAAA,EACb,EAAC,OAAA,CAAK,UAAU,2BAAA,EACbF,EAAI,WAAW,MAAM,sCAAsC,CAC9D,IACC,OAAA,CAAK,UAAU,6BAAA,EAA8B,IAAE,CAClD,EACCE,EAAK,sBAAsB,CAC9B,EAEA,EAAC,MAAA,CAAI,UAAU,gCAAgC,QAAS,IAAM,KAAK,cAAA,GACjE,EAAC,MAAA,CAAI,UAAU,8BAAA,IACZ,OAAA,CAAK,UAAU,2BAAA,EACbF,EAAI,WAAW,MAAM,oCAAoC,CAC5D,EACA,EAAC,OAAA,CAAK,UAAU,+BAA8B,IAAE,CAClD,EACCE,EAAK,sBAAsB,CAC9B,CACF,CAEJ,CAEQ,oBAAuC,CAC7C,MAAMY,EAAS,WAAW,KAAK,OAAA,CAAQ,GAAK,EACtCX,EAAW,KAAK,iBAAA,EAChBQ,EAAMR,GAAU,WAAW,KAAO,EAClCY,EAAc,KAAK,IAAI,EAAGD,EAASH,CAAG,EACtCJ,EAASJ,GAAU,WAAW,QAAU,MAE9C,OACE,EAAC,MAAA,CAAI,UAAU,8BAAA,EACb,EAACU,EAAA,CACC,UAAU,8BACV,QAAS,KAAK,WACd,SAAU,CAAC,KAAK,UAAA,EAChB,QAAS,KAAK,OAAO,KAAK,IAAI,CAAA,EAE7Bb,EAAI,WAAW,MAAM,8BAA8B,CAAA,EAGrDc,EAAS,GACR,EAAC,MAAA,CAAI,UAAU,4BAAA,EACZd,EAAI,WAAW,MAAM,gCAAiC,CACrD,OAAQe,EAAY,QAAQ,CAAC,EAC7B,OAAAR,CAAA,CACD,CACH,CAEJ,CAEJ,CAEQ,WAAqB,CAC3B,MAAO,CAAC,EACN,KAAK,oBACL,KAAK,UACL,KAAK,eAAA,GACL,CAAC,KAAK,YACN,WAAW,KAAK,OAAA,CAAQ,EAAI,EAEhC,CAEQ,eAAsB,CACxB,KAAK,gBACT,KAAK,OAAO,KAAK,YAAY,QAAQ,CAAC,CAAC,CACzC,CAEA,MAAc,oBAAoC,CAChD,GAAI,CACF,GAAI,UAAU,WAAa,UAAU,UAAU,SAAU,CACvD,MAAMS,EAAO,MAAM,UAAU,UAAU,SAAA,EACvC,KAAK,eAAeA,EAAK,MAAM,EAC/B,EAAE,OAAA,CACJ,CACF,OAASC,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,EACrDjB,EAAI,OAAO,KAAK,CACd,KAAM,QACN,YAAa,EAAA,EACZA,EAAI,WAAW,MAAM,kCAAkC,CAAC,CAC7D,CACF,CAEQ,wBAA+B,CAErCA,EAAI,OAAO,KAAK,CACd,KAAM,OACN,YAAa,EAAA,EACZA,EAAI,WAAW,MAAM,yCAAyC,CAAC,CACpE,CAEQ,eAAsB,CAE5BA,EAAI,OAAO,KAAK,CACd,KAAM,OACN,YAAa,EAAA,EACZA,EAAI,WAAW,MAAM,+BAA+B,CAAC,CAC1D,CAEA,MAAc,QAAwB,CACpC,GAAK,KAAK,YAEV,MAAK,WAAa,GAElB,GAAI,CACF,MAAMK,EAAW,KAAK,iBAAA,EAEhBa,EAAW,MAAMlB,EAAI,QAAQ,CACjC,OAAQ,OACR,IAAKA,EAAI,MAAM,UAAU,QAAQ,EAAI,uBACrC,KAAM,CACJ,KAAM,CACJ,KAAM,sBACN,WAAY,CACV,WAAYK,EAAS,GACrB,OAAQ,WAAW,KAAK,QAAQ,EAChC,eAAgB,KAAK,eAAA,CAAe,CACtC,CACF,CACF,CACD,EAEGa,GAAYA,EAAS,MACvBlB,EAAI,MAAM,YAAYkB,CAAQ,EAGhClB,EAAI,OAAO,KAAK,CACd,KAAM,UACN,YAAa,EAAA,EACZA,EAAI,WAAW,MAAM,+BAA+B,CAAC,EAGxD,KAAK,OAAO,EAAE,EACd,KAAK,eAAe,EAAE,EACtB,KAAK,YAAY,EAAK,EAGtB,KAAK,aAAA,CACP,OAASiB,EAAO,CACd,QAAQ,MAAM,uCAAwCA,CAAK,EAC3DjB,EAAI,OAAO,KAAK,CACd,KAAM,QACN,YAAa,EAAA,EACZA,EAAI,WAAW,MAAM,6BAA6B,CAAC,CACxD,QAAA,CACE,KAAK,WAAa,GAClB,EAAE,OAAA,CACJ,EACF,CAEA,MAAc,UAA0B,CACtC,GAAI,CACF,MAAM,QAAQ,IAAI,CAChB,KAAK,cAAA,EACL,KAAK,aAAA,CAAa,CACnB,CACH,OAASiB,EAAO,CACd,QAAQ,MAAM,sBAAuBA,CAAK,CAC5C,QAAA,CACE,KAAK,QAAU,GACf,EAAE,OAAA,CACJ,CACF,CAEA,MAAc,eAA+B,CAC3C,GAAI,CACF,QAAQ,IAAI,iCAAiC,EAC7C,MAAMC,EAAW,MAAMlB,EAAI,MAAM,KAAK,sBAAsB,EAC5D,QAAQ,IAAI,qBAAsBkB,CAAQ,EAE1C,KAAK,UAAY,MAAM,QAAQA,CAAQ,EAAIA,EAAS,OAAOC,GAAKA,IAAM,IAAI,EAAKD,EAAW,CAACA,CAAQ,EAAI,CAAA,EACvG,QAAQ,IAAI,uBAAwB,KAAK,SAAS,EAG9C,KAAK,UAAU,OAAS,GAAK,CAAC,KAAK,oBACrC,KAAK,iBAAiB,KAAK,UAAU,CAAC,CAAC,CAE3C,OAASD,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC/C,KAAK,UAAY,CAAA,CACnB,CACF,CAEA,MAAc,cAA8B,CAC1C,GAAI,CACF,MAAMC,EAAW,MAAMlB,EAAI,MAAM,KAAK,qBAAqB,EAC3D,KAAK,SAAW,MAAM,QAAQkB,CAAQ,EAAIA,EAAS,OAAOE,GAAKA,IAAM,IAAI,EAAKF,EAAW,CAACA,CAAQ,EAAI,CAAA,CACxG,OAASD,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9C,KAAK,SAAW,CAAA,CAClB,CACF,CAEA,MAAc,iBAAiC,CAC7C,GAAI,CAEF,KAAK,YAAcjB,EAAI,QAAQ,MAAM,UAAU,OAAO,GAAK,EAC3D,KAAK,eAAiB,GACtB,EAAE,OAAA,CACJ,OAASiB,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,EAClD,KAAK,eAAiB,GACtB,EAAE,OAAA,CACJ,CACF,CACF,CC7fA,MAAqBI,UAA2BC,CAAM,CAAtD,aAAA,CAAA,MAAA,GAAA,SAAA,EACE,KAAA,KAAOA,EAAM,UAAU,MAAM,EAC7B,KAAA,OAASA,EAAM,UAAU,QAAQ,EACjC,KAAA,UAAYA,EAAM,UAAU,WAAW,EACvC,KAAA,UAAYA,EAAM,UAAU,WAAW,EACvC,KAAA,IAAMA,EAAM,UAAU,KAAK,EAC3B,KAAA,KAAOA,EAAM,UAAU,MAAM,EAC7B,KAAA,SAAWA,EAAM,UAAU,UAAU,EACrC,KAAA,UAAYA,EAAM,UAAU,YAAaA,EAAM,aAAa,EAC5D,KAAA,UAAYA,EAAM,UAAU,YAAaA,EAAM,aAAa,CAAA,CAC9D,CCVA,MAAqBC,UAA0BD,CAAM,CAArD,aAAA,CAAA,MAAA,GAAA,SAAA,EACE,KAAA,OAASA,EAAM,UAAU,QAAQ,EACjC,KAAA,eAAiBA,EAAM,UAAU,gBAAgB,EACjD,KAAA,OAASA,EAAM,UAAU,QAAQ,EACjC,KAAA,UAAYA,EAAM,UAAU,YAAaA,EAAM,aAAa,EAC5D,KAAA,UAAYA,EAAM,UAAU,YAAaA,EAAM,aAAa,EAE5D,KAAA,KAAOA,EAAM,OAAO,MAAM,EAC1B,KAAA,SAAWA,EAAM,OAAO,sBAAsB,CAAA,CAChD,CCNE,IAAIE,EAAO,MAAA,EACR,IAAI,uBAAwBH,CAAkB,EAC9C,IAAI,sBAAuBE,CAAiB,ECEjDvB,EAAI,aAAa,IAAI,wBAAyB,IAAM,CAElDA,EAAI,MAAM,OAAO,sBAAsB,EAAIqB,EAC3CrB,EAAI,MAAM,OAAO,qBAAqB,EAAIuB,EAE1CvB,EAAI,OAAO,WAAa,CAAE,KAAM,cAAe,UAAWJ,CAAA,EAE1D6B,EAAAA,OAAOC,EAAgB,UAAW,QAAS,SAAUC,EAAsB,CACrE3B,EAAI,QAAQ,MACd2B,EAAM,IACJ,aACAC,EAAW,UACT,CACE,KAAM5B,EAAI,MAAM,YAAY,EAC5B,KAAM,4BAAA,EAERA,EAAI,WAAW,MAAM,2CAA2C,CAAA,EAElE,EAAA,CAGN,CAAC,CACH,CAAC"}