(function(s,q,P,a,w,F,u,l,T,A,b,U,_,r){"use strict";class E extends w{view(){return m("div",{className:"WithdrawalManagementPage-section"},m("h3",null,"General Settings"),m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.settings.money_icon_url")),m("input",{type:"url",className:"FormControl",placeholder:"https://i.mji.rip/2025/08/28/cd18932c68e9bbee9502b1fb6317cba9.png",value:s.forum.attribute("wusong8899-withdrawal.moneyIconUrl")||"",oninput:F("value",t=>this.attrs.onSettingChange("wusong8899-withdrawal.moneyIconUrl",t))}),m("small",{className:"helpText"},s.translator.trans("withdrawal.admin.settings.money_icon_url_help")))))}}class S extends w{constructor(){super(...arguments),this.name=l(""),this.symbol=l(""),this.network=l(""),this.minAmount=l(""),this.maxAmount=l(""),this.fee=l(""),this.iconUrl=l(""),this.iconClass=l("")}view(){return a("div",{className:"WithdrawalManagementPage-addPlatform"},a("div",{className:"Form-group"},a("div",{className:"Form-row"},a("div",{className:"Form-col"},a("label",null,s.translator.trans("withdrawal.admin.platforms.name")),a("input",{type:"text",className:"FormControl",placeholder:s.translator.trans("withdrawal.admin.platforms.add_placeholder"),bidi:this.name})),a("div",{className:"Form-col"},a("label",null,s.translator.trans("withdrawal.admin.platforms.symbol")),a("input",{type:"text",className:"FormControl",placeholder:"BTC, ETH, USDT...",bidi:this.symbol})),a("div",{className:"Form-col"},a("label",null,s.translator.trans("withdrawal.admin.platforms.network")),a("input",{type:"text",className:"FormControl",placeholder:"TRC20, ERC20, BSC... (optional)",bidi:this.network}),a("small",{className:"helpText"},s.translator.trans("withdrawal.admin.platforms.network_help")))),a("div",{className:"Form-row"},a("div",{className:"Form-col"},a("label",null,s.translator.trans("withdrawal.admin.platforms.min_amount")),a("input",{type:"number",step:"0.00000001",className:"FormControl",placeholder:"0.001",bidi:this.minAmount})),a("div",{className:"Form-col"},a("label",null,s.translator.trans("withdrawal.admin.platforms.max_amount")),a("input",{type:"number",step:"0.00000001",className:"FormControl",placeholder:"10.0",bidi:this.maxAmount})),a("div",{className:"Form-col"},a("label",null,s.translator.trans("withdrawal.admin.platforms.fee")),a("input",{type:"number",step:"0.00000001",className:"FormControl",placeholder:"0.0005",bidi:this.fee}))),a("div",{className:"Form-row"},a("div",{className:"Form-col"},a("label",null,s.translator.trans("withdrawal.admin.platforms.icon_url")),a("input",{type:"url",className:"FormControl",placeholder:"https://example.com/icon.png",bidi:this.iconUrl}),a("small",{className:"helpText"},s.translator.trans("withdrawal.admin.platforms.icon_url_help"))),a("div",{className:"Form-col"},a("label",null,s.translator.trans("withdrawal.admin.platforms.icon_class")),a("input",{type:"text",className:"FormControl",placeholder:"fas fa-coins",bidi:this.iconClass}),a("small",{className:"helpText"},s.translator.trans("withdrawal.admin.platforms.icon_class_help")))),a("div",{className:"Form-group"},a(u,{className:"Button Button--primary",loading:this.attrs.submitting,disabled:!this.canSubmit(),onclick:this.handleSubmit.bind(this)},s.translator.trans("withdrawal.admin.platforms.add_button")))))}canSubmit(){return!!(this.name()&&this.name().trim()&&this.symbol()&&this.symbol().trim()&&this.minAmount()&&this.maxAmount()&&parseFloat(this.minAmount())>0&&parseFloat(this.maxAmount())>0&&parseFloat(this.maxAmount())>=parseFloat(this.minAmount()))}async handleSubmit(){if(!this.canSubmit()||this.attrs.submitting)return;const t={name:this.name(),symbol:this.symbol(),network:this.network(),minAmount:this.minAmount(),maxAmount:this.maxAmount(),fee:this.fee(),iconUrl:this.iconUrl(),iconClass:this.iconClass()};try{await this.attrs.onSubmit(t),this.clearForm()}catch{}}clearForm(){this.name(""),this.symbol(""),this.network(""),this.minAmount(""),this.maxAmount(""),this.fee(""),this.iconUrl(""),this.iconClass(""),a.redraw()}}class R extends w{view(){const t=this.attrs.platform,e=typeof t.id=="function"?t.id():t.id,i=(typeof t.name=="function"?t.name():t.attributes?.name)||"Unknown Platform",o=(typeof t.network=="function"?t.network():t.attributes?.network)||null,d=(typeof t.displayName=="function"?t.displayName():t.attributes?.displayName)||i,n=(typeof t.minAmount=="function"?t.minAmount():t.attributes?.minAmount)||"N/A",y=(typeof t.maxAmount=="function"?t.maxAmount():t.attributes?.maxAmount)||"N/A",N=(typeof t.fee=="function"?t.fee():t.attributes?.fee)||"N/A",p=(typeof t.isActive=="function"?t.isActive():t.attributes?.isActive)??!1,g=(typeof t.createdAt=="function"?t.createdAt():t.attributes?.createdAt)||null;let c="N/A";if(g)try{c=T(g)}catch(v){console.error("Error formatting date:",v),c="Invalid Date"}return m("div",{key:e,className:"WithdrawalPlatform"},m("div",{className:"WithdrawalPlatform-info"},m("div",{className:"WithdrawalPlatform-primary"},m("span",{className:`WithdrawalPlatform-status ${p?"active":"inactive"}`},p?"ðŸŸ¢":"ðŸ”´"),m("span",{className:"WithdrawalPlatform-name"},d),m("span",{className:"platform-id"},"#",e),o&&m("span",{className:"WithdrawalPlatform-network"},"(",o,")")),m("div",{className:"WithdrawalPlatform-details"},m("span",{className:"WithdrawalPlatform-amounts"},"Min: ",n," | Max: ",y," | Fee: ",N),m("span",{className:"WithdrawalPlatform-date"},c))),m("div",{className:"WithdrawalPlatform-actions"},m(u,{className:`Button ${p?"Button--secondary":"Button--primary"}`,onclick:()=>this.attrs.onToggleStatus(t)},s.translator.trans(`withdrawal.admin.platforms.${p?"disable":"enable"}`)),m(u,{className:"Button Button--danger",onclick:()=>this.attrs.onDelete(t)},s.translator.trans("withdrawal.admin.platforms.delete"))))}}class B extends w{view(){const{platforms:t,submittingPlatform:e,onAddPlatform:i,onTogglePlatformStatus:o,onDeletePlatform:d}=this.attrs;return m("div",{className:"WithdrawalManagementPage-section"},m("h3",null,s.translator.trans("withdrawal.admin.platforms.title")),m(S,{onSubmit:i,submitting:e}),m("div",{className:"WithdrawalManagementPage-platformList"},t.length===0?m("p",null,s.translator.trans("withdrawal.admin.platforms.empty")):t.map(n=>m(R,{key:typeof n.id=="function"?n.id():n.id,platform:n,onToggleStatus:o,onDelete:d}))))}}class C extends w{view(){const t=this.attrs.request,{showActions:e,showDelete:i=!1}=this.attrs,o=typeof t.id=="function"?t.id():t.id,d=typeof t.amount=="function"?t.amount():t.attributes?.amount||0,n=typeof t.status=="function"?t.status():t.attributes?.status||"pending",y=typeof t.accountDetails=="function"?t.accountDetails():t.attributes?.accountDetails||t.attributes?.account_details||"N/A",N=typeof t.createdAt=="function"?t.createdAt():t.attributes?.createdAt||null;let p="Unknown User";if(typeof t.user=="function"){const f=t.user();f&&typeof f.displayName=="function"?p=f.displayName():f&&f.attributes?.displayName&&(p=f.attributes.displayName)}let g="Unknown Platform",c="N/A";if(typeof t.platform=="function"){const f=t.platform();f&&(g=typeof f.name=="function"?f.name():f.attributes?.name||"Unknown Platform",c=typeof f.symbol=="function"?f.symbol():f.attributes?.symbol||"N/A")}const v=`status-${n}`;let k="N/A";if(N)try{k=T(N)}catch(f){console.error("Error formatting request date:",f),k="Invalid Date"}return m("div",{key:o,className:`WithdrawalRequest ${v}`},m("div",{className:"WithdrawalRequest-info"},m("div",{className:"WithdrawalRequest-user"},m("strong",null,p),m("span",{className:"request-id"},"#",o)),m("div",{className:"WithdrawalRequest-details"},m("span",{className:"amount"},d),m("span",{className:"platform"},g),m("span",{className:"symbol"},c),m("span",{className:"date"},k)),m("div",{className:"WithdrawalRequest-account"},m("strong",null,s.translator.trans("withdrawal.admin.requests.account_details"),":"),m("span",null,y)),m("div",{className:"WithdrawalRequest-status"},m("span",{className:`Badge Badge--${n}`},s.translator.trans(`withdrawal.admin.requests.status.${n}`)))),(e||i)&&m("div",{className:"WithdrawalRequest-actions"},e&&this.attrs.onUpdateStatus&&m("[",null,m(u,{className:"Button Button--primary",onclick:()=>this.attrs.onUpdateStatus(t,"approved")},s.translator.trans("withdrawal.admin.requests.approve")),m(u,{className:"Button Button--danger",onclick:()=>this.attrs.onUpdateStatus(t,"rejected")},s.translator.trans("withdrawal.admin.requests.reject"))),this.attrs.onDelete&&m(u,{className:"Button Button--link",onclick:()=>this.attrs.onDelete(t)},m("i",{className:"fas fa-trash"}),s.translator.trans("withdrawal.admin.requests.delete"))))}}class L extends w{view(){const{requests:t,onUpdateRequestStatus:e,onDeleteRequest:i}=this.attrs,o=t.filter(n=>((typeof n.status=="function"?n.status():n.attributes?.status)||"pending")==="pending"),d=t.filter(n=>((typeof n.status=="function"?n.status():n.attributes?.status)||"pending")!=="pending");return m("div",{className:"WithdrawalManagementPage-section"},m("h3",null,s.translator.trans("withdrawal.admin.requests.title")),m("div",{className:"WithdrawalManagementPage-pendingRequests"},m("h4",null,s.translator.trans("withdrawal.admin.requests.pending_title")),o.length===0?m("p",null,s.translator.trans("withdrawal.admin.requests.no_pending")):o.map(n=>m(C,{key:typeof n.id=="function"?n.id():n.id,request:n,showActions:!0,showDelete:!0,onUpdateStatus:e,onDelete:i}))),m("div",{className:"WithdrawalManagementPage-processedRequests"},m("h4",null,s.translator.trans("withdrawal.admin.requests.processed_title")),d.length===0?m("p",null,s.translator.trans("withdrawal.admin.requests.no_processed")):d.map(n=>m(C,{key:typeof n.id=="function"?n.id():n.id,request:n,showActions:!1,showDelete:!0,onDelete:i}))))}}class O extends w{constructor(){super(...arguments),this.formData={name:l(""),symbol:l(""),network:l(""),networkTypeId:l(null),minAmount:l(""),maxAmount:l(""),address:l(""),qrCodeImageUrl:l(""),iconUrl:l(""),iconClass:l(""),warningText:l(""),isActive:l(!0)},this.networkTypes=[],this.loadingNetworkTypes=!1}oninit(t){super.oninit(t),this.loadNetworkTypes()}view(t){const{submitting:e,onCancel:i}=t.attrs;return a("div",{className:"AddDepositPlatformForm"},a("div",{className:"Form"},a("div",{className:"Form-row"},a("div",{className:"Form-group"},a("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.name"),a("span",{className:"Form-required"},"*")),a("input",{type:"text",className:"FormControl",placeholder:"e.g., Tether",bidi:this.formData.name,disabled:e})),a("div",{className:"Form-group"},a("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.symbol"),a("span",{className:"Form-required"},"*")),a("input",{type:"text",className:"FormControl",placeholder:"e.g., USDT",bidi:this.formData.symbol,disabled:e}))),a("div",{className:"Form-row"},a("div",{className:"Form-group"},a("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.network")),a("select",{className:"FormControl",value:this.formData.networkTypeId()||"",onchange:F("value",o=>{const d=o?parseInt(o):null;if(this.formData.networkTypeId(d),d){const n=this.networkTypes.find(y=>y.id()===d);n&&this.formData.network(n.code())}else this.formData.network("")}),disabled:e||this.loadingNetworkTypes},a("option",{value:""},this.loadingNetworkTypes?"Loading...":"Select Network Type (Optional)"),this.networkTypes.map(o=>a("option",{key:o.id(),value:o.id()},o.name())))),a("div",{className:"Form-group"},a("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.custom_network")),a("input",{type:"text",className:"FormControl",placeholder:"Custom network name (if not using predefined)",bidi:this.formData.network,disabled:e}),a("div",{className:"helpText"},"Leave empty to use the selected network type above, or enter a custom network name.")),a("div",{className:"Form-group"},a("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.min_amount")),a("input",{type:"number",step:"0.00000001",min:"0",className:"FormControl",placeholder:"0.0",bidi:this.formData.minAmount,disabled:e}))),a("div",{className:"Form-row"},a("div",{className:"Form-group"},a("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.max_amount")),a("input",{type:"number",step:"0.00000001",min:"0",className:"FormControl",placeholder:"Leave empty for unlimited",bidi:this.formData.maxAmount,disabled:e}))),a("div",{className:"Form-group"},a("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.address"),a("span",{className:"Form-required"},"*")),a("input",{type:"text",className:"FormControl",placeholder:"Enter deposit address for this platform",bidi:this.formData.address,disabled:e}),a("div",{className:"helpText"},s.translator.trans("withdrawal.admin.deposit.platforms.address_help"))),a("div",{className:"Form-group"},a("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.qr_code_image_url")),a("input",{type:"url",className:"FormControl",placeholder:"https://example.com/qr-code.png",bidi:this.formData.qrCodeImageUrl,disabled:e}),a("div",{className:"helpText"},s.translator.trans("withdrawal.admin.deposit.platforms.qr_code_image_help"))),a("div",{className:"Form-row"},a("div",{className:"Form-group"},a("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.icon_url")),a("input",{type:"url",className:"FormControl",placeholder:"https://example.com/icon.png",bidi:this.formData.iconUrl,disabled:e})),a("div",{className:"Form-group"},a("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.icon_class")),a("input",{type:"text",className:"FormControl",placeholder:"fas fa-coins",bidi:this.formData.iconClass,disabled:e}))),a("div",{className:"Form-group"},a("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.warning_text")),a("textarea",{className:"FormControl",rows:3,placeholder:"Network-specific warning for users",bidi:this.formData.warningText,disabled:e})),a("div",{className:"Form-group"},a(A,{state:this.formData.isActive(),onchange:this.formData.isActive,disabled:e},s.translator.trans("withdrawal.admin.deposit.platforms.is_active"))),a("div",{className:"Form-actions"},a(u,{className:"Button Button--primary",type:"submit",loading:e,onclick:this.handleSubmit.bind(this,t.attrs)},s.translator.trans("withdrawal.admin.deposit.platforms.add_button")),a(u,{className:"Button",onclick:i,disabled:e},s.translator.trans("core.admin.basics.cancel_button")))))}async loadNetworkTypes(){this.loadingNetworkTypes=!0,a.redraw();try{const t=await s.request({method:"GET",url:s.forum.attribute("apiUrl")+"/network-types?filter[is_active]=1"});s.store.pushPayload(t),this.networkTypes=s.store.all("network-types")}catch(t){console.error("Failed to load network types:",t)}finally{this.loadingNetworkTypes=!1,a.redraw()}}async handleSubmit(t){if(!this.formData.name()||!this.formData.symbol()||!this.formData.address()){s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.deposit.platforms.required_fields_error"));return}const e={name:this.formData.name(),symbol:this.formData.symbol(),network:this.formData.network(),networkTypeId:this.formData.networkTypeId(),minAmount:this.formData.minAmount(),maxAmount:this.formData.maxAmount(),address:this.formData.address(),qrCodeImageUrl:this.formData.qrCodeImageUrl(),iconUrl:this.formData.iconUrl(),iconClass:this.formData.iconClass(),warningText:this.formData.warningText(),isActive:this.formData.isActive()};try{await t.onSubmit(e),Object.keys(this.formData).forEach(i=>{i==="isActive"?this.formData[i](!0):i==="networkTypeId"?this.formData[i](null):this.formData[i]("")}),t.onCancel()}catch(i){console.error("Form submission error:",i)}}}class W extends w{view(t){const{platform:e,onToggleStatus:i,onDelete:o}=t.attrs;return a("div",{className:"DepositPlatformListItem"},a("div",{className:"DepositPlatformListItem-content"},a("div",{className:"DepositPlatformListItem-icon"},this.renderPlatformIcon(e)),a("div",{className:"DepositPlatformListItem-info"},a("div",{className:"DepositPlatformListItem-primary"},a("strong",null,e.name()),a("span",{className:"DepositPlatformListItem-displayName"},e.symbol()," (",e.network(),")")),a("div",{className:"DepositPlatformListItem-details"},a("span",{className:"DepositPlatformListItem-detail"},"Min: ",e.minAmount()," ",e.symbol()),e.maxAmount&&a("span",{className:"DepositPlatformListItem-detail"},"Max: ",e.maxAmount()," ",e.symbol()),a("span",{className:"DepositPlatformListItem-detail"},"Address: ",e.address()?"Static":"Template"))),a("div",{className:"DepositPlatformListItem-actions"},a(A,{state:e.isActive(),onchange:async()=>{await i(),a.redraw()}},e.isActive()?s.translator.trans("withdrawal.admin.deposit.platforms.active"):s.translator.trans("withdrawal.admin.deposit.platforms.inactive")),a(u,{className:"Button Button--icon Button--flat",icon:"fas fa-trash",onclick:async()=>{await o(),a.redraw()},title:s.translator.trans("withdrawal.admin.deposit.platforms.delete")}))))}renderPlatformIcon(t){if(t.iconUrl())return a("img",{src:t.iconUrl(),alt:t.symbol(),className:"DepositPlatformListItem-img"});if(t.iconClass())return b(t.iconClass());switch(t.symbol()){case"USDT":return a("span",{className:"DepositPlatformListItem-currencyIcon usdt"},"â‚®");case"USDC":return a("span",{className:"DepositPlatformListItem-currencyIcon usdc"},"$");case"BTC":return a("span",{className:"DepositPlatformListItem-currencyIcon btc"},"â‚¿");case"ETH":return a("span",{className:"DepositPlatformListItem-currencyIcon eth"},"Îž");default:return b("fas fa-coins")}}}class x extends w{view(t){const{transaction:e,showActions:i,onUpdateStatus:o}=t.attrs;return m("div",{className:"DepositTransactionItem"},m("div",{className:"DepositTransactionItem-header"},m("div",{className:"DepositTransactionItem-user"},m("strong",null,U(e.user)),m("span",{className:"DepositTransactionItem-time"},T(e.createdAt))),m("div",{className:"DepositTransactionItem-amount"},m("span",{className:"DepositTransactionItem-amountValue"},e.amount," ",e.platform.symbol),m("div",{className:`DepositTransactionItem-status status-${e.statusColor}`},this.getStatusIcon(e.status),this.getStatusText(e.status)))),m("div",{className:"DepositTransactionItem-details"},m("div",{className:"DepositTransactionItem-platform"},m("span",{className:"DepositTransactionItem-label"},"Platform:"),m("span",null,e.platform.name," (",e.platform.network,")")),e.transactionHash&&m("div",{className:"DepositTransactionItem-hash"},m("span",{className:"DepositTransactionItem-label"},"Hash:"),e.explorerUrl?m("a",{href:e.explorerUrl,target:"_blank",rel:"noopener noreferrer",className:"DepositTransactionItem-hashLink"},this.formatHash(e.transactionHash),b("fas fa-external-link-alt")):m("span",{className:"DepositTransactionItem-hashText"},this.formatHash(e.transactionHash))),e.fromAddress&&m("div",{className:"DepositTransactionItem-fromAddress"},m("span",{className:"DepositTransactionItem-label"},"From:"),m("span",{className:"DepositTransactionItem-address"},this.formatHash(e.fromAddress))),e.confirmations!==void 0&&m("div",{className:"DepositTransactionItem-confirmations"},m("span",{className:"DepositTransactionItem-label"},"Confirmations:"),m("span",null,e.confirmations,"/",e.requiredConfirmations,e.hasEnoughConfirmations&&m("span",{className:"DepositTransactionItem-confirmed"}," âœ“"))),e.adminNotes&&m("div",{className:"DepositTransactionItem-notes"},m("span",{className:"DepositTransactionItem-label"},"Notes:"),m("span",null,e.adminNotes))),i&&this.renderActions(e,o))}renderActions(t,e){const i=[];return t.status==="pending"&&i.push(m(u,{key:"confirm",className:"Button Button--primary Button--sm",onclick:()=>e("confirmed")},s.translator.trans("withdrawal.admin.deposit.transactions.confirm"))),t.status==="confirmed"&&t.canBeCompleted&&i.push(m(u,{key:"complete",className:"Button Button--success Button--sm",onclick:()=>e("completed")},s.translator.trans("withdrawal.admin.deposit.transactions.complete"))),(t.status==="pending"||t.status==="confirmed")&&i.push(m(u,{key:"reject",className:"Button Button--danger Button--sm",onclick:()=>e("failed")},s.translator.trans("withdrawal.admin.deposit.transactions.reject"))),i.length>0?m("div",{className:"DepositTransactionItem-actions"},i):null}getStatusIcon(t){switch(t){case"pending":return b("fas fa-clock");case"confirmed":return b("fas fa-check-circle");case"completed":return b("fas fa-check-double");case"failed":return b("fas fa-times-circle");case"cancelled":return b("fas fa-ban");default:return b("fas fa-question-circle")}}getStatusText(t){switch(t){case"pending":return s.translator.trans("withdrawal.admin.deposit.transactions.status.pending");case"confirmed":return s.translator.trans("withdrawal.admin.deposit.transactions.status.confirmed");case"completed":return s.translator.trans("withdrawal.admin.deposit.transactions.status.completed");case"failed":return s.translator.trans("withdrawal.admin.deposit.transactions.status.failed");case"cancelled":return s.translator.trans("withdrawal.admin.deposit.transactions.status.cancelled");default:return t}}formatHash(t){return t.length<=16?t:`${t.substring(0,8)}...${t.substring(t.length-8)}`}}class H extends w{constructor(){super(...arguments),this.showPlatformForm=!1,this.activeTransactionTab="pending"}view(t){const{platforms:e,transactions:i,submittingPlatform:o,onAddPlatform:d,onTogglePlatformStatus:n,onDeletePlatform:y,onUpdateTransactionStatus:N}=t.attrs,p=i.filter(c=>c.status==="pending"||c.status==="confirmed"),g=i.filter(c=>c.status==="completed"||c.status==="failed"||c.status==="cancelled");return m("div",{className:"DepositManagementSection"},m("div",{className:"Form-group"},m("h3",null,s.translator.trans("withdrawal.admin.deposit.platforms.title")),m("div",{className:"DepositPlatforms"},m("div",{className:"DepositPlatforms-header"},m(u,{className:"Button Button--primary",onclick:()=>{this.showPlatformForm=!this.showPlatformForm}},s.translator.trans("withdrawal.admin.deposit.platforms.add_button"))),this.showPlatformForm&&m(O,{submitting:o,onSubmit:d,onCancel:()=>{this.showPlatformForm=!1}}),m("div",{className:"DepositPlatforms-list"},e.length===0?m("p",{className:"DepositPlatforms-empty"},s.translator.trans("withdrawal.admin.deposit.platforms.empty")):e.map(c=>m(W,{key:c.id,platform:c,onToggleStatus:()=>n(c),onDelete:()=>y(c)}))))),m("div",{className:"Form-group"},m("h3",null,s.translator.trans("withdrawal.admin.deposit.transactions.title")),m("div",{className:"DepositTransactions"},m("div",{className:"DepositTransactions-tabs"},m("button",{className:`DepositTransactions-tab ${this.activeTransactionTab==="pending"?"active":""}`,onclick:()=>{this.activeTransactionTab="pending"}},s.translator.trans("withdrawal.admin.deposit.transactions.pending_title")," (",p.length,")"),m("button",{className:`DepositTransactions-tab ${this.activeTransactionTab==="completed"?"active":""}`,onclick:()=>{this.activeTransactionTab="completed"}},s.translator.trans("withdrawal.admin.deposit.transactions.completed_title")," (",g.length,")")),m("div",{className:"DepositTransactions-content"},this.activeTransactionTab==="pending"?m("div",{className:"DepositTransactions-pending"},p.length===0?m("p",{className:"DepositTransactions-empty"},s.translator.trans("withdrawal.admin.deposit.transactions.no_pending")):p.map(c=>m(x,{key:c.id,transaction:c,onUpdateStatus:v=>N(c,v),showActions:!0}))):m("div",{className:"DepositTransactions-completed"},g.length===0?m("p",{className:"DepositTransactions-empty"},s.translator.trans("withdrawal.admin.deposit.transactions.no_completed")):g.map(c=>m(x,{key:c.id,transaction:c,onUpdateStatus:v=>N(c,v),showActions:!1})))))))}}class j extends w{constructor(){super(...arguments),this.editing=!1,this.submitting=!1,this.formData={}}oninit(t){super.oninit(t),this.initFormData(t.attrs.networkType)}view(t){const{networkType:e}=t.attrs;return a("div",{className:"NetworkTypeListItem"},a("div",{className:"item-header"},a("div",{className:"item-info"},a("div",{className:"item-icon"},e.iconClass()?a("i",{className:e.iconClass()}):e.iconUrl()?a("img",{src:e.iconUrl(),alt:e.name(),style:"width: 24px; height: 24px;"}):a("i",{className:"fas fa-network-wired"})),a("div",{className:"item-details"},a("h4",null,e.name()),a("span",{className:"code"},e.code()),e.description()&&a("p",{className:"description"},e.description()))),a("div",{className:"item-actions"},a(u,{className:"Button Button--link",icon:"fas fa-edit",onclick:()=>this.toggleEdit(),disabled:this.submitting},this.editing?s.translator.trans("core.admin.basics.cancel_button"):s.translator.trans("core.admin.edit")),a(u,{className:"Button Button--link text-danger",icon:"fas fa-trash",onclick:()=>t.attrs.onDelete(e),disabled:this.submitting},s.translator.trans("core.admin.delete")))),this.editing&&a("div",{className:"item-edit-form"},a("div",{className:"Form"},a("div",{className:"Form-row"},a("div",{className:"Form-group"},a("label",null,"Name"),a("input",{type:"text",className:"FormControl",bidi:this.formData.name,disabled:this.submitting})),a("div",{className:"Form-group"},a("label",null,"Code"),a("input",{type:"text",className:"FormControl",bidi:this.formData.code,disabled:this.submitting}))),a("div",{className:"Form-group"},a("label",null,"Description"),a("textarea",{className:"FormControl",rows:2,bidi:this.formData.description,disabled:this.submitting})),a("div",{className:"Form-row"},a("div",{className:"Form-group"},a("label",null,"Icon URL"),a("input",{type:"url",className:"FormControl",bidi:this.formData.iconUrl,disabled:this.submitting})),a("div",{className:"Form-group"},a("label",null,"Icon Class"),a("input",{type:"text",className:"FormControl",bidi:this.formData.iconClass,disabled:this.submitting}))),a("div",{className:"Form-group"},a("label",null,"Sort Order"),a("input",{type:"number",min:"0",className:"FormControl",bidi:this.formData.sortOrder,disabled:this.submitting})),a("div",{className:"Form-group"},a(A,{state:this.formData.isActive(),onchange:this.formData.isActive,disabled:this.submitting},"Active")),a("div",{className:"Form-actions"},a(u,{className:"Button Button--primary",loading:this.submitting,onclick:this.handleSave.bind(this,t.attrs)},s.translator.trans("core.admin.basics.save_changes_button")),a(u,{className:"Button",onclick:()=>this.toggleEdit(),disabled:this.submitting},s.translator.trans("core.admin.basics.cancel_button"))))))}initFormData(t){this.formData={name:l(t.name()||""),code:l(t.code()||""),description:l(t.description()||""),iconUrl:l(t.iconUrl()||""),iconClass:l(t.iconClass()||""),isActive:l(t.isActive()??!0),sortOrder:l(String(t.sortOrder()||0))}}toggleEdit(){this.editing=!this.editing,this.editing||this.initFormData(this.attrs.networkType),a.redraw()}async handleSave(t){this.submitting=!0,a.redraw();const e={name:this.formData.name(),code:this.formData.code().toUpperCase(),description:this.formData.description()||null,iconUrl:this.formData.iconUrl()||null,iconClass:this.formData.iconClass()||null,isActive:this.formData.isActive(),sortOrder:parseInt(this.formData.sortOrder())||0};try{await t.onUpdate(t.networkType,e),this.editing=!1}catch{}finally{this.submitting=!1,a.redraw()}}}class G extends w{constructor(){super(...arguments),this.formData={name:l(""),code:l(""),description:l(""),iconUrl:l(""),iconClass:l(""),isActive:l(!0),sortOrder:l("0")}}view(t){const{submitting:e,onCancel:i}=t.attrs;return m("div",{className:"AddNetworkTypeForm"},m("div",{className:"Form"},m("div",{className:"Form-row"},m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.network_types.name"),m("span",{className:"Form-required"},"*")),m("input",{type:"text",className:"FormControl",placeholder:"e.g., TRON (TRC20)",bidi:this.formData.name,disabled:e})),m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.network_types.code"),m("span",{className:"Form-required"},"*")),m("input",{type:"text",className:"FormControl",placeholder:"e.g., TRC20",bidi:this.formData.code,disabled:e}))),m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.network_types.description")),m("textarea",{className:"FormControl",rows:3,placeholder:"Optional description of the network",bidi:this.formData.description,disabled:e})),m("div",{className:"Form-row"},m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.network_types.icon_url")),m("input",{type:"url",className:"FormControl",placeholder:"https://example.com/icon.png",bidi:this.formData.iconUrl,disabled:e})),m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.network_types.icon_class")),m("input",{type:"text",className:"FormControl",placeholder:"fab fa-tron",bidi:this.formData.iconClass,disabled:e}))),m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.network_types.sort_order")),m("input",{type:"number",min:"0",className:"FormControl",placeholder:"0",bidi:this.formData.sortOrder,disabled:e})),m("div",{className:"Form-group"},m(A,{state:this.formData.isActive(),onchange:this.formData.isActive,disabled:e},s.translator.trans("withdrawal.admin.network_types.is_active"))),m("div",{className:"Form-actions"},m(u,{className:"Button Button--primary",type:"submit",loading:e,onclick:this.handleSubmit.bind(this,t.attrs)},s.translator.trans("withdrawal.admin.network_types.add_button")),m(u,{className:"Button",onclick:i,disabled:e},s.translator.trans("core.admin.basics.cancel_button")))))}async handleSubmit(t){if(!this.formData.name()||!this.formData.code()){s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.network_types.required_fields_error"));return}const e={name:this.formData.name(),code:this.formData.code().toUpperCase(),description:this.formData.description(),iconUrl:this.formData.iconUrl(),iconClass:this.formData.iconClass(),isActive:this.formData.isActive(),sortOrder:parseInt(this.formData.sortOrder())||0};try{await t.onSubmit(e),Object.keys(this.formData).forEach(i=>{i==="isActive"?this.formData[i](!0):i==="sortOrder"?this.formData[i]("0"):this.formData[i]("")}),t.onCancel()}catch(i){console.error("Form submission error:",i)}}}class J extends w{constructor(){super(...arguments),this.networkTypes=[],this.loading=!1,this.showAddForm=!1}oninit(t){super.oninit(t),this.loadNetworkTypes()}view(){return m("div",{className:"NetworkTypeManagementSection"},m("div",{className:"section-header"},m("h3",null,s.translator.trans("withdrawal.admin.network_types.title")),m(u,{className:"Button Button--primary",icon:"fas fa-plus",onclick:()=>this.toggleAddForm()},s.translator.trans("withdrawal.admin.network_types.add_button"))),this.showAddForm&&m("div",{className:"section-content"},m(G,{submitting:this.loading,onSubmit:this.handleAddNetworkType.bind(this),onCancel:()=>this.toggleAddForm()})),m("div",{className:"section-content"},this.loading&&!this.networkTypes.length?m(P,null):this.networkTypes.length===0?m("div",{className:"empty-state"},m("p",null,s.translator.trans("withdrawal.admin.network_types.empty"))):m("div",{className:"network-types-list"},this.networkTypes.map(t=>m(j,{key:t.id(),networkType:t,onUpdate:this.handleUpdateNetworkType.bind(this),onDelete:this.handleDeleteNetworkType.bind(this)})))))}toggleAddForm(){this.showAddForm=!this.showAddForm,m.redraw()}async loadNetworkTypes(){this.loading=!0,m.redraw();try{const t=await s.request({method:"GET",url:s.forum.attribute("apiUrl")+"/network-types"});s.store.pushPayload(t),this.networkTypes=s.store.all("network-types")}catch(t){console.error("Failed to load network types:",t),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.network_types.load_error"))}finally{this.loading=!1,m.redraw()}}async handleAddNetworkType(t){this.loading=!0,m.redraw();try{const e=await s.request({method:"POST",url:s.forum.attribute("apiUrl")+"/network-types",body:{data:{type:"network-types",attributes:t}}});s.store.pushPayload(e),this.networkTypes=s.store.all("network-types"),this.showAddForm=!1,s.alerts.show({type:"success",dismissible:!0},s.translator.trans("withdrawal.admin.network_types.created"))}catch(e){throw console.error("Failed to create network type:",e),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.network_types.create_error")),e}finally{this.loading=!1,m.redraw()}}async handleUpdateNetworkType(t,e){try{const i=await s.request({method:"PATCH",url:s.forum.attribute("apiUrl")+"/network-types/"+t.id(),body:{data:{type:"network-types",id:t.id(),attributes:e}}});s.store.pushPayload(i),m.redraw(),s.alerts.show({type:"success",dismissible:!0},s.translator.trans("withdrawal.admin.network_types.updated"))}catch(i){console.error("Failed to update network type:",i),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.network_types.update_error"))}}async handleDeleteNetworkType(t){if(confirm(s.translator.trans("withdrawal.admin.network_types.delete_confirm")))try{await s.request({method:"DELETE",url:s.forum.attribute("apiUrl")+"/network-types/"+t.id()}),this.networkTypes=this.networkTypes.filter(e=>e.id()!==t.id()),s.store.remove(t),s.alerts.show({type:"success",dismissible:!0},s.translator.trans("withdrawal.admin.network_types.deleted"))}catch(e){console.error("Failed to delete network type:",e);let i=s.translator.trans("withdrawal.admin.network_types.delete_error");e.responseJSON?.errors?.[0]?.detail&&(i=e.responseJSON.errors[0].detail),s.alerts.show({type:"error",dismissible:!0},i)}finally{m.redraw()}}}class I extends _{className(){return"ConfirmDeleteModal Modal--small"}title(){return s.translator.trans("withdrawal.admin.platforms.delete_confirm_title")}content(){return m("div",{className:"Modal-body"},m("p",null,s.translator.trans("withdrawal.admin.platforms.delete_confirm_message",{name:this.attrs.platformName})),m("div",{className:"Form-group"},m(u,{className:"Button Button--primary",onclick:this.confirm.bind(this)},s.translator.trans("withdrawal.admin.platforms.delete_confirm_button")),m(u,{className:"Button",onclick:this.hide.bind(this)},s.translator.trans("withdrawal.admin.platforms.delete_cancel_button"))))}confirm(){this.attrs.onConfirm(),s.modal.close()}}class V extends _{className(){return"ConfirmDeleteRequestModal Modal--small"}title(){return s.translator.trans("withdrawal.admin.requests.delete_confirm_title")}content(){return m("div",{className:"Modal-body"},m("p",null,s.translator.trans("withdrawal.admin.requests.delete_confirm_message",{info:this.attrs.requestInfo})),m("div",{className:"Form-group"},m(u,{className:"Button Button--danger",onclick:this.confirm.bind(this)},s.translator.trans("withdrawal.admin.requests.delete_confirm_button")),m(u,{className:"Button",onclick:this.hide.bind(this)},s.translator.trans("withdrawal.admin.requests.delete_cancel_button"))))}confirm(){this.attrs.onConfirm(),s.modal.close()}}class z extends q{constructor(){super(...arguments),this.platforms=[],this.requests=[],this.depositPlatforms=[],this.depositTransactions=[],this.users={},this.loading=!0,this.submittingPlatform=!1,this.activeTab="withdrawals"}oninit(t){super.oninit(t),this.loadData()}content(){return this.loading?a(P,null):a("div",{className:"WithdrawalManagementPage"},a("div",{className:"container"},a("h2",null,s.translator.trans("withdrawal.admin.page.title")),a(E,{onSettingChange:this.saveSetting.bind(this)}),a("div",{className:"AdminTabs"},a("div",{className:"AdminTabs-nav"},a("button",{className:`AdminTabs-tab ${this.activeTab==="withdrawals"?"active":""}`,onclick:()=>{this.activeTab="withdrawals"}},s.translator.trans("withdrawal.admin.tabs.withdrawals")),a("button",{className:`AdminTabs-tab ${this.activeTab==="deposits"?"active":""}`,onclick:()=>{this.activeTab="deposits"}},s.translator.trans("withdrawal.admin.tabs.deposits")),a("button",{className:`AdminTabs-tab ${this.activeTab==="network-types"?"active":""}`,onclick:()=>{this.activeTab="network-types"}},s.translator.trans("withdrawal.admin.tabs.network_types"))),a("div",{className:"AdminTabs-content"},this.activeTab==="withdrawals"?a("div",null,a(B,{platforms:this.platforms,submittingPlatform:this.submittingPlatform,onAddPlatform:this.addPlatform.bind(this),onTogglePlatformStatus:this.togglePlatformStatus.bind(this),onDeletePlatform:this.deletePlatform.bind(this)}),a(L,{requests:this.requests,onUpdateRequestStatus:this.updateRequestStatus.bind(this),onDeleteRequest:this.deleteRequest.bind(this)})):this.activeTab==="deposits"?a(H,{platforms:this.depositPlatforms,transactions:this.depositTransactions,submittingPlatform:this.submittingPlatform,onAddPlatform:this.addDepositPlatform.bind(this),onTogglePlatformStatus:this.toggleDepositPlatformStatus.bind(this),onDeletePlatform:this.deleteDepositPlatform.bind(this),onUpdateTransactionStatus:this.updateDepositTransactionStatus.bind(this)}):this.activeTab==="network-types"?a(J,null):null))))}async addPlatform(t){if(!this.submittingPlatform){this.submittingPlatform=!0;try{const e=await s.request({method:"POST",url:s.forum.attribute("apiUrl")+"/withdrawal-platforms",body:{data:{type:"withdrawal-platforms",attributes:{name:t.name,symbol:t.symbol,network:t.network||null,minAmount:parseFloat(t.minAmount),maxAmount:parseFloat(t.maxAmount),fee:parseFloat(t.fee||"0"),iconUrl:t.iconUrl||null,iconClass:t.iconClass||null,isActive:!0}}}});e&&e.data&&s.store.pushPayload(e),await this.loadPlatforms(),s.alerts.show({type:"success",dismissible:!0},s.translator.trans("withdrawal.admin.platforms.add_success"))}catch(e){console.error("Error adding platform:",e),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.platforms.add_error"))}finally{this.submittingPlatform=!1,a.redraw()}}}async togglePlatformStatus(t){try{const e=typeof t.id=="function"?t.id():t.id,i=(typeof t.isActive=="function"?t.isActive():t.attributes?.isActive)??!1,o=s.store.getById("withdrawal-platforms",e);o&&(await o.save({isActive:!i}),await this.loadPlatforms(),a.redraw(),s.alerts.show({type:"success",dismissible:!0},s.translator.trans(`withdrawal.admin.platforms.${i?"disable":"enable"}_success`)))}catch(e){console.error("Error toggling platform status:",e),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.platforms.toggle_error"))}}deletePlatform(t){const e=(typeof t.name=="function"?t.name():t.attributes?.name)||"Unknown Platform";s.modal.show(I,{platformName:e,onConfirm:async()=>{try{const i=typeof t.id=="function"?t.id():t.id,o=s.store.getById("withdrawal-platforms",i);o&&(await o.delete(),await this.loadPlatforms(),a.redraw(),s.alerts.show({type:"success",dismissible:!0},s.translator.trans("withdrawal.admin.platforms.delete_success")))}catch(i){console.error("Error deleting platform:",i),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.platforms.delete_error"))}}})}async updateRequestStatus(t,e){try{const i=typeof t.id=="function"?t.id():t.id,o=s.store.getById("withdrawal-requests",i);o&&(await o.save({status:e}),await this.loadRequests(),s.alerts.show({type:"success",dismissible:!0},s.translator.trans(`withdrawal.admin.requests.${e}_success`)))}catch(i){console.error("Error updating request:",i),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.requests.update_error"))}}deleteRequest(t){const e=typeof t.id=="function"?t.id():t.id,i=typeof t.amount=="function"?t.amount():t.attributes?.amount||0;let o="Unknown User";if(typeof t.user=="function"){const d=t.user();d&&typeof d.displayName=="function"?o=d.displayName():d&&d.attributes?.displayName&&(o=d.attributes.displayName)}s.modal.show(V,{requestInfo:`${o} - ${i}`,onConfirm:async()=>{try{const d=s.store.getById("withdrawal-requests",e);d&&(await d.delete(),await this.loadRequests(),s.alerts.show({type:"success",dismissible:!0},s.translator.trans("withdrawal.admin.requests.delete_success")))}catch(d){console.error("Error deleting request:",d),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.requests.delete_error"))}}})}async loadData(){try{await this.loadPlatforms(),await this.loadRequests(),await this.loadDepositPlatforms(),await this.loadDepositTransactions()}catch(t){console.error("Error loading data:",t)}finally{this.loading=!1,a.redraw()}}async loadPlatforms(){try{const t=await s.store.find("withdrawal-platforms");this.platforms=Array.isArray(t)?t.filter(e=>e!==null):t?[t]:[],console.log("Loaded platforms:",this.platforms)}catch(t){console.error("Error loading platforms:",t),this.platforms=[]}}async loadRequests(){try{const i=await s.store.find("withdrawal-requests",{include:"user,platform"});this.requests=Array.isArray(i)?i.filter(o=>o!==null):i?[i]:[],console.log("Loaded requests:",this.requests)}catch(i){console.error("Error loading requests:",i),this.requests=[]}if(this.requests.length===0)return;const e=[...new Set(this.requests.map(i=>{const o=i?.data?.relationships?.user?.data||i?.relationships?.user?.data;return o?o.id:null}).filter(i=>i!=null))].filter(i=>!this.users[i]);if(e.length>0)try{const i=e.map(d=>s.store.find("users",d).catch(n=>(console.error(`Error loading user ${d}:`,n),null))),o=await Promise.all(i);e.forEach((d,n)=>{o[n]&&(this.users[d]=o[n])})}catch(i){console.error("Error loading users:",i)}}async saveSetting(t,e){try{await s.request({method:"POST",url:s.forum.attribute("apiUrl")+"/settings",body:{[t]:e}}),s.forum.pushAttributes({[t]:e})}catch(i){console.error("Error saving setting:",i),s.alerts.show({type:"error",dismissible:!0},"Failed to save setting")}}async addDepositPlatform(t){if(!this.submittingPlatform){this.submittingPlatform=!0;try{const e=await s.request({method:"POST",url:s.forum.attribute("apiUrl")+"/deposit-platforms",body:{data:{type:"deposit-platforms",attributes:{name:t.name,symbol:t.symbol,network:t.network,minAmount:parseFloat(t.minAmount)||0,maxAmount:t.maxAmount?parseFloat(t.maxAmount):null,address:t.address||null,qrCodeImageUrl:t.qrCodeImageUrl||null,iconUrl:t.iconUrl||null,iconClass:t.iconClass||null,warningText:t.warningText||null,isActive:t.isActive}}}});e&&e.data&&s.store.pushPayload(e),await this.loadDepositPlatforms(),s.alerts.show({type:"success",dismissible:!0},s.translator.trans("withdrawal.admin.deposit.platforms.add_success"))}catch(e){console.error("Error adding deposit platform:",e),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.deposit.platforms.add_error"))}finally{this.submittingPlatform=!1}}}async toggleDepositPlatformStatus(t){try{const e=await s.request({method:"PATCH",url:`${s.forum.attribute("apiUrl")}/deposit-platforms/${t.id}`,body:{data:{type:"deposit-platforms",attributes:{isActive:!t.isActive}}}});e&&e.data&&s.store.pushPayload(e),await this.loadDepositPlatforms();const i=t.isActive?"disable_success":"enable_success";s.alerts.show({type:"success",dismissible:!0},s.translator.trans(`withdrawal.admin.deposit.platforms.${i}`))}catch(e){console.error("Error toggling platform status:",e),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.deposit.platforms.toggle_error"))}}deleteDepositPlatform(t){s.modal.show(I,{platformName:t.name(),onConfirm:async()=>{try{await s.request({method:"DELETE",url:`${s.forum.attribute("apiUrl")}/deposit-platforms/${t.id()}`}),await this.loadDepositPlatforms(),s.alerts.show({type:"success",dismissible:!0},s.translator.trans("withdrawal.admin.deposit.platforms.delete_success"))}catch(e){console.error("Error deleting deposit platform:",e),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.deposit.platforms.delete_error"))}}})}async updateDepositTransactionStatus(t,e){try{const i=await s.request({method:"PATCH",url:`${s.forum.attribute("apiUrl")}/deposit-transactions/${t.id}`,body:{data:{type:"deposit-transactions",attributes:{status:e}}}});i&&i.data&&s.store.pushPayload(i),await this.loadDepositTransactions(),s.alerts.show({type:"success",dismissible:!0},s.translator.trans(`withdrawal.admin.deposit.transactions.${e}_success`))}catch(i){console.error("Error updating deposit transaction:",i),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.deposit.transactions.update_error"))}}async loadDepositPlatforms(){try{const t=await s.request({method:"GET",url:s.forum.attribute("apiUrl")+"/deposit-platforms"});s.store.pushPayload(t),this.depositPlatforms=s.store.all("deposit-platforms"),console.log("Loaded deposit platforms:",this.depositPlatforms)}catch(t){console.error("Error loading deposit platforms:",t),this.depositPlatforms=[]}}async loadDepositTransactions(){try{const t=await s.request({method:"GET",url:s.forum.attribute("apiUrl")+"/deposit-transactions"});s.store.pushPayload(t),this.depositTransactions=s.store.all("deposit-transactions"),console.log("Loaded deposit transactions:",this.depositTransactions)}catch(t){console.error("Error loading deposit transactions:",t),this.depositTransactions=[]}}}class K extends r{constructor(){super(...arguments),this.name=r.attribute("name"),this.symbol=r.attribute("symbol"),this.network=r.attribute("network"),this.displayName=r.attribute("displayName"),this.minAmount=r.attribute("minAmount"),this.maxAmount=r.attribute("maxAmount"),this.fee=r.attribute("fee"),this.iconUrl=r.attribute("iconUrl"),this.iconClass=r.attribute("iconClass"),this.isActive=r.attribute("isActive"),this.createdAt=r.attribute("createdAt",r.transformDate),this.updatedAt=r.attribute("updatedAt",r.transformDate)}apiEndpoint(){return`/withdrawal-platforms/${this.id()}`}getDisplayName(){return this.displayName()||this.name()}isValidAmount(t){const e=this.minAmount(),i=this.maxAmount();return t>=e&&t<=i}getTotalCost(t){return t+this.fee()}}const D={PENDING:"pending",APPROVED:"approved",REJECTED:"rejected"};class Q extends r{constructor(){super(...arguments),this.amount=r.attribute("amount"),this.accountDetails=r.attribute("accountDetails"),this.message=r.attribute("message"),this.status=r.attribute("status"),this.platformId=r.attribute("platformId"),this.userId=r.attribute("userId"),this.createdAt=r.attribute("createdAt",r.transformDate),this.updatedAt=r.attribute("updatedAt",r.transformDate),this.user=r.hasOne("user"),this.platform=r.hasOne("platform")}apiEndpoint(){return`/withdrawal-requests/${this.id()}`}isPending(){return this.status()===D.PENDING}isApproved(){return this.status()===D.APPROVED}isRejected(){return this.status()===D.REJECTED}canBeModified(){return this.isPending()}statusLabel(){const t=this.status();return app.translator.trans(`withdrawal.forum.status.${t}`)}statusColor(){switch(this.status()){case D.APPROVED:return"success";case D.REJECTED:return"danger";case D.PENDING:default:return"warning"}}}class X extends r{constructor(){super(...arguments),this.name=r.attribute("name"),this.symbol=r.attribute("symbol"),this.network=r.attribute("network"),this.networkTypeId=r.attribute("networkTypeId"),this.displayName=r.attribute("displayName"),this.minAmount=r.attribute("minAmount"),this.maxAmount=r.attribute("maxAmount"),this.address=r.attribute("address"),this.qrCodeImageUrl=r.attribute("qrCodeImageUrl"),this.iconUrl=r.attribute("iconUrl"),this.iconClass=r.attribute("iconClass"),this.warningText=r.attribute("warningText"),this.networkConfig=r.attribute("networkConfig"),this.isActive=r.attribute("isActive"),this.createdAt=r.attribute("createdAt",r.transformDate),this.updatedAt=r.attribute("updatedAt",r.transformDate)}}class Y extends r{constructor(){super(...arguments),this.amount=r.attribute("amount"),this.fee=r.attribute("fee"),this.creditedAmount=r.attribute("creditedAmount"),this.transactionHash=r.attribute("transactionHash"),this.fromAddress=r.attribute("fromAddress"),this.memo=r.attribute("memo"),this.userMessage=r.attribute("userMessage"),this.status=r.attribute("status"),this.statusColor=r.attribute("statusColor"),this.blockchainData=r.attribute("blockchainData"),this.confirmations=r.attribute("confirmations"),this.requiredConfirmations=r.attribute("requiredConfirmations"),this.hasEnoughConfirmations=r.attribute("hasEnoughConfirmations"),this.canBeCompleted=r.attribute("canBeCompleted"),this.explorerUrl=r.attribute("explorerUrl"),this.detectedAt=r.attribute("detectedAt",r.transformDate),this.confirmedAt=r.attribute("confirmedAt",r.transformDate),this.completedAt=r.attribute("completedAt",r.transformDate),this.adminNotes=r.attribute("adminNotes"),this.createdAt=r.attribute("createdAt",r.transformDate),this.updatedAt=r.attribute("updatedAt",r.transformDate),this.user=r.hasOne("user"),this.platform=r.hasOne("platform"),this.depositAddress=r.hasOne("depositAddress"),this.processedBy=r.hasOne("processedBy")}}class Z extends r{constructor(){super(...arguments),this.id=r.attribute("id"),this.name=r.attribute("name"),this.code=r.attribute("code"),this.description=r.attribute("description"),this.iconUrl=r.attribute("iconUrl"),this.iconClass=r.attribute("iconClass"),this.config=r.attribute("config"),this.isActive=r.attribute("isActive"),this.sortOrder=r.attribute("sortOrder"),this.createdAt=r.attribute("createdAt",r.transformDate),this.updatedAt=r.attribute("updatedAt",r.transformDate)}}s.initializers.add("wusong8899-withdrawal",()=>{s.store.models["withdrawal-platforms"]=K,s.store.models["withdrawal-requests"]=Q,s.store.models["deposit-platforms"]=X,s.store.models["deposit-transactions"]=Y,s.store.models["network-types"]=Z,s.extensionData.for("wusong8899-withdrawal").registerPage(z)})})(flarum.core.compat["admin/app"],flarum.core.compat["admin/components/ExtensionPage"],flarum.core.compat["common/components/LoadingIndicator"],m,flarum.core.compat["common/Component"],flarum.core.compat["common/utils/withAttr"],flarum.core.compat["common/components/Button"],flarum.core.compat["common/utils/Stream"],flarum.core.compat["common/helpers/humanTime"],flarum.core.compat["common/components/Switch"],flarum.core.compat["common/helpers/icon"],flarum.core.compat["common/helpers/username"],flarum.core.compat["common/components/Modal"],flarum.core.compat["common/Model"]);
//# sourceMappingURL=admin.js.map

module.exports={};