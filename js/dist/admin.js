(function(s,i,B,L,W,f,N,A,v,V,u,F,_,H,n){"use strict";class I extends W{className(){return"ConfirmModal"}title(){const{title:t,dangerous:a=!1,icon:e=a?"fas fa-exclamation-triangle":"fas fa-question-circle"}=this.attrs;return m("span",null,e&&m("span",{className:`ConfirmModal-icon ${a?"dangerous":""}`},N(e)),t)}content(){const{message:t,confirmText:a="Confirm",cancelText:e="Cancel",onConfirm:l,onCancel:o,dangerous:c=!1}=this.attrs;return m("div",{className:"Modal-body"},m("div",{className:"ConfirmModal-message"},t),m("div",{className:"Form-group"},m("div",{className:"ButtonGroup"},m(f,{className:"Button",onclick:()=>{o(),A.modal.close()}},e),m(f,{className:`Button Button--${c?"danger":"primary"}`,onclick:()=>{l(),A.modal.close()}},a))))}}class j extends B{constructor(){super(),this.platforms=[],this.transactions=[],this.loading=!0,this.submittingPlatform=!1;const t=this.getConfig();this.activeTab=t.tabs[0]?.key||""}oninit(t){super.oninit(t),this.loadData()}content(){if(this.loading)return i(L,null);const t=this.getConfig();return i("div",{className:`${t.extensionId}ManagementPage`},i("div",{className:"container"},i("h2",null,t.pageTitle),t.settingsComponent&&i("div",{className:"SettingsSection"},i(t.settingsComponent,{onSettingChange:this.saveSetting.bind(this)})),t.tabs.length>1&&i("div",{className:"AdminTabs"},i("div",{className:"AdminTabs-nav"},t.tabs.map(a=>i("button",{key:a.key,className:`AdminTabs-tab ${this.activeTab===a.key?"active":""}`,onclick:()=>{this.activeTab=a.key}},a.label))),i("div",{className:"AdminTabs-content"},this.renderActiveTabContent())),t.tabs.length===1&&i("div",{className:"SingleTabContent"},this.renderActiveTabContent())))}renderActiveTabContent(){const t=this.getConfig(),a=t.tabs.find(l=>l.key===this.activeTab);if(!a)return null;const e={platforms:this.platforms,transactions:this.transactions,submittingPlatform:this.submittingPlatform,onAddPlatform:this.addPlatform.bind(this),onTogglePlatformStatus:this.togglePlatformStatus.bind(this),onDeletePlatform:this.deletePlatform.bind(this),...t.transactionOperations&&{onUpdateTransactionStatus:this.updateTransactionStatus.bind(this)},...a.props?a.props():{}};return i(a.component,e)}async addPlatform(t){if(this.submittingPlatform)return;this.submittingPlatform=!0;const a=this.getConfig();try{await a.platformOperations.create(t),await this.loadPlatforms()}catch(e){console.error("Error adding platform:",e)}finally{this.submittingPlatform=!1,i.redraw()}}async togglePlatformStatus(t){const a=this.getConfig();try{await a.platformOperations.toggleStatus(t),await this.loadPlatforms(),i.redraw()}catch(e){console.error("Error toggling platform status:",e)}}deletePlatform(t){const a=this.getConfig(),e=(typeof t.name=="function"?t.name():t.name)||"Unknown Platform";s.modal.show(I,{title:s.translator.trans(`${a.translations.platformPrefix}.delete_confirm_title`),message:s.translator.trans(`${a.translations.platformPrefix}.delete_confirm_message`,{name:e}),confirmText:s.translator.trans(`${a.translations.platformPrefix}.delete_confirm_button`),cancelText:s.translator.trans(`${a.translations.platformPrefix}.delete_cancel_button`),dangerous:!0,icon:"fas fa-trash",onConfirm:async()=>{try{await a.platformOperations.delete(t),await this.loadPlatforms(),i.redraw(),s.alerts.show({type:"success",dismissible:!0},s.translator.trans(`${a.translations.platformPrefix}.delete_success`))}catch(l){console.error("Error deleting platform:",l),s.alerts.show({type:"error",dismissible:!0},s.translator.trans(`${a.translations.platformPrefix}.delete_error`))}},onCancel:()=>{s.modal.close()}})}async updateTransactionStatus(t,a){const e=this.getConfig();if(e.transactionOperations)try{await e.transactionOperations.updateStatus(t,a),await this.loadTransactions();const l=e.translations.transactionPrefix||e.translations.platformPrefix;s.alerts.show({type:"success",dismissible:!0},s.translator.trans(`${l}.${a}_success`))}catch(l){console.error("Error updating transaction:",l);const o=e.translations.transactionPrefix||e.translations.platformPrefix;s.alerts.show({type:"error",dismissible:!0},s.translator.trans(`${o}.update_error`))}}async loadData(){try{await this.loadPlatforms(),this.getConfig().transactionOperations&&await this.loadTransactions()}catch(t){console.error("Error loading data:",t)}finally{this.loading=!1,i.redraw()}}async loadPlatforms(){const t=this.getConfig();try{this.platforms=await t.platformOperations.load(),console.log("Loaded platforms:",this.platforms)}catch(a){console.error("Error loading platforms:",a),this.platforms=[]}}async loadTransactions(){const t=this.getConfig();if(t.transactionOperations)try{this.transactions=await t.transactionOperations.load(),console.log("Loaded transactions:",this.transactions)}catch(a){console.error("Error loading transactions:",a),this.transactions=[]}}async saveSetting(t,a){try{await s.request({method:"POST",url:s.forum.attribute("apiUrl")+"/settings",body:{[t]:a}}),s.forum.pushAttributes({[t]:a})}catch(e){console.error("Error saving setting:",e),s.alerts.show({type:"error",dismissible:!0},"Failed to save setting")}}}class G extends v{view(){return m("div",{className:"WithdrawalManagementPage-section"},m("h3",null,"General Settings"),m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.settings.money_icon_url")),m("input",{type:"url",className:"FormControl",placeholder:"https://i.mji.rip/2025/08/28/cd18932c68e9bbee9502b1fb6317cba9.png",value:s.forum.attribute("wusong8899-withdrawal.moneyIconUrl")||"",oninput:V("value",t=>this.attrs.onSettingChange("wusong8899-withdrawal.moneyIconUrl",t))}),m("small",{className:"helpText"},s.translator.trans("withdrawal.admin.settings.money_icon_url_help")))))}}class k{constructor(){this.errors=[]}required(t,a,e){return(!t||typeof t=="string"&&t.trim()==="")&&this.errors.push({field:a,message:`${e||a} is required`}),this}minLength(t,a,e,l){return t&&t.length<a&&this.errors.push({field:e,message:`${l||e} must be at least ${a} characters`}),this}numberRange(t,a,e,l,o){const c=typeof t=="string"?parseFloat(t):t;return isNaN(c)?(this.errors.push({field:l||"number",message:`${o||"Value"} must be a valid number`}),this):(a!==void 0&&c<a&&this.errors.push({field:l||"number",message:`${o||"Value"} must be at least ${a}`}),e!==void 0&&c>e&&this.errors.push({field:l||"number",message:`${o||"Value"} must be at most ${e}`}),this)}url(t,a,e){if(t&&t.trim())try{const l=new URL(t)}catch{this.errors.push({field:a,message:`${e||a} must be a valid URL`})}return this}custom(t,a,e){return t||this.errors.push({field:a,message:e}),this}getResult(){return{isValid:this.errors.length===0,errors:this.errors,firstErrorMessage:this.errors.length>0?this.errors[0].message:void 0}}reset(){return this.errors=[],this}}class J extends v{constructor(){super(...arguments),this.name=u(""),this.symbol=u(""),this.network=u(""),this.minAmount=u(""),this.maxAmount=u(""),this.fee=u(""),this.iconUrl=u(""),this.iconClass=u("")}view(){return i("div",{className:"WithdrawalManagementPage-addPlatform"},i("div",{className:"Form-group"},i("div",{className:"Form-row"},i("div",{className:"Form-col"},i("label",null,s.translator.trans("withdrawal.admin.platforms.name")),i("input",{type:"text",className:"FormControl",placeholder:s.translator.trans("withdrawal.admin.platforms.add_placeholder"),bidi:this.name})),i("div",{className:"Form-col"},i("label",null,s.translator.trans("withdrawal.admin.platforms.symbol")),i("input",{type:"text",className:"FormControl",placeholder:"BTC, ETH, USDT...",bidi:this.symbol})),i("div",{className:"Form-col"},i("label",null,s.translator.trans("withdrawal.admin.platforms.network")),i("input",{type:"text",className:"FormControl",placeholder:"TRC20, ERC20, BSC... (optional)",bidi:this.network}),i("small",{className:"helpText"},s.translator.trans("withdrawal.admin.platforms.network_help")))),i("div",{className:"Form-row"},i("div",{className:"Form-col"},i("label",null,s.translator.trans("withdrawal.admin.platforms.min_amount")),i("input",{type:"number",step:"0.00000001",className:"FormControl",placeholder:"0.001",bidi:this.minAmount})),i("div",{className:"Form-col"},i("label",null,s.translator.trans("withdrawal.admin.platforms.max_amount")),i("input",{type:"number",step:"0.00000001",className:"FormControl",placeholder:"10.0",bidi:this.maxAmount})),i("div",{className:"Form-col"},i("label",null,s.translator.trans("withdrawal.admin.platforms.fee")),i("input",{type:"number",step:"0.00000001",className:"FormControl",placeholder:"0.0005",bidi:this.fee}))),i("div",{className:"Form-row"},i("div",{className:"Form-col"},i("label",null,s.translator.trans("withdrawal.admin.platforms.icon_url")),i("input",{type:"url",className:"FormControl",placeholder:"https://example.com/icon.png",bidi:this.iconUrl}),i("small",{className:"helpText"},s.translator.trans("withdrawal.admin.platforms.icon_url_help"))),i("div",{className:"Form-col"},i("label",null,s.translator.trans("withdrawal.admin.platforms.icon_class")),i("input",{type:"text",className:"FormControl",placeholder:"fas fa-coins",bidi:this.iconClass}),i("small",{className:"helpText"},s.translator.trans("withdrawal.admin.platforms.icon_class_help")))),i("div",{className:"Form-group"},i(f,{className:"Button Button--primary",loading:this.attrs.submitting,disabled:this.attrs.submitting,onclick:this.handleSubmit.bind(this)},s.translator.trans("withdrawal.admin.platforms.add_button")))))}validateForm(){const t=new k;try{t.required(this.name(),"name",s.translator.trans("withdrawal.admin.platforms.name")).required(this.symbol(),"symbol",s.translator.trans("withdrawal.admin.platforms.symbol")).numberRange(this.minAmount(),0,void 0,"minAmount",s.translator.trans("withdrawal.admin.platforms.min_amount")).numberRange(this.maxAmount(),0,void 0,"maxAmount",s.translator.trans("withdrawal.admin.platforms.max_amount")).numberRange(this.fee(),0,void 0,"fee",s.translator.trans("withdrawal.admin.platforms.fee"));const a=parseFloat(this.minAmount());return parseFloat(this.maxAmount())<a&&t.addError("maxAmount",s.translator.trans("withdrawal.admin.platforms.max_min_error")),this.iconUrl()&&this.iconUrl().trim()&&t.url(this.iconUrl(),"iconUrl",s.translator.trans("withdrawal.admin.platforms.icon_url")),t.isValid()}catch(a){return a instanceof Error&&s.alerts.show({type:"error",dismissible:!0},a.message),!1}}async handleSubmit(){if(this.attrs.submitting||!this.validateForm())return;const t={name:this.name(),symbol:this.symbol(),network:this.network(),minAmount:this.minAmount(),maxAmount:this.maxAmount(),fee:this.fee(),iconUrl:this.iconUrl(),iconClass:this.iconClass()};try{await this.attrs.onSubmit(t),this.clearForm()}catch{}}clearForm(){this.name(""),this.symbol(""),this.network(""),this.minAmount(""),this.maxAmount(""),this.fee(""),this.iconUrl(""),this.iconClass(""),i.redraw()}}class U extends v{view(t){const{platform:a,type:e,onToggleStatus:l,onDelete:o,style:c="card"}=t.attrs;return c==="card"?this.renderCardStyle(a,e,l,o):this.renderListStyle(a,e,l,o)}renderCardStyle(t,a,e,l){const o=this.extractPlatformData(t),c=a==="withdrawal"?"withdrawal.admin.platforms":"withdrawal.admin.deposit.platforms";return i("div",{key:o.id,className:`${a}Platform`},i("div",{className:`${a}Platform-info`},i("div",{className:`${a}Platform-primary`},i("span",{className:`${a}Platform-status ${o.isActive?"active":"inactive"}`},o.isActive?"ðŸŸ¢":"ðŸ”´"),i("span",{className:`${a}Platform-name`},o.displayName),i("span",{className:"platform-id"},"#",o.id),o.network&&i("span",{className:`${a}Platform-network`},"(",o.network,")")),i("div",{className:`${a}Platform-details`},i("span",{className:`${a}Platform-amounts`},"Min: ",o.minAmount," | Max: ",o.maxAmount,` | Fee: ${o.fee}`,a==="deposit"&&` | Address: ${o.address?"Static":"Template"}`),o.createdDate&&i("span",{className:`${a}Platform-date`},o.dateDisplay))),i("div",{className:`${a}Platform-actions`},i(f,{className:`Button ${o.isActive?"Button--secondary":"Button--primary"}`,onclick:()=>e(t)},s.translator.trans(`${c}.${o.isActive?"disable":"enable"}`)),i(f,{className:"Button Button--danger",onclick:()=>l(t)},s.translator.trans(`${c}.delete`))))}renderListStyle(t,a,e,l){const o=this.extractPlatformData(t),c=a==="withdrawal"?"withdrawal.admin.platforms":"withdrawal.admin.deposit.platforms";return i("div",{className:`${a}PlatformListItem`},i("div",{className:`${a}PlatformListItem-content`},i("div",{className:`${a}PlatformListItem-icon`},this.renderPlatformIcon(t)),i("div",{className:`${a}PlatformListItem-info`},i("div",{className:`${a}PlatformListItem-primary`},i("strong",null,o.name),i("span",{className:`${a}PlatformListItem-displayName`},o.symbol,o.network&&` (${o.network})`)),i("div",{className:`${a}PlatformListItem-details`},i("span",{className:`${a}PlatformListItem-detail`},"Min: ",o.minAmount," ",o.symbol),o.maxAmount&&i("span",{className:`${a}PlatformListItem-detail`},"Max: ",o.maxAmount," ",o.symbol),o.fee&&i("span",{className:`${a}PlatformListItem-detail`},"Fee: ",o.fee," ",o.symbol),a==="deposit"&&i("span",{className:`${a}PlatformListItem-detail`},"Address: ",o.address?"Static":"Template"))),i("div",{className:`${a}PlatformListItem-actions`},i(F,{state:o.isActive,onchange:async()=>{await e(t),i.redraw()}},o.isActive?s.translator.trans(`${c}.active`):s.translator.trans(`${c}.inactive`)),i(f,{className:"Button Button--icon Button--flat",icon:"fas fa-trash",onclick:async()=>{await l(t),i.redraw()},title:s.translator.trans(`${c}.delete`)}))))}extractPlatformData(t){const a=typeof t.id=="function"?t.id():t.id,e=(typeof t.name=="function"?t.name():t.attributes?.name)||"Unknown Platform",l=(typeof t.symbol=="function"?t.symbol():t.attributes?.symbol)||"",o=(typeof t.network=="function"?t.network():t.attributes?.network)||null,c=(typeof t.displayName=="function"?t.displayName():t.attributes?.displayName)||e,y=(typeof t.minAmount=="function"?t.minAmount():t.attributes?.minAmount)||"N/A",p=(typeof t.maxAmount=="function"?t.maxAmount():t.attributes?.maxAmount)||"N/A",w=(typeof t.fee=="function"?t.fee():t.attributes?.fee)||"N/A",g=(typeof t.address=="function"?t.address():t.attributes?.address)||null,d=(typeof t.isActive=="function"?t.isActive():t.attributes?.isActive)??!1,b=(typeof t.createdAt=="function"?t.createdAt():t.attributes?.createdAt)||null;let P="N/A";if(b)try{P=_(b)}catch(h){console.error("Error formatting date:",h),P="Invalid Date"}return{id:a,name:e,symbol:l,network:o,displayName:c,minAmount:y,maxAmount:p,fee:w,address:g,isActive:d,createdDate:b,dateDisplay:P}}renderPlatformIcon(t){const a=typeof t.iconUrl=="function"?t.iconUrl():t.attributes?.iconUrl,e=typeof t.iconClass=="function"?t.iconClass():t.attributes?.iconClass,l=typeof t.symbol=="function"?t.symbol():t.attributes?.symbol;if(a)return i("img",{src:a,alt:l,className:"PlatformListItem-img"});if(e)return N(e);switch(l){case"USDT":return i("span",{className:"PlatformListItem-currencyIcon usdt"},"â‚®");case"USDC":return i("span",{className:"PlatformListItem-currencyIcon usdc"},"$");case"BTC":return i("span",{className:"PlatformListItem-currencyIcon btc"},"â‚¿");case"ETH":return i("span",{className:"PlatformListItem-currencyIcon eth"},"Îž");default:return N("fas fa-coins")}}}class z extends v{view(){const{platforms:t,submittingPlatform:a,onAddPlatform:e,onTogglePlatformStatus:l,onDeletePlatform:o}=this.attrs;return m("div",{className:"WithdrawalManagementPage-section"},m("h3",null,s.translator.trans("withdrawal.admin.platforms.title")),m(J,{onSubmit:e,submitting:a}),m("div",{className:"WithdrawalManagementPage-platformList"},t.length===0?m("p",null,s.translator.trans("withdrawal.admin.platforms.empty")):t.map(c=>m(U,{key:typeof c.id=="function"?c.id():c.id,platform:c,type:"withdrawal",style:"card",onToggleStatus:l,onDelete:o}))))}}class S extends v{view(){const t=this.attrs.request,{showActions:a,showDelete:e=!1}=this.attrs,l=typeof t.id=="function"?t.id():t.id,o=typeof t.amount=="function"?t.amount():t.attributes?.amount||0,c=typeof t.status=="function"?t.status():t.attributes?.status||"pending",y=typeof t.accountDetails=="function"?t.accountDetails():t.attributes?.accountDetails||t.attributes?.account_details||"N/A",p=typeof t.createdAt=="function"?t.createdAt():t.attributes?.createdAt||null;let w="Unknown User";if(typeof t.user=="function"){const h=t.user();h&&typeof h.displayName=="function"?w=h.displayName():h&&h.attributes?.displayName&&(w=h.attributes.displayName)}let g="Unknown Platform",d="N/A";if(typeof t.platform=="function"){const h=t.platform();h&&(g=typeof h.name=="function"?h.name():h.attributes?.name||"Unknown Platform",d=typeof h.symbol=="function"?h.symbol():h.attributes?.symbol||"N/A")}const b=`status-${c}`;let P="N/A";if(p)try{P=_(p)}catch(h){console.error("Error formatting request date:",h),P="Invalid Date"}return m("div",{key:l,className:`WithdrawalRequest ${b}`},m("div",{className:"WithdrawalRequest-info"},m("div",{className:"WithdrawalRequest-user"},m("strong",null,w),m("span",{className:"request-id"},"#",l)),m("div",{className:"WithdrawalRequest-details"},m("span",{className:"amount"},o),m("span",{className:"platform"},g),m("span",{className:"symbol"},d),m("span",{className:"date"},P)),m("div",{className:"WithdrawalRequest-account"},m("strong",null,s.translator.trans("withdrawal.admin.requests.account_details"),":"),m("span",null,y)),m("div",{className:"WithdrawalRequest-status"},m("span",{className:`Badge Badge--${c}`},s.translator.trans(`withdrawal.admin.requests.status.${c}`)))),(a||e)&&m("div",{className:"WithdrawalRequest-actions"},a&&this.attrs.onUpdateStatus&&m("[",null,m(f,{className:"Button Button--primary",onclick:()=>this.attrs.onUpdateStatus(t,"approved")},s.translator.trans("withdrawal.admin.requests.approve")),m(f,{className:"Button Button--danger",onclick:()=>this.attrs.onUpdateStatus(t,"rejected")},s.translator.trans("withdrawal.admin.requests.reject"))),this.attrs.onDelete&&m(f,{className:"Button Button--link",onclick:()=>this.attrs.onDelete(t)},m("i",{className:"fas fa-trash"}),s.translator.trans("withdrawal.admin.requests.delete"))))}}class Y extends v{view(){const{requests:t,onUpdateRequestStatus:a,onDeleteRequest:e}=this.attrs,l=t.filter(c=>((typeof c.status=="function"?c.status():c.attributes?.status)||"pending")==="pending"),o=t.filter(c=>((typeof c.status=="function"?c.status():c.attributes?.status)||"pending")!=="pending");return m("div",{className:"WithdrawalManagementPage-section"},m("h3",null,s.translator.trans("withdrawal.admin.requests.title")),m("div",{className:"WithdrawalManagementPage-pendingRequests"},m("h4",null,s.translator.trans("withdrawal.admin.requests.pending_title")),l.length===0?m("p",null,s.translator.trans("withdrawal.admin.requests.no_pending")):l.map(c=>m(S,{key:typeof c.id=="function"?c.id():c.id,request:c,showActions:!0,showDelete:!0,onUpdateStatus:a,onDelete:e}))),m("div",{className:"WithdrawalManagementPage-processedRequests"},m("h4",null,s.translator.trans("withdrawal.admin.requests.processed_title")),o.length===0?m("p",null,s.translator.trans("withdrawal.admin.requests.no_processed")):o.map(c=>m(S,{key:typeof c.id=="function"?c.id():c.id,request:c,showActions:!1,showDelete:!0,onDelete:e}))))}}class K extends v{constructor(){super(...arguments),this.formData={name:u(""),symbol:u(""),network:u(""),minAmount:u(""),maxAmount:u(""),fee:u(""),address:u(""),qrCodeImageUrl:u(""),iconUrl:u(""),iconClass:u(""),warningText:u(""),isActive:u(!0)}}oninit(t){super.oninit(t)}view(t){const{submitting:a,onCancel:e}=t.attrs;return m("div",{className:"AddDepositPlatformForm"},m("div",{className:"Form"},m("div",{className:"Form-row"},m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.name"),m("span",{className:"Form-required"},"*")),m("input",{type:"text",className:"FormControl",placeholder:"e.g., Tether",bidi:this.formData.name,disabled:a})),m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.symbol"),m("span",{className:"Form-required"},"*")),m("input",{type:"text",className:"FormControl",placeholder:"e.g., USDT",bidi:this.formData.symbol,disabled:a}))),m("div",{className:"Form-row"},m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.network")),m("input",{type:"text",className:"FormControl",placeholder:"e.g., TRC20, ERC20, BSC (optional)",bidi:this.formData.network,disabled:a}),m("div",{className:"helpText"},"Optional. Specify the blockchain network for this platform."))),m("div",{className:"Form-row"},m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.min_amount")),m("input",{type:"number",step:"0.00000001",min:"0",className:"FormControl",placeholder:"0.0",bidi:this.formData.minAmount,disabled:a})),m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.max_amount")),m("input",{type:"number",step:"0.00000001",min:"0",className:"FormControl",placeholder:"Leave empty for unlimited",bidi:this.formData.maxAmount,disabled:a})),m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.fee")),m("input",{type:"number",step:"0.00000001",min:"0",className:"FormControl",placeholder:"0.0",bidi:this.formData.fee,disabled:a}),m("div",{className:"helpText"},s.translator.trans("withdrawal.admin.deposit.platforms.fee_help")))),m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.address"),m("span",{className:"Form-required"},"*")),m("input",{type:"text",className:"FormControl",placeholder:"Enter deposit address for this platform",bidi:this.formData.address,disabled:a}),m("div",{className:"helpText"},s.translator.trans("withdrawal.admin.deposit.platforms.address_help"))),m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.qr_code_image_url")),m("input",{type:"url",className:"FormControl",placeholder:"https://example.com/qr-code.png",bidi:this.formData.qrCodeImageUrl,disabled:a}),m("div",{className:"helpText"},s.translator.trans("withdrawal.admin.deposit.platforms.qr_code_image_help"))),m("div",{className:"Form-row"},m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.icon_url")),m("input",{type:"url",className:"FormControl",placeholder:"https://example.com/icon.png",bidi:this.formData.iconUrl,disabled:a})),m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.icon_class")),m("input",{type:"text",className:"FormControl",placeholder:"fas fa-coins",bidi:this.formData.iconClass,disabled:a}))),m("div",{className:"Form-group"},m("label",null,s.translator.trans("withdrawal.admin.deposit.platforms.warning_text")),m("textarea",{className:"FormControl",rows:3,placeholder:"Network-specific warning for users",bidi:this.formData.warningText,disabled:a})),m("div",{className:"Form-group"},m(F,{state:this.formData.isActive(),onchange:this.formData.isActive,disabled:a},s.translator.trans("withdrawal.admin.deposit.platforms.is_active"))),m("div",{className:"Form-actions"},m(f,{className:"Button Button--primary",type:"submit",loading:a,onclick:this.handleSubmit.bind(this,t.attrs)},s.translator.trans("withdrawal.admin.deposit.platforms.add_button")),m(f,{className:"Button",onclick:e,disabled:a},s.translator.trans("core.admin.basics.cancel_button")))))}validateForm(){const t=new k;try{if(t.required(this.formData.name(),"name",s.translator.trans("withdrawal.admin.deposit.platforms.name")).required(this.formData.symbol(),"symbol",s.translator.trans("withdrawal.admin.deposit.platforms.symbol")).required(this.formData.address(),"address",s.translator.trans("withdrawal.admin.deposit.platforms.address")),this.formData.minAmount()&&this.formData.minAmount().trim()&&t.numberRange(this.formData.minAmount(),0,void 0,"minAmount",s.translator.trans("withdrawal.admin.deposit.platforms.min_amount")),this.formData.maxAmount()&&this.formData.maxAmount().trim()&&t.numberRange(this.formData.maxAmount(),0,void 0,"maxAmount",s.translator.trans("withdrawal.admin.deposit.platforms.max_amount")),this.formData.fee()&&this.formData.fee().trim()&&t.numberRange(this.formData.fee(),0,void 0,"fee",s.translator.trans("withdrawal.admin.deposit.platforms.fee")),this.formData.minAmount()&&this.formData.maxAmount()){const e=parseFloat(this.formData.minAmount()),l=parseFloat(this.formData.maxAmount());!isNaN(e)&&!isNaN(l)&&l<e&&t.custom(!1,"maxAmount",s.translator.trans("withdrawal.admin.platforms.max_min_error"))}this.formData.iconUrl()&&this.formData.iconUrl().trim()&&t.url(this.formData.iconUrl(),"iconUrl",s.translator.trans("withdrawal.admin.deposit.platforms.icon_url")),this.formData.qrCodeImageUrl()&&this.formData.qrCodeImageUrl().trim()&&t.url(this.formData.qrCodeImageUrl(),"qrCodeImageUrl",s.translator.trans("withdrawal.admin.deposit.platforms.qr_code_image_url"));const a=t.getResult();return!a.isValid&&a.firstErrorMessage&&s.alerts.show({type:"error",dismissible:!0},a.firstErrorMessage),a.isValid}catch(a){return a instanceof Error&&s.alerts.show({type:"error",dismissible:!0},a.message),!1}}async handleSubmit(t){if(t.submitting||!this.validateForm())return;const a={name:this.formData.name(),symbol:this.formData.symbol(),network:this.formData.network(),minAmount:this.formData.minAmount(),maxAmount:this.formData.maxAmount(),fee:this.formData.fee(),address:this.formData.address(),qrCodeImageUrl:this.formData.qrCodeImageUrl(),iconUrl:this.formData.iconUrl(),iconClass:this.formData.iconClass(),warningText:this.formData.warningText(),isActive:this.formData.isActive()};try{await t.onSubmit(a),Object.keys(this.formData).forEach(e=>{e==="isActive"?this.formData[e](!0):this.formData[e]("")}),t.onCancel()}catch(e){console.error("Form submission error:",e)}}}class q extends v{view(t){const{transaction:a,showActions:e,onUpdateStatus:l}=t.attrs;return m("div",{className:"DepositTransactionItem"},m("div",{className:"DepositTransactionItem-header"},m("div",{className:"DepositTransactionItem-user"},m("strong",null,H(a.user)),m("span",{className:"DepositTransactionItem-time"},_(a.createdAt))),m("div",{className:"DepositTransactionItem-amount"},m("span",{className:"DepositTransactionItem-amountValue"},a.amount," ",a.platform.symbol),m("div",{className:`DepositTransactionItem-status status-${a.statusColor}`},this.getStatusIcon(a.status),this.getStatusText(a.status)))),m("div",{className:"DepositTransactionItem-details"},m("div",{className:"DepositTransactionItem-platform"},m("span",{className:"DepositTransactionItem-label"},"Platform:"),m("span",null,a.platform.name," (",a.platform.network,")")),a.transactionHash&&m("div",{className:"DepositTransactionItem-hash"},m("span",{className:"DepositTransactionItem-label"},"Hash:"),a.explorerUrl?m("a",{href:a.explorerUrl,target:"_blank",rel:"noopener noreferrer",className:"DepositTransactionItem-hashLink"},this.formatHash(a.transactionHash),N("fas fa-external-link-alt")):m("span",{className:"DepositTransactionItem-hashText"},this.formatHash(a.transactionHash))),a.fromAddress&&m("div",{className:"DepositTransactionItem-fromAddress"},m("span",{className:"DepositTransactionItem-label"},"From:"),m("span",{className:"DepositTransactionItem-address"},this.formatHash(a.fromAddress))),a.confirmations!==void 0&&m("div",{className:"DepositTransactionItem-confirmations"},m("span",{className:"DepositTransactionItem-label"},"Confirmations:"),m("span",null,a.confirmations,"/",a.requiredConfirmations,a.hasEnoughConfirmations&&m("span",{className:"DepositTransactionItem-confirmed"}," âœ“"))),a.adminNotes&&m("div",{className:"DepositTransactionItem-notes"},m("span",{className:"DepositTransactionItem-label"},"Notes:"),m("span",null,a.adminNotes))),e&&this.renderActions(a,l))}renderActions(t,a){const e=[];return t.status==="pending"&&e.push(m(f,{key:"confirm",className:"Button Button--primary Button--sm",onclick:()=>a("confirmed")},s.translator.trans("withdrawal.admin.deposit.transactions.confirm"))),t.status==="confirmed"&&t.canBeCompleted&&e.push(m(f,{key:"complete",className:"Button Button--success Button--sm",onclick:()=>a("completed")},s.translator.trans("withdrawal.admin.deposit.transactions.complete"))),(t.status==="pending"||t.status==="confirmed")&&e.push(m(f,{key:"reject",className:"Button Button--danger Button--sm",onclick:()=>a("failed")},s.translator.trans("withdrawal.admin.deposit.transactions.reject"))),e.length>0?m("div",{className:"DepositTransactionItem-actions"},e):null}getStatusIcon(t){switch(t){case"pending":return N("fas fa-clock");case"confirmed":return N("fas fa-check-circle");case"completed":return N("fas fa-check-double");case"failed":return N("fas fa-times-circle");case"cancelled":return N("fas fa-ban");default:return N("fas fa-question-circle")}}getStatusText(t){switch(t){case"pending":return s.translator.trans("withdrawal.admin.deposit.transactions.status.pending");case"confirmed":return s.translator.trans("withdrawal.admin.deposit.transactions.status.confirmed");case"completed":return s.translator.trans("withdrawal.admin.deposit.transactions.status.completed");case"failed":return s.translator.trans("withdrawal.admin.deposit.transactions.status.failed");case"cancelled":return s.translator.trans("withdrawal.admin.deposit.transactions.status.cancelled");default:return t}}formatHash(t){return t.length<=16?t:`${t.substring(0,8)}...${t.substring(t.length-8)}`}}class Q extends v{constructor(){super(...arguments),this.showPlatformForm=!1,this.activeTransactionTab="pending"}view(t){const{platforms:a,transactions:e,submittingPlatform:l,onAddPlatform:o,onTogglePlatformStatus:c,onDeletePlatform:y,onUpdateTransactionStatus:p}=t.attrs,w=e.filter(d=>d.status==="pending"||d.status==="confirmed"),g=e.filter(d=>d.status==="completed"||d.status==="failed"||d.status==="cancelled");return m("div",{className:"DepositManagementSection"},m("div",{className:"Form-group"},m("h3",null,s.translator.trans("withdrawal.admin.deposit.platforms.title")),m("div",{className:"DepositPlatforms"},m("div",{className:"DepositPlatforms-header"},m(f,{className:"Button Button--primary",onclick:()=>{this.showPlatformForm=!this.showPlatformForm}},s.translator.trans("withdrawal.admin.deposit.platforms.add_button"))),this.showPlatformForm&&m(K,{submitting:l,onSubmit:o,onCancel:()=>{this.showPlatformForm=!1}}),m("div",{className:"DepositPlatforms-list"},a.length===0?m("p",{className:"DepositPlatforms-empty"},s.translator.trans("withdrawal.admin.deposit.platforms.empty")):a.map(d=>m(U,{key:d.id,platform:d,type:"deposit",style:"list",onToggleStatus:()=>c(d),onDelete:()=>y(d)}))))),m("div",{className:"Form-group"},m("h3",null,s.translator.trans("withdrawal.admin.deposit.transactions.title")),m("div",{className:"DepositTransactions"},m("div",{className:"DepositTransactions-tabs"},m("button",{className:`DepositTransactions-tab ${this.activeTransactionTab==="pending"?"active":""}`,onclick:()=>{this.activeTransactionTab="pending"}},s.translator.trans("withdrawal.admin.deposit.transactions.pending_title")," (",w.length,")"),m("button",{className:`DepositTransactions-tab ${this.activeTransactionTab==="completed"?"active":""}`,onclick:()=>{this.activeTransactionTab="completed"}},s.translator.trans("withdrawal.admin.deposit.transactions.completed_title")," (",g.length,")")),m("div",{className:"DepositTransactions-content"},this.activeTransactionTab==="pending"?m("div",{className:"DepositTransactions-pending"},w.length===0?m("p",{className:"DepositTransactions-empty"},s.translator.trans("withdrawal.admin.deposit.transactions.no_pending")):w.map(d=>m(q,{key:d.id,transaction:d,onUpdateStatus:b=>p(d,b),showActions:!0}))):m("div",{className:"DepositTransactions-completed"},g.length===0?m("p",{className:"DepositTransactions-empty"},s.translator.trans("withdrawal.admin.deposit.transactions.no_completed")):g.map(d=>m(q,{key:d.id,transaction:d,onUpdateStatus:b=>p(d,b),showActions:!1})))))))}}const X=3e4,Z={"Content-Type":"application/vnd.api+json",Accept:"application/vnd.api+json"};function M(r){const{method:t,endpoint:a,body:e,params:l,headers:o,timeout:c}=r,y=a.startsWith("http")?a:`${A.forum.attribute("apiUrl")}${a}`,p={method:t,url:y,headers:{...Z,...o},timeout:c||X};if(e&&(t==="POST"||t==="PATCH"||t==="PUT")&&(p.body=e),l&&t==="GET"){const w=new URLSearchParams;Object.entries(l).forEach(([g,d])=>{d!=null&&w.append(g,String(d))}),p.url+=`?${w.toString()}`}return p}function $(r){if(r.name==="TypeError"||r.message==="Failed to fetch")return{message:A.translator.trans("core.lib.error.network_error"),status:0};if(r&&r.response)try{const t=typeof r.response=="string"?JSON.parse(r.response):r.response;if(t.errors&&Array.isArray(t.errors))return{message:t.errors[0].detail||"API error occurred",errors:t.errors,status:r.status}}catch{if(r.response.includes("<b>Fatal error</b>")||r.response.includes("<!DOCTYPE"))return{message:A.translator.trans("core.lib.error.generic_error"),status:r.status||500}}return r instanceof Error?{message:r.message,status:r.status}:{message:A.translator.trans("core.lib.error.generic_error"),status:500}}async function T(r,t={}){const{showSuccessAlert:a=!1,showErrorAlert:e=!0,successMessage:l,errorMessage:o,validateResponse:c,transformResponse:y,onSuccess:p,onError:w}=t;try{const g=M(r),d=await A.request(g);if(c&&!c(d))throw new Error("Response validation failed");const b=y?y(d):d;return a&&l&&A.alerts.show({type:"success",dismissible:!0},l),p&&p(b),b}catch(g){const d=$(g);if(w&&w(d),e){const b=o||d.message||"An error occurred";A.alerts.show({type:"error",dismissible:!0},b)}throw d}}async function x(r,t,a={}){return T({method:"GET",endpoint:r,params:t},a)}async function E(r,t,a={}){return T({method:"POST",endpoint:r,body:t},a)}async function R(r,t,a={}){return T({method:"PATCH",endpoint:r,body:t},a)}async function tt(r,t={}){return T({method:"DELETE",endpoint:r},t)}const at=()=>({async create(r){const t={type:"withdrawal-platforms",attributes:{name:r.name,symbol:r.symbol,network:r.network||null,minAmount:parseFloat(r.minAmount),maxAmount:parseFloat(r.maxAmount),fee:parseFloat(r.fee||"0"),iconUrl:r.iconUrl||null,iconClass:r.iconClass||null,isActive:!0}};return E("/withdrawal-platforms",{data:t},{showSuccessAlert:!0,successMessage:s.translator.trans("withdrawal.admin.platforms.add_success"),errorMessage:s.translator.trans("withdrawal.admin.platforms.add_error"),onSuccess:a=>{s.store.pushPayload(a)}})},async toggleStatus(r){const t=typeof r.id=="function"?r.id():r.id,a=(typeof r.isActive=="function"?r.isActive():r.attributes?.isActive)??!1,e=s.store.getById("withdrawal-platforms",t);e&&(await e.save({isActive:!a}),s.alerts.show({type:"success",dismissible:!0},s.translator.trans(`withdrawal.admin.platforms.${a?"disable":"enable"}_success`)))},async delete(r){const t=typeof r.id=="function"?r.id():r.id,a=s.store.getById("withdrawal-platforms",t);a&&await a.delete()},async load(){return x("/withdrawal-platforms",void 0,{errorMessage:s.translator.trans("withdrawal.admin.platforms.load_error"),transformResponse:r=>(s.store.pushPayload(r),s.store.all("withdrawal-platforms"))})}}),C=()=>({async create(r){const t={type:"deposit-platforms",attributes:{name:r.name,symbol:r.symbol,network:r.network,minAmount:parseFloat(r.minAmount)||0,maxAmount:r.maxAmount?parseFloat(r.maxAmount):null,address:r.address||null,qrCodeImageUrl:r.qrCodeImageUrl||null,iconUrl:r.iconUrl||null,iconClass:r.iconClass||null,warningText:r.warningText||null,isActive:r.isActive}};return E("/deposit-platforms",{data:t},{showSuccessAlert:!0,successMessage:s.translator.trans("withdrawal.admin.deposit.platforms.add_success"),errorMessage:s.translator.trans("withdrawal.admin.deposit.platforms.add_error"),onSuccess:a=>{s.store.pushPayload(a)}})},async toggleStatus(r){const t=typeof r.id=="function"?r.id():r.id,a=(typeof r.isActive=="function"?r.isActive():r.attributes?.isActive)??!1;return R(`/deposit-platforms/${t}`,{data:{type:"deposit-platforms",attributes:{isActive:!a}}},{showSuccessAlert:!0,successMessage:s.translator.trans(`withdrawal.admin.deposit.platforms.${a?"disable":"enable"}_success`),errorMessage:s.translator.trans("withdrawal.admin.deposit.platforms.toggle_error"),onSuccess:e=>{s.store.pushPayload(e)}})},async delete(r){const t=typeof r.id=="function"?r.id():r.id;return tt(`/deposit-platforms/${t}`,{errorMessage:s.translator.trans("withdrawal.admin.deposit.platforms.delete_error")})},async load(){return x("/deposit-platforms",void 0,{errorMessage:s.translator.trans("withdrawal.admin.deposit.platforms.load_error"),transformResponse:r=>(s.store.pushPayload(r),s.store.all("deposit-platforms"))})}}),st=()=>({async updateStatus(r,t){const a=typeof r.id=="function"?r.id():r.id,e=s.store.getById("withdrawal-requests",a);e&&(await e.save({status:t}),s.alerts.show({type:"success",dismissible:!0},s.translator.trans(`withdrawal.admin.requests.${t}_success`)))},async load(){return x("/withdrawal-requests",{include:"user,platform"},{errorMessage:s.translator.trans("withdrawal.admin.requests.load_error"),transformResponse:r=>(s.store.pushPayload(r),Array.isArray(r.data)?r.data.filter(t=>t!==null):r.data?[r.data]:[])})}}),O=()=>({async updateStatus(r,t){const a=typeof r.id=="function"?r.id():r.id;return R(`/deposit-transactions/${a}`,{data:{type:"deposit-transactions",attributes:{status:t}}},{showSuccessAlert:!0,successMessage:s.translator.trans(`withdrawal.admin.deposit.transactions.${t}_success`),errorMessage:s.translator.trans("withdrawal.admin.deposit.transactions.update_error"),onSuccess:e=>{s.store.pushPayload(e)}})},async load(){return x("/deposit-transactions",void 0,{errorMessage:s.translator.trans("withdrawal.admin.deposit.transactions.load_error"),transformResponse:r=>(s.store.pushPayload(r),s.store.all("deposit-transactions"))})}});class et extends j{constructor(){super(...arguments),this.depositPlatforms=[],this.depositTransactions=[],this.users={}}getConfig(){return{pageTitle:s.translator.trans("withdrawal.admin.page.title"),extensionId:"WithdrawalManagement",platformOperations:at(),transactionOperations:st(),settingsComponent:G,tabs:[{key:"withdrawals",label:s.translator.trans("withdrawal.admin.tabs.withdrawals"),component:"div"},{key:"deposits",label:s.translator.trans("withdrawal.admin.tabs.deposits"),component:Q,props:()=>({platforms:this.depositPlatforms,transactions:this.depositTransactions,submittingPlatform:this.submittingPlatform,onAddPlatform:this.addDepositPlatform.bind(this),onTogglePlatformStatus:this.toggleDepositPlatformStatus.bind(this),onDeletePlatform:this.deleteDepositPlatform.bind(this),onUpdateTransactionStatus:this.updateDepositTransactionStatus.bind(this)})}],translations:{platformPrefix:"withdrawal.admin.platforms",transactionPrefix:"withdrawal.admin.requests"}}}renderActiveTabContent(){return this.activeTab==="withdrawals"?i("div",null,i(z,{platforms:this.platforms,submittingPlatform:this.submittingPlatform,onAddPlatform:this.addPlatform.bind(this),onTogglePlatformStatus:this.togglePlatformStatus.bind(this),onDeletePlatform:this.deletePlatform.bind(this)}),i(Y,{requests:this.transactions,onUpdateRequestStatus:this.updateTransactionStatus.bind(this),onDeleteRequest:this.deleteRequest.bind(this)})):super.renderActiveTabContent()}async loadData(){try{await this.loadPlatforms(),await this.loadTransactions(),await this.loadUserData(),await this.loadDepositPlatforms(),await this.loadDepositTransactions()}catch(t){console.error("Error loading data:",t)}finally{this.loading=!1,i.redraw()}}async addDepositPlatform(t){const a=C();if(!this.submittingPlatform){this.submittingPlatform=!0,i.redraw();try{await a.create(t),await this.loadDepositPlatforms()}catch(e){console.error("Error adding deposit platform:",e),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.deposit.platforms.add_error"))}finally{this.submittingPlatform=!1,i.redraw()}}}async toggleDepositPlatformStatus(t){const a=C();try{await a.toggleStatus(t),await this.loadDepositPlatforms(),i.redraw()}catch(e){console.error("Error toggling deposit platform status:",e)}}async deleteDepositPlatform(t){const a=C(),e=(typeof t.name=="function"?t.name():t.name)||"Unknown Platform";s.modal.show(I,{title:s.translator.trans("withdrawal.admin.platforms.delete_confirm_title"),message:s.translator.trans("withdrawal.admin.platforms.delete_confirm_message",{name:e}),confirmText:s.translator.trans("withdrawal.admin.platforms.delete_confirm_button"),cancelText:s.translator.trans("withdrawal.admin.platforms.delete_cancel_button"),dangerous:!0,icon:"fas fa-trash",onConfirm:async()=>{try{await a.delete(t),await this.loadDepositPlatforms(),s.alerts.show({type:"success",dismissible:!0},s.translator.trans("withdrawal.admin.deposit.platforms.delete_success"))}catch(l){console.error("Error deleting deposit platform:",l),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.deposit.platforms.delete_error"))}i.redraw()},onCancel:()=>{s.modal.close()}})}async updateDepositTransactionStatus(t,a){const e=O();try{await e.updateStatus(t,a),await this.loadDepositTransactions(),i.redraw()}catch(l){console.error("Error updating deposit transaction:",l)}}deleteRequest(t){const a=typeof t.id=="function"?t.id():t.id,e=typeof t.amount=="function"?t.amount():t.attributes?.amount||0;let l="Unknown User";if(typeof t.user=="function"){const o=t.user();o&&typeof o.displayName=="function"?l=o.displayName():o&&o.attributes?.displayName&&(l=o.attributes.displayName)}s.modal.show(I,{title:s.translator.trans("withdrawal.admin.requests.delete_confirm_title"),message:s.translator.trans("withdrawal.admin.requests.delete_confirm_message",{info:`${l} - ${e}`}),confirmText:s.translator.trans("withdrawal.admin.requests.delete_confirm_button"),cancelText:s.translator.trans("withdrawal.admin.requests.delete_cancel_button"),dangerous:!0,icon:"fas fa-trash",onConfirm:async()=>{try{const o=s.store.getById("withdrawal-requests",a);o&&(await o.delete(),await this.loadTransactions(),s.alerts.show({type:"success",dismissible:!0},s.translator.trans("withdrawal.admin.requests.delete_success")))}catch(o){console.error("Error deleting request:",o),s.alerts.show({type:"error",dismissible:!0},s.translator.trans("withdrawal.admin.requests.delete_error"))}},onCancel:()=>{s.modal.close()}})}async loadDepositPlatforms(){const t=C();try{this.depositPlatforms=await t.load(),console.log("Loaded deposit platforms:",this.depositPlatforms)}catch(a){console.error("Error loading deposit platforms:",a),this.depositPlatforms=[]}}async loadDepositTransactions(){const t=O();try{this.depositTransactions=await t.load(),console.log("Loaded deposit transactions:",this.depositTransactions)}catch(a){console.error("Error loading deposit transactions:",a),this.depositTransactions=[]}}async loadUserData(){if(this.transactions.length===0)return;const a=[...new Set(this.transactions.map(e=>{const l=e?.data?.relationships?.user?.data||e?.relationships?.user?.data;return l?l.id:null}).filter(e=>e!=null))].filter(e=>!this.users[e]);if(a.length>0)try{const e=a.map(o=>s.store.find("users",o).catch(c=>(console.error(`Error loading user ${o}:`,c),null))),l=await Promise.all(e);a.forEach((o,c)=>{l[c]&&(this.users[o]=l[c])})}catch(e){console.error("Error loading users:",e)}}}class rt extends n{constructor(){super(...arguments),this.name=n.attribute("name"),this.symbol=n.attribute("symbol"),this.network=n.attribute("network"),this.displayName=n.attribute("displayName"),this.minAmount=n.attribute("minAmount"),this.maxAmount=n.attribute("maxAmount"),this.fee=n.attribute("fee"),this.iconUrl=n.attribute("iconUrl"),this.iconClass=n.attribute("iconClass"),this.isActive=n.attribute("isActive"),this.createdAt=n.attribute("createdAt",n.transformDate),this.updatedAt=n.attribute("updatedAt",n.transformDate)}apiEndpoint(){return`/withdrawal-platforms/${this.id()}`}getDisplayName(){return this.displayName()||this.name()}isValidAmount(t){const a=this.minAmount(),e=this.maxAmount();return t>=a&&t<=e}getTotalCost(t){return t+this.fee()}}const D={PENDING:"pending",APPROVED:"approved",REJECTED:"rejected"};class it extends n{constructor(){super(...arguments),this.amount=n.attribute("amount"),this.accountDetails=n.attribute("accountDetails"),this.message=n.attribute("message"),this.status=n.attribute("status"),this.platformId=n.attribute("platformId"),this.userId=n.attribute("userId"),this.createdAt=n.attribute("createdAt",n.transformDate),this.updatedAt=n.attribute("updatedAt",n.transformDate),this.user=n.hasOne("user"),this.platform=n.hasOne("platform")}apiEndpoint(){return`/withdrawal-requests/${this.id()}`}isPending(){return this.status()===D.PENDING}isApproved(){return this.status()===D.APPROVED}isRejected(){return this.status()===D.REJECTED}canBeModified(){return this.isPending()}statusLabel(){const t=this.status();return app.translator.trans(`withdrawal.forum.status.${t}`)}statusColor(){switch(this.status()){case D.APPROVED:return"success";case D.REJECTED:return"danger";case D.PENDING:default:return"warning"}}}class nt extends n{constructor(){super(...arguments),this.name=n.attribute("name"),this.symbol=n.attribute("symbol"),this.network=n.attribute("network"),this.networkTypeId=n.attribute("networkTypeId"),this.displayName=n.attribute("displayName"),this.minAmount=n.attribute("minAmount"),this.maxAmount=n.attribute("maxAmount"),this.fee=n.attribute("fee"),this.address=n.attribute("address"),this.qrCodeImageUrl=n.attribute("qrCodeImageUrl"),this.iconUrl=n.attribute("iconUrl"),this.iconClass=n.attribute("iconClass"),this.warningText=n.attribute("warningText"),this.networkConfig=n.attribute("networkConfig"),this.isActive=n.attribute("isActive"),this.createdAt=n.attribute("createdAt",n.transformDate),this.updatedAt=n.attribute("updatedAt",n.transformDate)}}class ot extends n{constructor(){super(...arguments),this.amount=n.attribute("amount"),this.fee=n.attribute("fee"),this.creditedAmount=n.attribute("creditedAmount"),this.transactionHash=n.attribute("transactionHash"),this.fromAddress=n.attribute("fromAddress"),this.memo=n.attribute("memo"),this.userMessage=n.attribute("userMessage"),this.status=n.attribute("status"),this.statusColor=n.attribute("statusColor"),this.blockchainData=n.attribute("blockchainData"),this.confirmations=n.attribute("confirmations"),this.requiredConfirmations=n.attribute("requiredConfirmations"),this.hasEnoughConfirmations=n.attribute("hasEnoughConfirmations"),this.canBeCompleted=n.attribute("canBeCompleted"),this.explorerUrl=n.attribute("explorerUrl"),this.detectedAt=n.attribute("detectedAt",n.transformDate),this.confirmedAt=n.attribute("confirmedAt",n.transformDate),this.completedAt=n.attribute("completedAt",n.transformDate),this.adminNotes=n.attribute("adminNotes"),this.createdAt=n.attribute("createdAt",n.transformDate),this.updatedAt=n.attribute("updatedAt",n.transformDate),this.user=n.hasOne("user"),this.platform=n.hasOne("platform"),this.depositAddress=n.hasOne("depositAddress"),this.processedBy=n.hasOne("processedBy")}}s.initializers.add("wusong8899-withdrawal",()=>{s.store.models["withdrawal-platforms"]=rt,s.store.models["withdrawal-requests"]=it,s.store.models["deposit-platforms"]=nt,s.store.models["deposit-transactions"]=ot,s.extensionData.for("wusong8899-withdrawal").registerPage(et)})})(flarum.core.compat["admin/app"],m,flarum.core.compat["admin/components/ExtensionPage"],flarum.core.compat["common/components/LoadingIndicator"],flarum.core.compat["common/components/Modal"],flarum.core.compat["common/components/Button"],flarum.core.compat["common/helpers/icon"],flarum.core.compat["common/app"],flarum.core.compat["common/Component"],flarum.core.compat["common/utils/withAttr"],flarum.core.compat["common/utils/Stream"],flarum.core.compat["common/components/Switch"],flarum.core.compat["common/helpers/humanTime"],flarum.core.compat["common/helpers/username"],flarum.core.compat["common/Model"]);
//# sourceMappingURL=admin.js.map

module.exports={};