(function(r,x,L,q,R,S,F,p,u,s,g,E,i){"use strict";const O=c=>typeof c.id=="function"?c.id():c.id,n=(c,t)=>typeof c[t]=="function"?c[t]():c.attributes?c.attributes[t]:c[t],k=c=>String(O(c)),G=(c,t)=>{const e=String(t);return c.find(a=>{const o=O(a);return String(o)===e})},z=(c,t)=>{const e=n(c,t);return e?new Date(e):new Date},H={pending:"warning",approved:"success",rejected:"danger"},y={MIN_AMOUNT:.001,MAX_AMOUNT:10,FEE:5e-4,BALANCE_PRECISION:8},P={COINS:"fas fa-coins",CHEVRON_DOWN:"fas fa-chevron-down",PASTE:"fas fa-paste",BOOKMARK:"fas fa-bookmark"};class C{view(t){const{platform:e,className:a="",size:o="medium"}=t.attrs;if(!e)return u(P.COINS,{className:`crypto-icon default ${a}`});const l=n(e,"iconUrl"),d=n(e,"iconClass"),w=n(e,"name"),f=n(e,"symbol"),h=`platform-icon-${o}`;if(l)return m("img",{src:l,alt:w||"Platform",className:`platform-icon-image ${h} ${a}`,onerror:v=>{const _=v.target;_.style.display="none";const B=document.createElement("i"),Nt=d||P.COINS;B.className=`${Nt} crypto-icon ${a}`,_.parentElement?.appendChild(B)}});const b=d||P.COINS,N=f?.toLowerCase()||"default";return u(b,{className:`crypto-icon ${N} ${h} ${a}`})}}let V=class extends g{oninit(t){super.oninit(t),this.state={showDropdown:!1}}view(){const{selectedPlatform:t}=this.attrs,{showDropdown:e}=this.state;return m("div",{className:"WithdrawalPage-platformSelector"},m("div",{className:"WithdrawalPage-label"},"提取平台"),m("div",{className:"WithdrawalPage-platformDropdown",onclick:()=>this.toggleDropdown()},m("div",{className:"WithdrawalPage-platformSelected"},m("div",{className:"WithdrawalPage-platformInfo"},m("div",{className:"WithdrawalPage-platformIcon"},m(C,{platform:t,size:"medium"})),m("div",{className:"WithdrawalPage-platformDetails"},m("div",{className:"WithdrawalPage-platformName"},this.getPlatformName(t))))),u(P.CHEVRON_DOWN,{className:"WithdrawalPage-dropdownIcon"})),e&&this.renderPlatformDropdown())}toggleDropdown(){this.state.showDropdown=!this.state.showDropdown}getPlatformName(t){return t&&(n(t,"displayName")||n(t,"name"))||"请选择平台"}renderPlatformDropdown(){const{platforms:t}=this.attrs,e=(t||[]).filter(a=>!!a);return e.length===0?m("div",{className:"WithdrawalPage-dropdownMenu"},m("div",{className:"WithdrawalPage-dropdownItem WithdrawalPage-noData"},r.translator.trans("withdrawal.forum.no_platforms"))):m("div",{className:"WithdrawalPage-dropdownMenu"},e.map(a=>m("div",{key:a.id,className:"WithdrawalPage-dropdownItem",onclick:()=>this.selectPlatform(a)},m("div",{className:"WithdrawalPage-platformIcon"},m(C,{platform:a,size:"small"})),m("div",{className:"WithdrawalPage-platformName"},n(a,"displayName")||n(a,"name")))))}selectPlatform(t){const{onPlatformSelect:e,onAmountChange:a}=this.attrs;e(t),this.state.showDropdown=!1,a&&a()}};class K extends g{view(){const{amount:t,selectedPlatform:e,loadingBalance:a,onAmountChange:o,onFillAllAmount:l}=this.attrs,d=this.getMinAmount(e),w=this.getMaxAmount(e),f=this.getFee(e);return m("div",{className:"WithdrawalPage-amountSection"},m("div",{className:"WithdrawalPage-formGroup"},m("div",{className:"WithdrawalPage-label"},r.translator.trans("withdrawal.forum.form.amount")),m("div",{className:"WithdrawalPage-amountInput"},m("input",{type:"text",className:"WithdrawalPage-input",placeholder:"0.00000000",value:t,oninput:h=>o(h.target.value)}),m(S,{className:"WithdrawalPage-allButton",onclick:l,disabled:a},r.translator.trans("withdrawal.forum.form.all_button"))),m("div",{className:"WithdrawalPage-amountLimits"},m("div",{className:"WithdrawalPage-limitRow"},m("span",{className:"WithdrawalPage-limitLabel"},r.translator.trans("withdrawal.forum.limits.min_max")),m("span",{className:"WithdrawalPage-limitValue"},u(P.COINS)," ",d," ~ ",w)),m("div",{className:"WithdrawalPage-limitRow"},m("span",{className:"WithdrawalPage-limitLabel"},r.translator.trans("withdrawal.forum.limits.fee")),m("span",{className:"WithdrawalPage-limitValue"},u(P.COINS)," ",f)))))}getMinAmount(t){return t&&n(t,"minAmount")||y.MIN_AMOUNT}getMaxAmount(t){return t&&n(t,"maxAmount")||y.MAX_AMOUNT}getFee(t){return t&&n(t,"fee")||y.FEE}}class J extends g{view(){const{accountDetails:t,selectedPlatform:e,saveAddress:a,onAccountDetailsChange:o,onSaveAddressToggle:l}=this.attrs,d=this.getSymbol(e);return m("div",{className:"WithdrawalPage-addressSection"},m("div",{className:"WithdrawalPage-formGroup"},m("div",{className:"WithdrawalPage-addressHeader"},m("span",{className:"WithdrawalPage-label"},r.translator.trans("withdrawal.forum.form.address",{symbol:d}),m("span",{className:"WithdrawalPage-required"},"*")),m("div",{className:"WithdrawalPage-saveAddress",onclick:()=>l(!a)},u(P.BOOKMARK),r.translator.trans("withdrawal.forum.form.save_address"))),m("div",{className:"WithdrawalPage-addressInput"},m("input",{type:"text",className:"WithdrawalPage-input",placeholder:r.translator.trans("withdrawal.forum.form.address_placeholder"),value:t,oninput:w=>o(w.target.value)}),m("button",{className:"WithdrawalPage-pasteButton",onclick:()=>this.pasteFromClipboard()},u(P.PASTE)))))}getSymbol(t){return t&&n(t,"symbol")||""}async pasteFromClipboard(){const{onAccountDetailsChange:t}=this.attrs;try{if(navigator.clipboard&&navigator.clipboard.readText){const e=await navigator.clipboard.readText();t(e.trim()),m.redraw()}}catch(e){console.error("Failed to read from clipboard:",e),r.alerts.show({type:"error",dismissible:!0},r.translator.trans("withdrawal.forum.clipboard_error"))}}}class Y extends g{view(){const{message:t,onMessageChange:e}=this.attrs;return m("div",{className:"WithdrawalPage-messageSection"},m("div",{className:"WithdrawalPage-formGroup"},m("span",{className:"WithdrawalPage-label"},r.translator.trans("withdrawal.forum.form.message")),m("textarea",{className:"WithdrawalPage-textarea",placeholder:r.translator.trans("withdrawal.forum.form.message_placeholder"),value:t,rows:3,maxlength:500,oninput:a=>e(a.target.value)}),m("div",{className:"WithdrawalPage-helperText"},r.translator.trans("withdrawal.forum.form.message_helper")," (",t.length,"/500)")))}}class X extends g{view(){const{amount:t,selectedPlatform:e,submitting:a,canSubmit:o,onSubmit:l}=this.attrs,d=parseFloat(t)||0,w=this.getFee(e),f=Math.max(0,d-w),h=this.getSymbol(e);return m("div",{className:"WithdrawalPage-submitSection"},m(S,{className:"WithdrawalPage-submitButton",loading:a,disabled:!o,onclick:l},r.translator.trans("withdrawal.forum.form.submit")),d>0&&m("div",{className:"WithdrawalPage-finalAmount"},r.translator.trans("withdrawal.forum.final_amount",{amount:f.toFixed(y.BALANCE_PRECISION),symbol:h})))}getFee(t){return t&&n(t,"fee")||y.FEE}getSymbol(t){return t&&n(t,"symbol")||""}}class j extends g{view(){const{platforms:t,formData:e,loadingBalance:a,submitting:o,onFormDataChange:l,onFillAllAmount:d,onSubmit:w}=this.attrs;return[m(V,{platforms:t,selectedPlatform:e.selectedPlatform,onPlatformSelect:f=>l({selectedPlatform:f}),onAmountChange:()=>l({amount:""})}),m(K,{amount:e.amount,selectedPlatform:e.selectedPlatform,loadingBalance:a,onAmountChange:f=>l({amount:f}),onFillAllAmount:d}),m(J,{accountDetails:e.accountDetails,selectedPlatform:e.selectedPlatform,saveAddress:e.saveAddress,onAccountDetailsChange:f=>l({accountDetails:f}),onSaveAddressToggle:f=>l({saveAddress:f})}),m(Y,{message:e.message,onMessageChange:f=>l({message:f})}),m(X,{amount:e.amount,selectedPlatform:e.selectedPlatform,accountDetails:e.accountDetails,submitting:o,canSubmit:this.canSubmit(),onSubmit:w})]}canSubmit(){const{formData:t,submitting:e}=this.attrs,{selectedPlatform:a,amount:o,accountDetails:l}=t;return!!(a&&o&&l&&!e&&parseFloat(o)>0)}}class Q extends g{view(){const{status:t,className:e=""}=this.attrs,a=this.getStatusClass(t),o=this.getStatusLabel(t);return m("div",{className:`WithdrawalPage-historyStatus ${a} ${e}`},o)}getStatusClass(t){return H[t]||H.pending}getStatusLabel(t){return r.translator.trans(`withdrawal.forum.status.${t}`)}}class Z extends g{view(){const{request:t,platforms:e}=this.attrs;if(!t)return null;const a=this.getPlatformId(t),o=G(e,a),l=n(t,"status")||"pending",d=z(t,"createdAt"),w=n(t,"amount")||0,f=n(t,"accountDetails")||"";return console.log("Looking for platform with ID:",a,"Available platforms:",e.map(h=>({id:k(h),name:n(h,"name")}))),m("div",{key:k(t),className:"WithdrawalPage-historyItem"},m("div",{className:"WithdrawalPage-historyHeader"},m("div",{className:"WithdrawalPage-historyPlatform"},m("div",{className:"WithdrawalPage-platformIcon"},m(C,{platform:o,size:"small"})),m("div",{className:"WithdrawalPage-historyInfo"},m("div",{className:"WithdrawalPage-historyPlatformName"},this.getPlatformName(o)),m("div",{className:"WithdrawalPage-historyDate"},d.toLocaleDateString()," ",d.toLocaleTimeString()))),m(Q,{status:l})),m("div",{className:"WithdrawalPage-historyDetails"},m("div",{className:"WithdrawalPage-historyAmount"},m("span",{className:"WithdrawalPage-historyLabel"},r.translator.trans("withdrawal.forum.history.amount"),":"),m("span",{className:"WithdrawalPage-historyValue"},w," ",this.getPlatformSymbol(o))),m("div",{className:"WithdrawalPage-historyAddress"},m("span",{className:"WithdrawalPage-historyLabel"},r.translator.trans("withdrawal.forum.history.address"),":"),m("span",{className:"WithdrawalPage-historyValue"},f))))}getPlatformId(t){return n(t,"platformId")||t.relationships?.platform?.data?.id||""}getPlatformName(t){return t&&n(t,"name")||"Unknown Platform"}getPlatformSymbol(t){return t&&n(t,"symbol")||""}}class M extends g{view(){const{iconName:t,title:e,description:a,className:o=""}=this.attrs;return m("div",{className:`WithdrawalPage-emptyState ${o}`},m("div",{className:"WithdrawalPage-emptyIcon"},u(t)),m("h3",{className:"WithdrawalPage-emptyTitle"},e),m("p",{className:"WithdrawalPage-emptyDescription"},a))}}function $(c){const{className:t=""}=c;return m("div",{className:`WithdrawalPage-loading ${t}`},m(F,null))}class tt extends g{view(){const{requests:t,platforms:e,loading:a}=this.attrs;return a?m($,{className:"WithdrawalPage-historyLoading"}):!t||t.length===0?m(M,{iconName:"fas fa-history",title:r.translator.trans("withdrawal.forum.history.empty.title"),description:r.translator.trans("withdrawal.forum.history.empty.description"),className:"WithdrawalPage-historyEmpty"}):m("div",{className:"WithdrawalPage-historyList"},t.map(o=>m(Z,{key:this.getRequestKey(o),request:o,platforms:e})))}getRequestKey(t){return typeof t.id=="function"?`request-${t.id()}`:`request-${t.id||Math.random()}`}}class et extends g{constructor(){super(...arguments),this.isOpen=p(!1),this.handleOutsideClick=t=>{const e=this.element;e&&!e.contains(t.target)&&(this.isOpen(!1),s.redraw())}}view(t){const{currencies:e,selected:a,loading:o}=t.attrs;return s("div",{className:`CurrencySelector ${this.isOpen()?"open":""}`},s("div",{className:"CurrencySelector-trigger",onclick:()=>!o&&this.isOpen(!this.isOpen())},s("div",{className:"CurrencySelector-content"},o?s("div",{className:"CurrencySelector-loading"},s("i",{className:"fas fa-spinner fa-spin"}),s("span",null,"Loading currencies...")):a?s("div",{className:"CurrencySelector-selected"},s("div",{className:"CurrencySelector-icon"},this.getCurrencyIcon(a)),s("span",{className:"CurrencySelector-label"},a)):s("div",{className:"CurrencySelector-placeholder"},s("div",{className:"CurrencySelector-icon"},u("fas fa-coins")),s("span",{className:"CurrencySelector-label"},"Select Currency"))),s("div",{className:"CurrencySelector-arrow"},u("fas fa-chevron-down"))),this.isOpen()&&!o&&s("div",{className:"CurrencySelector-dropdown"},e.map(l=>s("div",{key:l,className:`CurrencySelector-option ${l===a?"selected":""}`,onclick:()=>this.handleSelect(l,t.attrs.onSelect)},s("div",{className:"CurrencySelector-optionIcon"},this.getCurrencyIcon(l)),s("span",{className:"CurrencySelector-optionLabel"},l)))))}oncreate(t){super.oncreate(t),document.addEventListener("click",this.handleOutsideClick)}onremove(t){super.onremove(t),document.removeEventListener("click",this.handleOutsideClick)}handleSelect(t,e){e(t),this.isOpen(!1)}getCurrencyIcon(t){switch(t){case"USDT":return s("span",{className:"CurrencySelector-currencyIcon usdt"},"₮");case"USDC":return s("span",{className:"CurrencySelector-currencyIcon usdc"},"$");case"BTC":return s("span",{className:"CurrencySelector-currencyIcon btc"},"₿");case"ETH":return s("span",{className:"CurrencySelector-currencyIcon eth"},"Ξ");default:return u("fas fa-coins")}}}class at extends g{constructor(){super(...arguments),this.isOpen=p(!1),this.handleOutsideClick=t=>{const e=this.element;e&&!e.contains(t.target)&&(this.isOpen(!1),s.redraw())}}view(t){const{networks:e,selected:a,loading:o,disabled:l}=t.attrs;return s("div",{className:`NetworkSelector ${this.isOpen()?"open":""} ${l?"disabled":""}`},s("div",{className:"NetworkSelector-trigger",onclick:()=>!o&&!l&&this.isOpen(!this.isOpen())},s("div",{className:"NetworkSelector-content"},o?s("div",{className:"NetworkSelector-loading"},s("i",{className:"fas fa-spinner fa-spin"}),s("span",null,"Loading networks...")):l?s("div",{className:"NetworkSelector-placeholder"},s("div",{className:"NetworkSelector-icon"},u("fas fa-network-wired")),s("span",{className:"NetworkSelector-label"},"Select currency first")):a?s("div",{className:"NetworkSelector-selected"},s("div",{className:"NetworkSelector-icon"},this.getNetworkIcon(a)),s("span",{className:"NetworkSelector-label"},a)):s("div",{className:"NetworkSelector-placeholder"},s("div",{className:"NetworkSelector-icon"},u("fas fa-network-wired")),s("span",{className:"NetworkSelector-label"},"Select Network"))),s("div",{className:"NetworkSelector-arrow"},u("fas fa-chevron-down"))),this.isOpen()&&!o&&!l&&s("div",{className:"NetworkSelector-dropdown"},e.map(d=>s("div",{key:d,className:`NetworkSelector-option ${d===a?"selected":""}`,onclick:()=>this.handleSelect(d,t.attrs.onSelect)},s("div",{className:"NetworkSelector-optionIcon"},this.getNetworkIcon(d)),s("span",{className:"NetworkSelector-optionLabel"},d),s("span",{className:"NetworkSelector-optionDesc"},this.getNetworkDescription(d))))))}oncreate(t){super.oncreate(t),document.addEventListener("click",this.handleOutsideClick)}onremove(t){super.onremove(t),document.removeEventListener("click",this.handleOutsideClick)}handleSelect(t,e){e(t),this.isOpen(!1)}getNetworkIcon(t){switch(t){case"TRC20":return s("span",{className:"NetworkSelector-networkIcon trc20"},"T");case"ERC20":return s("span",{className:"NetworkSelector-networkIcon erc20"},"E");case"BSC":case"BEP20":return s("span",{className:"NetworkSelector-networkIcon bsc"},"B");case"POLYGON":return s("span",{className:"NetworkSelector-networkIcon polygon"},"P");default:return u("fas fa-network-wired")}}getNetworkDescription(t){switch(t){case"TRC20":return"TRON network - Low fees";case"ERC20":return"Ethereum network - High security";case"BSC":case"BEP20":return"Binance Smart Chain - Fast & cheap";case"POLYGON":return"Polygon network - Very low fees";default:return"Blockchain network"}}}class U extends g{constructor(){super(...arguments),this.isOpen=p(!1),this.handleOutsideClick=t=>{const e=this.element;e&&!e.contains(t.target)&&(this.isOpen(!1),s.redraw())}}view(t){const{platforms:e,selected:a,loading:o}=t.attrs;return s("div",{className:`PlatformSelector ${this.isOpen()?"open":""}`},s("div",{className:"PlatformSelector-trigger",onclick:()=>!o&&this.isOpen(!this.isOpen())},s("div",{className:"PlatformSelector-content"},o?s("div",{className:"PlatformSelector-loading"},s("i",{className:"fas fa-spinner fa-spin"}),s("span",null,"Loading platforms...")):a?s("div",{className:"PlatformSelector-selected"},s("div",{className:"PlatformSelector-icon"},this.getPlatformIcon(a)),s("span",{className:"PlatformSelector-label"},this.getPlatformDisplayName(a))):s("div",{className:"PlatformSelector-placeholder"},s("div",{className:"PlatformSelector-icon"},u("fas fa-coins")),s("span",{className:"PlatformSelector-label"},"Select Platform"))),s("div",{className:"PlatformSelector-arrow"},u("fas fa-chevron-down"))),this.isOpen()&&!o&&s("div",{className:"PlatformSelector-dropdown"},e.map(l=>s("div",{key:l.id(),className:`PlatformSelector-option ${l===a?"selected":""}`,onclick:()=>this.handleSelect(l,t.attrs.onSelect)},s("div",{className:"PlatformSelector-optionIcon"},this.getPlatformIcon(l)),s("div",{className:"PlatformSelector-optionContent"},s("span",{className:"PlatformSelector-optionLabel"},this.getPlatformDisplayName(l)),s("span",{className:"PlatformSelector-optionDesc"},this.getPlatformDescription(l)))))))}oncreate(t){super.oncreate(t),document.addEventListener("click",this.handleOutsideClick)}onremove(t){super.onremove(t),document.removeEventListener("click",this.handleOutsideClick)}handleSelect(t,e){e(t),this.isOpen(!1)}getPlatformIcon(t){const e=n(t,"iconUrl"),a=n(t,"iconClass"),o=n(t,"symbol");return e?s("img",{src:e,alt:o,className:"PlatformSelector-platformIcon"}):a?s("i",{className:a}):u("fas fa-coins")}getPlatformDisplayName(t){const e=n(t,"symbol"),a=n(t,"network");return a?`${e} (${a})`:e}getPlatformDescription(t){const e=n(t,"minAmount"),a=n(t,"network");return a&&e?`${a} network - Min: ${e}`:a?`${a} network`:e?`Min: ${e}`:"Deposit platform"}}class st extends g{view(t){const{address:e,loading:a,onCopy:o}=t.attrs;return m("div",{className:"AddressDisplay"},a?m("div",{className:"AddressDisplay-loading"},m("i",{className:"fas fa-spinner fa-spin"}),m("span",null,"Generating address...")):e?m("div",{className:"AddressDisplay-content"},m("div",{className:"AddressDisplay-address",title:e},e),m("div",{className:"AddressDisplay-actions"},m("button",{className:"AddressDisplay-copyBtn",onclick:o,title:"Copy address"},u("fas fa-copy")))):m("div",{className:"AddressDisplay-placeholder"},m("span",null,"No address available")))}}class rt extends g{view(t){const{platform:e,loading:a,size:o=160}=t.attrs;return m("div",{className:"ImageDisplay",style:{width:`${o}px`,height:`${o}px`}},a?m("div",{className:"ImageDisplay-loading"},m("i",{className:"fas fa-spinner fa-spin"})):e&&e.qrCodeImageUrl()?m("img",{src:e.qrCodeImageUrl(),alt:`${e.name()} Image`,className:"ImageDisplay-image",onerror:"this.style.display='none'; this.nextElementSibling.style.display='block';"}):m("div",{className:"ImageDisplay-placeholder"},m("i",{className:"fas fa-image"}),m("div",null,"No Image")),m("div",{className:"ImageDisplay-error",style:{display:"none"}},m("i",{className:"fas fa-exclamation-triangle"}),m("div",null,"Image Load Failed")))}}class it extends g{view(t){const{transactions:e,loading:a}=t.attrs;return a?m("div",{className:"DepositHistory"},m("div",{className:"DepositHistory-loading"},m("i",{className:"fas fa-spinner fa-spin"}),m("span",null,"Loading deposit history..."))):!e||e.length===0?m("div",{className:"DepositHistory"},m("div",{className:"DepositHistory-empty"},m("div",{className:"DepositHistory-emptyIcon"},u("fas fa-inbox")),m("h3",null,"No deposits yet"),m("p",null,"Your deposit transactions will appear here once you make a deposit."))):m("div",{className:"DepositHistory"},m("div",{className:"DepositHistory-header"},m("h3",null,"Deposit History"),m("span",{className:"DepositHistory-count"},e.length," transactions")),m("div",{className:"DepositHistory-list"},e.map(o=>this.renderTransaction(o))))}renderTransaction(t){const e=t.platform?.(),a=n(t,"amount")||0,o=n(t,"status")||"",l=n(t,"statusColor")||"secondary",d=n(t,"transactionHash"),w=n(t,"explorerUrl"),f=n(t,"createdAt"),h=n(t,"completedAt"),b=n(t,"confirmations")||0,N=n(t,"requiredConfirmations")||1;return m("div",{key:n(t,"id"),className:"DepositHistory-item"},m("div",{className:"DepositHistory-itemHeader"},m("div",{className:"DepositHistory-itemPlatform"},e&&m("[",null,m("div",{className:"DepositHistory-itemIcon"},this.renderPlatformIcon(e)),m("div",{className:"DepositHistory-itemInfo"},m("span",{className:"DepositHistory-itemCurrency"},n(e,"symbol")),m("span",{className:"DepositHistory-itemNetwork"},n(e,"network"))))),m("div",{className:"DepositHistory-itemAmount"},m("span",{className:"DepositHistory-itemAmountValue"},"+",a," ",e?n(e,"symbol"):""),m("div",{className:`DepositHistory-itemStatus status-${l}`},this.getStatusIcon(o),this.getStatusText(o)))),m("div",{className:"DepositHistory-itemDetails"},m("div",{className:"DepositHistory-itemMeta"},m("span",{className:"DepositHistory-itemTime"},f?E(f):"Unknown time"),o==="confirmed"||o==="completed"?m("span",{className:"DepositHistory-itemConfirmations"},b,"/",N," confirmations"):null),d&&m("div",{className:"DepositHistory-itemHash"},m("span",{className:"DepositHistory-itemHashLabel"},"Transaction:"),w?m("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"DepositHistory-itemHashLink"},this.formatHash(d),u("fas fa-external-link-alt")):m("span",{className:"DepositHistory-itemHashText"},this.formatHash(d))),h&&m("div",{className:"DepositHistory-itemCompleted"},m("span",null,"Credited: ",E(h)))))}renderPlatformIcon(t){const e=n(t,"iconUrl"),a=n(t,"iconClass"),o=n(t,"symbol");if(e)return m("img",{src:e,alt:o,className:"DepositHistory-platformImg"});if(a)return u(a);switch(o){case"USDT":return m("span",{className:"DepositHistory-currencyIcon usdt"},"₮");case"USDC":return m("span",{className:"DepositHistory-currencyIcon usdc"},"$");case"BTC":return m("span",{className:"DepositHistory-currencyIcon btc"},"₿");case"ETH":return m("span",{className:"DepositHistory-currencyIcon eth"},"Ξ");default:return u("fas fa-coins")}}getStatusIcon(t){switch(t){case"pending":return u("fas fa-clock");case"confirmed":return u("fas fa-check-circle");case"completed":return u("fas fa-check-double");case"failed":return u("fas fa-times-circle");case"cancelled":return u("fas fa-ban");default:return u("fas fa-question-circle")}}getStatusText(t){switch(t){case"pending":return"Pending";case"confirmed":return"Confirmed";case"completed":return"Completed";case"failed":return"Failed";case"cancelled":return"Cancelled";default:return"Unknown"}}formatHash(t){return t.length<=16?t:`${t.substring(0,8)}...${t.substring(t.length-8)}`}}class T extends R{constructor(){super(...arguments),this.state={withdrawalPlatforms:[],withdrawalRequests:[],userBalance:0,loadingBalance:!0,submitting:!1,depositPlatforms:[],depositTransactions:[],loading:!0,activeTab:p("withdrawal")},this.withdrawalFormData={amount:p(""),selectedPlatform:p(null),accountDetails:p(""),message:p(""),saveAddress:p(!1)},this.depositFormData={selectedPlatform:p(null)},this.depositAddressData={address:"",platform:null,loading:!1},this.availablePlatforms=[],this.currencyGroups={},this.selectedCurrency=p(""),this.selectedNetwork=p("")}oninit(t){super.oninit(t);const a=new URLSearchParams(window.location.search).get("tab"),o=this.getTabFromPath();o?this.state.activeTab(o):a&&this.isValidTab(a)&&this.state.activeTab(a),this.updatePageTitle(),this.loadAllData()}getTabFromPath(){const t=window.location.pathname;return t.includes("/funds/withdrawal")?"withdrawal":t.includes("/funds/deposit")?"deposit":t.includes("/funds/withdrawal-history")?"withdrawal-history":t.includes("/funds/deposit-history")?"deposit-history":null}isValidTab(t){return["withdrawal","deposit","withdrawal-history","deposit-history"].includes(t)}updatePageTitle(){const t=this.state.activeTab();let e="withdrawal.forum.page.title";switch(t){case"withdrawal":case"withdrawal-history":e="withdrawal.forum.page.title";break;case"deposit":case"deposit-history":e="withdrawal.forum.deposit.page.title";break}r.setTitle(r.translator.trans(e))}view(){return this.state.loading?s("div",{className:"FundsPage"},s("div",{className:"FundsPage-loading"},s(F,null))):s("div",{className:"FundsPage"},s("div",{className:"FundsPage-modal"},this.renderHeader(),s("div",{className:"FundsPage-content"},this.renderActiveTab())))}renderHeader(){const t=this.state.activeTab();return s("div",{className:"FundsPage-header"},s("div",{className:"FundsPage-tabs"},s("div",{className:`FundsPage-tab ${t==="withdrawal"?"active":""}`,onclick:()=>this.handleTabChange("withdrawal")},r.translator.trans("withdrawal.forum.tabs.withdrawal")),s("div",{className:`FundsPage-tab ${t==="deposit"?"active":""}`,onclick:()=>this.handleTabChange("deposit")},r.translator.trans("withdrawal.forum.deposit.tabs.deposit")),s("div",{className:`FundsPage-tab ${t==="withdrawal-history"?"active":""}`,onclick:()=>this.handleTabChange("withdrawal-history")},r.translator.trans("withdrawal.forum.tabs.history")),s("div",{className:`FundsPage-tab ${t==="deposit-history"?"active":""}`,onclick:()=>this.handleTabChange("deposit-history")},r.translator.trans("withdrawal.forum.deposit.tabs.history"))),s(S,{className:"FundsPage-close",icon:"fas fa-times",onclick:()=>r.history.back()}))}renderActiveTab(){switch(this.state.activeTab()){case"withdrawal":return this.renderWithdrawalTab();case"deposit":return this.renderDepositTab();case"withdrawal-history":return this.renderWithdrawalHistoryTab();case"deposit-history":return this.renderDepositHistoryTab();default:return this.renderWithdrawalTab()}}renderWithdrawalTab(){return(this.state.withdrawalPlatforms||[]).filter(e=>!!e).length===0?s("div",{className:"FundsPage-withdrawalTab"},s("div",{className:"WithdrawalPage-emptyState"},s("div",{className:"WithdrawalPage-emptyIcon"},u("fas fa-coins")),s("h3",{className:"WithdrawalPage-emptyTitle"},r.translator.trans("withdrawal.forum.no_platforms")),s("p",{className:"WithdrawalPage-emptyDescription"},r.translator.trans("withdrawal.forum.no_platforms_description")))):s("div",{className:"FundsPage-withdrawalTab"},s(j,{platforms:this.state.withdrawalPlatforms,formData:this.getWithdrawalFormDataForComponent(),loadingBalance:this.state.loadingBalance,submitting:this.state.submitting,onFormDataChange:this.handleWithdrawalFormDataChange.bind(this),onFillAllAmount:this.handleFillAllAmount.bind(this),onSubmit:this.handleWithdrawalSubmit.bind(this)}))}renderDepositTab(){return(this.state.depositPlatforms||[]).filter(e=>e&&n(e,"isActive")).length===0?s("div",{className:"FundsPage-emptyState"},s("div",{className:"FundsPage-emptyIcon"},u("fas fa-coins")),s("h3",{className:"FundsPage-emptyTitle"},r.translator.trans("withdrawal.forum.deposit.no_platforms")),s("p",{className:"FundsPage-emptyDescription"},r.translator.trans("withdrawal.forum.deposit.no_platforms_description"))):s("div",{className:"FundsPage-depositTab"},this.renderDepositSelectors(),this.renderDepositInfo())}renderDepositSelectors(){const t=Object.keys(this.currencyGroups),e=this.selectedCurrency(),a=this.currencyGroups[e]||[],o=a.some(d=>n(d,"network")),l=a.filter(d=>!n(d,"network"));return s("div",{className:"FundsPage-selectors"},s(et,{currencies:t,selected:e,onSelect:d=>this.handleCurrencyChange(d),loading:this.state.loading}),e&&o&&s(at,{networks:a.filter(d=>n(d,"network")).map(d=>n(d,"network")).filter((d,w,f)=>f.indexOf(d)===w),selected:this.selectedNetwork(),onSelect:d=>this.handleNetworkChange(d),loading:this.state.loading,disabled:!1}),e&&l.length>0&&!o&&s(U,{platforms:l,selected:this.depositFormData.selectedPlatform(),onSelect:d=>this.handlePlatformSelect(d),loading:this.state.loading}),e&&o&&this.selectedNetwork()&&s(U,{platforms:a.filter(d=>n(d,"network")===this.selectedNetwork()),selected:this.depositFormData.selectedPlatform(),onSelect:d=>this.handlePlatformSelect(d),loading:this.state.loading}))}renderDepositInfo(){const t=this.depositFormData.selectedPlatform();if(!t)return s("div",{className:"FundsPage-selectPrompt"},s("p",null,r.translator.trans("withdrawal.forum.deposit.select_currency_network")));const e=n(t,"minAmount")||0,a=n(t,"warningText")||r.translator.trans("withdrawal.forum.deposit.default_warning",{currency:n(t,"symbol"),network:n(t,"network"),minAmount:e});return s("div",{className:"FundsPage-depositInfo"},s("p",{className:"FundsPage-instructionText"},r.translator.trans("withdrawal.forum.deposit.scan_or_use_address")),s(st,{address:this.depositAddressData.address,loading:this.depositAddressData.loading,onCopy:this.handleCopyAddress.bind(this)}),s("p",{className:"FundsPage-minAmountText"},r.translator.trans("withdrawal.forum.deposit.min_amount",{amount:e,currency:n(t,"symbol")})),s("div",{className:"FundsPage-imageContainer"},s(rt,{platform:this.depositAddressData.platform,loading:this.depositAddressData.loading,size:160})),s("div",{className:"FundsPage-infoPanel"},s("i",{className:"fas fa-info-circle"}),s("span",null,a)))}renderWithdrawalHistoryTab(){return s("div",{className:"FundsPage-withdrawalTab"},s(tt,{requests:this.state.withdrawalRequests,platforms:this.state.withdrawalPlatforms,loading:!1}))}renderDepositHistoryTab(){return s(it,{transactions:this.state.depositTransactions,platforms:this.state.depositPlatforms,loading:!1})}handleTabChange(t){this.state.activeTab(t),this.updatePageTitle();const e=new URL(window.location.href);e.searchParams.set("tab",t),window.history.replaceState({},"",e.toString())}getWithdrawalFormDataForComponent(){return{selectedPlatform:this.withdrawalFormData.selectedPlatform(),amount:this.withdrawalFormData.amount(),accountDetails:this.withdrawalFormData.accountDetails(),message:this.withdrawalFormData.message(),saveAddress:this.withdrawalFormData.saveAddress()}}handleWithdrawalFormDataChange(t){t.selectedPlatform!==void 0&&this.withdrawalFormData.selectedPlatform(t.selectedPlatform),t.amount!==void 0&&this.withdrawalFormData.amount(t.amount),t.accountDetails!==void 0&&this.withdrawalFormData.accountDetails(t.accountDetails),t.message!==void 0&&this.withdrawalFormData.message(t.message),t.saveAddress!==void 0&&this.withdrawalFormData.saveAddress(t.saveAddress)}async handleFillAllAmount(){const t=this.withdrawalFormData.selectedPlatform();if(t&&!this.state.loadingBalance)try{await this.loadUserBalance(!0);const e=n(t,"fee")||0,a=n(t,"maxAmount")||1/0;let o=this.state.userBalance-e;a<1/0&&o>a&&(o=a),o>0?this.withdrawalFormData.amount(o.toString()):r.alerts.show({type:"warning",dismissible:!0},r.translator.trans("withdrawal.forum.insufficient_balance"))}catch(e){console.error("Error refreshing balance:",e),r.alerts.show({type:"error",dismissible:!0},r.translator.trans("withdrawal.forum.balance_refresh_error"))}}async handleWithdrawalSubmit(){if(this.state.submitting)return;const t=this.withdrawalFormData.selectedPlatform(),e=this.withdrawalFormData.amount(),a=this.withdrawalFormData.accountDetails();if(!t||!e||!a)return;const o=parseFloat(e);if(isNaN(o)||o<=0){r.alerts.show({type:"warning",dismissible:!0},r.translator.trans("withdrawal.forum.invalid_amount"));return}const l=n(t,"minAmount")||0,d=n(t,"maxAmount")||1/0;if(o<l){r.alerts.show({type:"warning",dismissible:!0},r.translator.trans("withdrawal.forum.amount_below_minimum",{amount:o,minimum:l,platform:n(t,"name")}));return}if(o>d){r.alerts.show({type:"warning",dismissible:!0},r.translator.trans("withdrawal.forum.amount_above_maximum",{amount:o,maximum:d,platform:n(t,"name")}));return}const w=n(t,"fee")||0,f=o+w;if(this.state.userBalance<f){const h=w>0?r.translator.trans("withdrawal.forum.including_fee",{fee:w}):"";r.alerts.show({type:"warning",dismissible:!0},r.translator.trans("withdrawal.forum.insufficient_balance_detailed",{required:f,available:this.state.userBalance,feeText:h}));return}this.state.submitting=!0;try{const h=await r.request({method:"POST",url:r.forum.attribute("apiUrl")+"/withdrawal-requests",body:{data:{type:"withdrawal-requests",attributes:{platformId:k(t),amount:parseFloat(e),accountDetails:a,message:this.withdrawalFormData.message(),saveAddress:this.withdrawalFormData.saveAddress()}}}});r.store.pushPayload(h),this.withdrawalFormData.amount(""),this.withdrawalFormData.accountDetails(""),this.withdrawalFormData.message(""),this.withdrawalFormData.saveAddress()||this.withdrawalFormData.selectedPlatform(null),this.loadUserBalance(),this.loadWithdrawalRequests(),r.alerts.show({type:"success",dismissible:!0},r.translator.trans("withdrawal.forum.submit_success"))}catch(h){console.error("Withdrawal request failed:",h);let b=r.translator.trans("withdrawal.forum.error");if(h&&h.response&&h.response.errors){const N=h.response.errors;if(Array.isArray(N)&&N.length>0){const v=N[0];v.detail&&(b=v.detail)}}else if(h&&h.responseText)if(h.responseText.includes("<b>Fatal error</b>")||h.responseText.includes("<!DOCTYPE"))b=r.translator.trans("withdrawal.forum.server_error");else try{const N=JSON.parse(h.responseText);if(N.errors&&Array.isArray(N.errors)&&N.errors.length>0){const v=N.errors[0];v.detail&&(b=v.detail)}}catch{b=r.translator.trans("withdrawal.forum.server_error")}r.alerts.show({type:"error",dismissible:!0},b)}finally{this.state.submitting=!1}}handleCurrencyChange(t){this.selectedCurrency(t),this.selectedNetwork(""),this.depositFormData.selectedPlatform(null),this.depositAddressData.address="",this.depositAddressData.loading=!1;const e=this.currencyGroups[t]||[],a=e.filter(l=>!n(l,"network")),o=e.some(l=>n(l,"network"));a.length>0&&!o&&this.handlePlatformSelect(a[0])}handleNetworkChange(t){this.selectedNetwork(t),this.depositFormData.selectedPlatform(null),this.depositAddressData.address="",this.depositAddressData.loading=!1;const a=(this.currencyGroups[this.selectedCurrency()]||[]).filter(o=>n(o,"network")===t);a.length===1&&this.handlePlatformSelect(a[0])}handlePlatformSelect(t){this.depositFormData.selectedPlatform(t),this.loadDepositAddress(t)}handleCopyAddress(){this.depositAddressData.address&&navigator.clipboard.writeText(this.depositAddressData.address).then(()=>{r.alerts.show({type:"success",dismissible:!0},r.translator.trans("withdrawal.forum.deposit.address_copied"))}).catch(()=>{r.alerts.show({type:"error",dismissible:!0},r.translator.trans("withdrawal.forum.deposit.copy_failed"))})}async loadAllData(){try{await Promise.all([this.loadWithdrawalData(),this.loadDepositData(),this.loadUserBalance()]),this.state.loading=!1,s.redraw()}catch(t){console.error("Error loading data:",t),this.state.loading=!1,s.redraw()}}async loadWithdrawalData(){const[t,e]=await Promise.all([r.request({method:"GET",url:r.forum.attribute("apiUrl")+"/withdrawal-platforms"}),r.request({method:"GET",url:r.forum.attribute("apiUrl")+"/withdrawal-requests"})]);r.store.pushPayload(t),r.store.pushPayload(e),this.state.withdrawalPlatforms=r.store.all("withdrawal-platforms"),this.state.withdrawalRequests=r.store.all("withdrawal-requests")}async loadDepositData(){const[t,e]=await Promise.all([r.request({method:"GET",url:r.forum.attribute("apiUrl")+"/deposit-platforms"}),r.request({method:"GET",url:r.forum.attribute("apiUrl")+"/deposit-transactions"})]);r.store.pushPayload(t),r.store.pushPayload(e),this.state.depositPlatforms=r.store.all("deposit-platforms"),this.state.depositTransactions=r.store.all("deposit-transactions"),this.availablePlatforms=this.state.depositPlatforms.filter(a=>n(a,"isActive")),this.currencyGroups={},this.availablePlatforms.forEach(a=>{const o=n(a,"symbol");this.currencyGroups[o]||(this.currencyGroups[o]=[]),this.currencyGroups[o].push(a)})}async loadUserBalance(t=!1){try{if(this.state.loadingBalance=!0,t&&r.session.user){const e=await r.request({method:"GET",url:`${r.forum.attribute("apiUrl")}/users/${r.session.user.id()}`});r.store.pushPayload(e);const a=r.store.getById("users",r.session.user.id());a?this.state.userBalance=parseFloat(a.attribute("money"))||0:this.state.userBalance=0}else this.state.userBalance=parseFloat(r.session.user?.attribute("money"))||0;this.state.loadingBalance=!1,s.redraw()}catch(e){console.error("Error loading user balance:",e),this.state.loadingBalance=!1,s.redraw()}}async loadWithdrawalRequests(){try{const t=await r.request({method:"GET",url:r.forum.attribute("apiUrl")+"/withdrawal-requests"});r.store.pushPayload(t),this.state.withdrawalRequests=r.store.all("withdrawal-requests")}catch(t){console.error("Error loading withdrawal requests:",t)}}async loadDepositAddress(t){this.depositAddressData.loading=!0,s.redraw();try{const a=(await r.request({method:"GET",url:r.forum.attribute("apiUrl")+"/deposit-address",params:{platform_id:n(t,"id")}})).data;this.depositAddressData={address:a.attributes.address,addressTag:a.attributes.addressTag,platform:t,loading:!1},s.redraw()}catch(e){console.error("Error loading deposit address:",e),this.depositAddressData.loading=!1,r.alerts.show({type:"error",dismissible:!0},r.translator.trans("withdrawal.forum.deposit.address_load_error")),s.redraw()}}}class ot extends i{constructor(){super(...arguments),this.name=i.attribute("name"),this.symbol=i.attribute("symbol"),this.network=i.attribute("network"),this.displayName=i.attribute("displayName"),this.minAmount=i.attribute("minAmount"),this.maxAmount=i.attribute("maxAmount"),this.fee=i.attribute("fee"),this.iconUrl=i.attribute("iconUrl"),this.iconClass=i.attribute("iconClass"),this.isActive=i.attribute("isActive"),this.createdAt=i.attribute("createdAt",i.transformDate),this.updatedAt=i.attribute("updatedAt",i.transformDate)}apiEndpoint(){return`/withdrawal-platforms/${this.id()}`}getDisplayName(){return this.displayName()||this.name()}isValidAmount(t){const e=this.minAmount(),a=this.maxAmount();return t>=e&&t<=a}getTotalCost(t){return t+this.fee()}}const D={PENDING:"pending",APPROVED:"approved",REJECTED:"rejected"};class nt extends i{constructor(){super(...arguments),this.amount=i.attribute("amount"),this.accountDetails=i.attribute("accountDetails"),this.message=i.attribute("message"),this.status=i.attribute("status"),this.platformId=i.attribute("platformId"),this.userId=i.attribute("userId"),this.createdAt=i.attribute("createdAt",i.transformDate),this.updatedAt=i.attribute("updatedAt",i.transformDate),this.user=i.hasOne("user"),this.platform=i.hasOne("platform")}apiEndpoint(){return`/withdrawal-requests/${this.id()}`}isPending(){return this.status()===D.PENDING}isApproved(){return this.status()===D.APPROVED}isRejected(){return this.status()===D.REJECTED}canBeModified(){return this.isPending()}statusLabel(){const t=this.status();return app.translator.trans(`withdrawal.forum.status.${t}`)}statusColor(){switch(this.status()){case D.APPROVED:return"success";case D.REJECTED:return"danger";case D.PENDING:default:return"warning"}}}class lt extends i{constructor(){super(...arguments),this.name=i.attribute("name"),this.symbol=i.attribute("symbol"),this.network=i.attribute("network"),this.networkTypeId=i.attribute("networkTypeId"),this.displayName=i.attribute("displayName"),this.minAmount=i.attribute("minAmount"),this.maxAmount=i.attribute("maxAmount"),this.address=i.attribute("address"),this.qrCodeImageUrl=i.attribute("qrCodeImageUrl"),this.iconUrl=i.attribute("iconUrl"),this.iconClass=i.attribute("iconClass"),this.warningText=i.attribute("warningText"),this.networkConfig=i.attribute("networkConfig"),this.isActive=i.attribute("isActive"),this.createdAt=i.attribute("createdAt",i.transformDate),this.updatedAt=i.attribute("updatedAt",i.transformDate)}}class ct extends i{constructor(){super(...arguments),this.address=i.attribute("address"),this.addressTag=i.attribute("addressTag"),this.fullAddress=i.attribute("fullAddress"),this.isActive=i.attribute("isActive"),this.lastUsedAt=i.attribute("lastUsedAt",i.transformDate),this.createdAt=i.attribute("createdAt",i.transformDate),this.updatedAt=i.attribute("updatedAt",i.transformDate),this.user=i.hasOne("user"),this.platform=i.hasOne("platform")}}class dt extends i{constructor(){super(...arguments),this.amount=i.attribute("amount"),this.fee=i.attribute("fee"),this.creditedAmount=i.attribute("creditedAmount"),this.transactionHash=i.attribute("transactionHash"),this.fromAddress=i.attribute("fromAddress"),this.memo=i.attribute("memo"),this.userMessage=i.attribute("userMessage"),this.status=i.attribute("status"),this.statusColor=i.attribute("statusColor"),this.blockchainData=i.attribute("blockchainData"),this.confirmations=i.attribute("confirmations"),this.requiredConfirmations=i.attribute("requiredConfirmations"),this.hasEnoughConfirmations=i.attribute("hasEnoughConfirmations"),this.canBeCompleted=i.attribute("canBeCompleted"),this.explorerUrl=i.attribute("explorerUrl"),this.detectedAt=i.attribute("detectedAt",i.transformDate),this.confirmedAt=i.attribute("confirmedAt",i.transformDate),this.completedAt=i.attribute("completedAt",i.transformDate),this.adminNotes=i.attribute("adminNotes"),this.createdAt=i.attribute("createdAt",i.transformDate),this.updatedAt=i.attribute("updatedAt",i.transformDate),this.user=i.hasOne("user"),this.platform=i.hasOne("platform"),this.depositAddress=i.hasOne("depositAddress"),this.processedBy=i.hasOne("processedBy")}}class mt extends g{view(){if(!r.session.user)return null;const e=(r.forum.attribute("antoinefr-money.moneyname")||"[money]").replace("[money]",r.session.user.attribute("money")),a=r.forum.attribute("wusong8899-withdrawal.moneyIconUrl");return m("div",{id:"moneyDisplayContainer",className:"client1-header-adv-wrapper clientCustomizeWithdrawalHeaderTotalMoney"},m("div",{className:"clientCustomizeWithdrawalHeaderText"},a&&a.trim()&&m("span",{style:{borderRadius:"50%",padding:"6px 8px",marginRight:"8px",display:"inline-flex",alignItems:"center",justifyContent:"center"}},m("img",{src:a,alt:"Money icon",style:{width:"20px",height:"20px"},onError:o=>{const l=o.target;l.style.display="none"}})),e),m("div",{className:"clientCustomizeWithdrawalHeaderIcon"},m("i",{className:"fas fa-wallet"})),m("div",{className:"clientCustomizeWithdrawalButtons"},m("div",{className:"clientCustomizeWithdrawalButton",onclick:this.handleWithdrawalClick.bind(this),title:"提款"},m("i",{className:"fas fa-money-bill-transfer"}),m("span",{style:{marginLeft:"4px",fontSize:"12px"}},"提款")),m("div",{className:"clientCustomizeDepositButton",onclick:this.handleDepositClick.bind(this),title:"存款",style:{marginLeft:"8px"}},m("i",{className:"fas fa-coins"}),m("span",{style:{marginLeft:"4px",fontSize:"12px"}},"存款"))))}handleWithdrawalClick(t){t.preventDefault(),t.stopPropagation(),window.location.href="/funds?tab=withdrawal"}handleDepositClick(t){t.preventDefault(),t.stopPropagation(),window.location.href="/funds?tab=deposit"}}class ut extends g{view(){const t=r.session.user?.attribute("money")||0,e=r.forum.attribute("wusong8899-withdrawal.moneyIconUrl");return m("div",{className:"Navigation-mobileMoneyDisplay"},m("div",{className:"Navigation-moneySection",onclick:this.handleWithdrawalClick.bind(this),title:`余额: ${t} - 点击提款`},m("div",{className:"Navigation-moneyText"},e&&e.trim()&&m("span",{style:{borderRadius:"50%",padding:"4px 6px",marginRight:"6px",display:"inline-flex",alignItems:"center",justifyContent:"center"}},m("img",{src:e,alt:"Money icon",style:{width:"18px",height:"18px"},onError:a=>{const o=a.target;o.style.display="none"}})),m("span",{className:"Navigation-moneyAmount"},t)),m("div",{className:"Navigation-withdrawalButton"},m("i",{className:"fas fa-money-bill-transfer"}),m("span",null,"提款"))))}handleWithdrawalClick(t){t.preventDefault(),t.stopPropagation(),console.log("MobileMoneyDisplay clicked!");try{window.location.href="/funds?tab=withdrawal"}catch(e){console.error("Navigation error:",e),window.location.href="/funds?tab=withdrawal"}}}class A{constructor(){}static getInstance(){return A.instance||(A.instance=new A),A.instance}isTagsPage(){try{return r.current?.get("routeName")==="index"}catch{return!1}}}function I(){return window.innerWidth<=767}function W(){return window.innerWidth>=768&&window.innerWidth<=1024}function ht(){return window.innerWidth>1024}function ft(){return I()||W()}function wt(){return I()?"mobile":W()?"tablet":"desktop"}function gt(){return"ontouchstart"in window||navigator.maxTouchPoints>0}const pt={isMobile:I,isTablet:W,isDesktop:ht,isMobileOrTablet:ft,getCurrentBreakpoint:wt,isTouchDevice:gt};r.initializers.add("wusong8899-withdrawal",()=>{r.store.models["withdrawal-platforms"]=ot,r.store.models["withdrawal-requests"]=nt,r.store.models["deposit-platforms"]=lt,r.store.models["deposit-addresses"]=ct,r.store.models["deposit-transactions"]=dt,r.routes.funds={path:"/funds",component:T},r.routes.withdrawal={path:"/withdrawal",component:T},r.routes.deposit={path:"/deposit",component:T},x.extend(L.prototype,"view",function(c){const t=A.getInstance();r.session.user&&t.isTagsPage()&&!pt.isMobile()&&c.children.push(mt.component())}),x.extend(q.prototype,"view",function(c){if(window.innerWidth>768||r.current.get("routeName")!=="tags"||!r.session.user||!c||!c.children||!Array.isArray(c.children))return;c.children.some(a=>a&&a.attrs&&a.attrs.className&&a.attrs.className.includes("Navigation-mobileMoneyDisplay"))||c.children.push(ut.component({className:"item-withdrawal Navigation-mobileMoneyDisplay"}))})})})(flarum.core.compat["forum/app"],flarum.core.compat["common/extend"],flarum.core.compat["forum/components/HeaderPrimary"],flarum.core.compat["common/components/Navigation"],flarum.core.compat["common/components/Page"],flarum.core.compat["common/components/Button"],flarum.core.compat["common/components/LoadingIndicator"],flarum.core.compat["common/utils/Stream"],flarum.core.compat["common/helpers/icon"],m,flarum.core.compat["common/Component"],flarum.core.compat["common/helpers/humanTime"],flarum.core.compat["common/Model"]);
//# sourceMappingURL=forum.js.map

module.exports={};