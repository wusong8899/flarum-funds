(function(a,C,q,O,R,W,F,D,N,u,y,l){"use strict";const B=i=>typeof i.id=="function"?i.id():i.id,n=(i,t)=>typeof i[t]=="function"?i[t]():i.attributes?i.attributes[t]:i[t],S=i=>String(B(i)),U=(i,t)=>{const e=String(t);return i.find(s=>{const r=B(s);return String(r)===e})},L=(i,t)=>{const e=n(i,t);return e?new Date(e):new Date},_={pending:"warning",approved:"success",rejected:"danger"},P={MIN_AMOUNT:.001,MAX_AMOUNT:10,FEE:5e-4,BALANCE_PRECISION:8},b={COINS:"fas fa-coins",CHEVRON_DOWN:"fas fa-chevron-down",PASTE:"fas fa-paste",BOOKMARK:"fas fa-bookmark"};class I{view(t){const{platform:e,className:s="",size:r="medium"}=t.attrs;if(!e)return N(b.COINS,{className:`crypto-icon default ${s}`});const o=n(e,"iconUrl"),d=n(e,"iconClass"),f=n(e,"name"),h=n(e,"symbol"),c=`platform-icon-${r}`;if(o)return m("img",{src:o,alt:f||"Platform",className:`platform-icon-image ${c} ${s}`,onerror:g=>{const E=g.target;E.style.display="none";const k=document.createElement("i"),nt=d||b.COINS;k.className=`${nt} crypto-icon ${s}`,E.parentElement?.appendChild(k)}});const v=d||b.COINS,w=h?.toLowerCase()||"default";return N(v,{className:`crypto-icon ${w} ${c} ${s}`})}}class M extends y{oninit(t){super.oninit(t),this.state={showDropdown:!1}}view(){const{selectedPlatform:t}=this.attrs,{showDropdown:e}=this.state;return m("div",{className:"WithdrawalPage-platformSelector"},m("div",{className:"WithdrawalPage-label"},"提取平台"),m("div",{className:"WithdrawalPage-platformDropdown",onclick:()=>this.toggleDropdown()},m("div",{className:"WithdrawalPage-platformSelected"},m("div",{className:"WithdrawalPage-platformInfo"},m("div",{className:"WithdrawalPage-platformIcon"},m(I,{platform:t,size:"medium"})),m("div",{className:"WithdrawalPage-platformDetails"},m("div",{className:"WithdrawalPage-platformName"},this.getPlatformName(t))))),N(b.CHEVRON_DOWN,{className:"WithdrawalPage-dropdownIcon"})),e&&this.renderPlatformDropdown())}toggleDropdown(){this.state.showDropdown=!this.state.showDropdown}getPlatformName(t){return t&&n(t,"name")||"请选择平台"}renderPlatformDropdown(){const{platforms:t}=this.attrs,e=(t||[]).filter(s=>!!s);return e.length===0?m("div",{className:"WithdrawalPage-dropdownMenu"},m("div",{className:"WithdrawalPage-dropdownItem WithdrawalPage-noData"},a.translator.trans("withdrawal.forum.no_platforms"))):m("div",{className:"WithdrawalPage-dropdownMenu"},e.map(s=>m("div",{key:s.id,className:"WithdrawalPage-dropdownItem",onclick:()=>this.selectPlatform(s)},m("div",{className:"WithdrawalPage-platformIcon"},m(I,{platform:s,size:"small"})),m("div",{className:"WithdrawalPage-platformName"},n(s,"name")))))}selectPlatform(t){const{onPlatformSelect:e,onAmountChange:s}=this.attrs;e(t),this.state.showDropdown=!1,s&&s()}}class H extends y{view(){const{amount:t,selectedPlatform:e,loadingBalance:s,onAmountChange:r,onFillAllAmount:o}=this.attrs,d=this.getMinAmount(e),f=this.getMaxAmount(e),h=this.getFee(e);return m("div",{className:"WithdrawalPage-amountSection"},m("div",{className:"WithdrawalPage-formGroup"},m("div",{className:"WithdrawalPage-label"},a.translator.trans("withdrawal.forum.form.amount")),m("div",{className:"WithdrawalPage-amountInput"},m("input",{type:"text",className:"WithdrawalPage-input",placeholder:"0.00000000",value:t,oninput:c=>r(c.target.value)}),m(W,{className:"WithdrawalPage-allButton",onclick:o,disabled:s},a.translator.trans("withdrawal.forum.form.all_button"))),m("div",{className:"WithdrawalPage-amountLimits"},m("div",{className:"WithdrawalPage-limitRow"},m("span",{className:"WithdrawalPage-limitLabel"},a.translator.trans("withdrawal.forum.limits.min_max")),m("span",{className:"WithdrawalPage-limitValue"},N(b.COINS)," ",d," ~ ",f)),m("div",{className:"WithdrawalPage-limitRow"},m("span",{className:"WithdrawalPage-limitLabel"},a.translator.trans("withdrawal.forum.limits.fee")),m("span",{className:"WithdrawalPage-limitValue"},N(b.COINS)," ",h)))))}getMinAmount(t){return t&&n(t,"minAmount")||P.MIN_AMOUNT}getMaxAmount(t){return t&&n(t,"maxAmount")||P.MAX_AMOUNT}getFee(t){return t&&n(t,"fee")||P.FEE}}class z extends y{view(){const{accountDetails:t,selectedPlatform:e,saveAddress:s,onAccountDetailsChange:r,onSaveAddressToggle:o}=this.attrs,d=this.getSymbol(e);return m("div",{className:"WithdrawalPage-addressSection"},m("div",{className:"WithdrawalPage-formGroup"},m("div",{className:"WithdrawalPage-addressHeader"},m("span",{className:"WithdrawalPage-label"},a.translator.trans("withdrawal.forum.form.address",{symbol:d}),m("span",{className:"WithdrawalPage-required"},"*")),m("div",{className:"WithdrawalPage-saveAddress",onclick:()=>o(!s)},N(b.BOOKMARK),a.translator.trans("withdrawal.forum.form.save_address"))),m("div",{className:"WithdrawalPage-addressInput"},m("input",{type:"text",className:"WithdrawalPage-input",placeholder:a.translator.trans("withdrawal.forum.form.address_placeholder"),value:t,oninput:f=>r(f.target.value)}),m("button",{className:"WithdrawalPage-pasteButton",onclick:()=>this.pasteFromClipboard()},N(b.PASTE)))))}getSymbol(t){return t&&n(t,"symbol")||""}async pasteFromClipboard(){const{onAccountDetailsChange:t}=this.attrs;try{if(navigator.clipboard&&navigator.clipboard.readText){const e=await navigator.clipboard.readText();t(e.trim()),m.redraw()}}catch(e){console.error("Failed to read from clipboard:",e),a.alerts.show({type:"error",dismissible:!0},a.translator.trans("withdrawal.forum.clipboard_error"))}}}class V extends y{view(){const{amount:t,selectedPlatform:e,submitting:s,canSubmit:r,onSubmit:o}=this.attrs,d=parseFloat(t)||0,f=this.getFee(e),h=Math.max(0,d-f),c=this.getSymbol(e);return m("div",{className:"WithdrawalPage-submitSection"},m(W,{className:"WithdrawalPage-submitButton",loading:s,disabled:!r,onclick:o},a.translator.trans("withdrawal.forum.form.submit")),d>0&&m("div",{className:"WithdrawalPage-finalAmount"},a.translator.trans("withdrawal.forum.final_amount",{amount:h.toFixed(P.BALANCE_PRECISION),symbol:c})))}getFee(t){return t&&n(t,"fee")||P.FEE}getSymbol(t){return t&&n(t,"symbol")||""}}class G extends y{view(){const{platforms:t,formData:e,loadingBalance:s,submitting:r,onFormDataChange:o,onFillAllAmount:d,onSubmit:f}=this.attrs;return[m(M,{platforms:t,selectedPlatform:e.selectedPlatform,onPlatformSelect:h=>o({selectedPlatform:h}),onAmountChange:()=>o({amount:""})}),m(H,{amount:e.amount,selectedPlatform:e.selectedPlatform,loadingBalance:s,onAmountChange:h=>o({amount:h}),onFillAllAmount:d}),m(z,{accountDetails:e.accountDetails,selectedPlatform:e.selectedPlatform,saveAddress:e.saveAddress,onAccountDetailsChange:h=>o({accountDetails:h}),onSaveAddressToggle:h=>o({saveAddress:h})}),m(V,{amount:e.amount,selectedPlatform:e.selectedPlatform,accountDetails:e.accountDetails,submitting:r,canSubmit:this.canSubmit(),onSubmit:f})]}canSubmit(){const{formData:t,submitting:e}=this.attrs,{selectedPlatform:s,amount:r,accountDetails:o}=t;return!!(s&&r&&o&&!e&&parseFloat(r)>0)}}class K extends y{view(){const{status:t,className:e=""}=this.attrs,s=this.getStatusClass(t),r=this.getStatusLabel(t);return m("div",{className:`WithdrawalPage-historyStatus ${s} ${e}`},r)}getStatusClass(t){return _[t]||_.pending}getStatusLabel(t){return a.translator.trans(`withdrawal.forum.status.${t}`)}}class J extends y{view(){const{request:t,platforms:e}=this.attrs;if(!t)return null;const s=this.getPlatformId(t),r=U(e,s),o=n(t,"status")||"pending",d=L(t,"createdAt"),f=n(t,"amount")||0,h=n(t,"accountDetails")||"";return console.log("Looking for platform with ID:",s,"Available platforms:",e.map(c=>({id:S(c),name:n(c,"name")}))),m("div",{key:S(t),className:"WithdrawalPage-historyItem"},m("div",{className:"WithdrawalPage-historyHeader"},m("div",{className:"WithdrawalPage-historyPlatform"},m("div",{className:"WithdrawalPage-platformIcon"},m(I,{platform:r,size:"small"})),m("div",{className:"WithdrawalPage-historyInfo"},m("div",{className:"WithdrawalPage-historyPlatformName"},this.getPlatformName(r)),m("div",{className:"WithdrawalPage-historyDate"},d.toLocaleDateString()," ",d.toLocaleTimeString()))),m(K,{status:o})),m("div",{className:"WithdrawalPage-historyDetails"},m("div",{className:"WithdrawalPage-historyAmount"},m("span",{className:"WithdrawalPage-historyLabel"},a.translator.trans("withdrawal.forum.history.amount"),":"),m("span",{className:"WithdrawalPage-historyValue"},f," ",this.getPlatformSymbol(r))),m("div",{className:"WithdrawalPage-historyAddress"},m("span",{className:"WithdrawalPage-historyLabel"},a.translator.trans("withdrawal.forum.history.address"),":"),m("span",{className:"WithdrawalPage-historyValue"},h))))}getPlatformId(t){return n(t,"platformId")||t.relationships?.platform?.data?.id||""}getPlatformName(t){return t&&n(t,"name")||"Unknown Platform"}getPlatformSymbol(t){return t&&n(t,"symbol")||""}}class X extends y{view(){const{iconName:t,title:e,description:s,className:r=""}=this.attrs;return m("div",{className:`WithdrawalPage-emptyState ${r}`},m("div",{className:"WithdrawalPage-emptyIcon"},N(t)),m("h3",{className:"WithdrawalPage-emptyTitle"},e),m("p",{className:"WithdrawalPage-emptyDescription"},s))}}function j(i){const{className:t=""}=i;return m("div",{className:`WithdrawalPage-loading ${t}`},m(F,null))}class Y extends y{view(){const{requests:t,platforms:e,loading:s}=this.attrs;return s?m(j,{className:"WithdrawalPage-historyLoading"}):!t||t.length===0?m(X,{iconName:"fas fa-history",title:a.translator.trans("withdrawal.forum.history.empty.title"),description:a.translator.trans("withdrawal.forum.history.empty.description"),className:"WithdrawalPage-historyEmpty"}):m("div",{className:"WithdrawalPage-historyList"},t.map(r=>m(J,{key:this.getRequestKey(r),request:r,platforms:e})))}getRequestKey(t){return typeof t.id=="function"?`request-${t.id()}`:`request-${t.id||Math.random()}`}}class Q extends R{constructor(){super(...arguments),this.state={platforms:[],requests:[],loading:!0,loadingBalance:!0,userBalance:0,submitting:!1,activeTab:D("withdrawal")},this.formData={amount:D(""),selectedPlatform:D(null),accountDetails:D(""),saveAddress:D(!1)}}oninit(t){super.oninit(t),a.setTitle(a.translator.trans("withdrawal.forum.page.title")),this.loadData(),this.loadUserBalance()}view(){return this.state.loading?u("div",{className:"WithdrawalPage"},u("div",{className:"WithdrawalPage-loading"},u(F,null))):u("div",{className:"WithdrawalPage"},u("div",{className:"WithdrawalPage-modal"},this.renderHeader(),u("div",{className:"WithdrawalPage-content"},this.state.activeTab()==="withdrawal"?this.renderWithdrawalTab():this.renderHistoryTab())))}renderHeader(){return u("div",{className:"WithdrawalPage-header"},u("div",{className:"WithdrawalPage-tabs"},u("div",{className:`WithdrawalPage-tab ${this.state.activeTab()==="withdrawal"?"active":""}`,onclick:()=>this.handleTabChange("withdrawal")},a.translator.trans("withdrawal.forum.tabs.withdrawal")),u("div",{className:`WithdrawalPage-tab ${this.state.activeTab()==="history"?"active":""}`,onclick:()=>this.handleTabChange("history")},a.translator.trans("withdrawal.forum.tabs.history"))),u(W,{className:"WithdrawalPage-close",icon:"fas fa-times",onclick:()=>a.history.back()}))}renderWithdrawalTab(){return(this.state.platforms||[]).filter(e=>!!e).length===0?u("div",{className:"WithdrawalPage-emptyState"},u("div",{className:"WithdrawalPage-emptyIcon"},N("fas fa-coins")),u("h3",{className:"WithdrawalPage-emptyTitle"},a.translator.trans("withdrawal.forum.no_platforms")),u("p",{className:"WithdrawalPage-emptyDescription"},a.translator.trans("withdrawal.forum.no_platforms_description"))):u(G,{platforms:this.state.platforms,formData:this.getFormDataForComponent(),loadingBalance:this.state.loadingBalance,submitting:this.state.submitting,onFormDataChange:this.handleFormDataChange.bind(this),onFillAllAmount:this.handleFillAllAmount.bind(this),onSubmit:this.handleSubmit.bind(this)})}renderHistoryTab(){return u(Y,{requests:this.state.requests,platforms:this.state.platforms,loading:!1})}handleTabChange(t){this.state.activeTab(t)}getFormDataForComponent(){return{selectedPlatform:this.formData.selectedPlatform(),amount:this.formData.amount(),accountDetails:this.formData.accountDetails(),saveAddress:this.formData.saveAddress()}}handleFormDataChange(t){t.selectedPlatform!==void 0&&this.formData.selectedPlatform(t.selectedPlatform),t.amount!==void 0&&this.formData.amount(t.amount),t.accountDetails!==void 0&&this.formData.accountDetails(t.accountDetails),t.saveAddress!==void 0&&this.formData.saveAddress(t.saveAddress)}async handleFillAllAmount(){const t=this.formData.selectedPlatform();if(t&&!this.state.loadingBalance)try{await this.loadUserBalance(!0);const e=n(t,"fee")||0,s=n(t,"maxAmount")||1/0;let r=this.state.userBalance-e;s<1/0&&r>s&&(r=s),r>0?this.formData.amount(r.toString()):a.alerts.show({type:"warning",dismissible:!0},a.translator.trans("withdrawal.forum.insufficient_balance"))}catch(e){console.error("Error refreshing balance:",e),a.alerts.show({type:"error",dismissible:!0},a.translator.trans("withdrawal.forum.balance_refresh_error"))}}async handleSubmit(){if(this.state.submitting)return;const t=this.formData.selectedPlatform(),e=this.formData.amount(),s=this.formData.accountDetails();if(!t||!e||!s)return;const r=parseFloat(e);if(isNaN(r)||r<=0){a.alerts.show({type:"warning",dismissible:!0},a.translator.trans("withdrawal.forum.invalid_amount"));return}const o=n(t,"minAmount")||0,d=n(t,"maxAmount")||1/0;if(r<o){a.alerts.show({type:"warning",dismissible:!0},a.translator.trans("withdrawal.forum.amount_below_minimum",{amount:r,minimum:o,platform:n(t,"name")}));return}if(r>d){a.alerts.show({type:"warning",dismissible:!0},a.translator.trans("withdrawal.forum.amount_above_maximum",{amount:r,maximum:d,platform:n(t,"name")}));return}const f=n(t,"fee")||0,h=r+f;if(this.state.userBalance<h){const c=f>0?a.translator.trans("withdrawal.forum.including_fee",{fee:f}):"";a.alerts.show({type:"warning",dismissible:!0},a.translator.trans("withdrawal.forum.insufficient_balance_detailed",{required:h,available:this.state.userBalance,feeText:c}));return}this.state.submitting=!0;try{const c=await a.request({method:"POST",url:a.forum.attribute("apiUrl")+"/withdrawal-requests",body:{data:{type:"withdrawal-requests",attributes:{platformId:S(t),amount:parseFloat(e),accountDetails:s,saveAddress:this.formData.saveAddress()}}}});a.store.pushPayload(c),this.formData.amount(""),this.formData.accountDetails(""),this.formData.saveAddress()||this.formData.selectedPlatform(null),this.loadUserBalance(),this.loadWithdrawalRequests(),a.alerts.show({type:"success",dismissible:!0},a.translator.trans("withdrawal.forum.submit_success"))}catch(c){console.error("Withdrawal request failed:",c);let v=a.translator.trans("withdrawal.forum.error");if(c&&c.response&&c.response.errors){const w=c.response.errors;if(Array.isArray(w)&&w.length>0){const g=w[0];g.detail?v=g.detail:g.source&&g.source.pointer&&(v=`${g.source.pointer.split("/").pop()}: ${g.title||g.detail||"Validation error"}`)}}else if(c&&c.responseText)if(c.responseText.includes("<b>Fatal error</b>")||c.responseText.includes("<!DOCTYPE"))v=a.translator.trans("withdrawal.forum.server_error");else try{const w=JSON.parse(c.responseText);if(w.errors&&Array.isArray(w.errors)&&w.errors.length>0){const g=w.errors[0];g.detail&&(v=g.detail)}}catch(w){console.error("Failed to parse error response:",w),v=a.translator.trans("withdrawal.forum.server_error")}a.alerts.show({type:"error",dismissible:!0},v)}finally{this.state.submitting=!1}}async loadData(){try{console.log("Starting to load withdrawal data...");const[t,e]=await Promise.all([a.request({method:"GET",url:a.forum.attribute("apiUrl")+"/withdrawal-platforms"}),a.request({method:"GET",url:a.forum.attribute("apiUrl")+"/withdrawal-requests"})]);console.log("Platforms response:",t),console.log("Requests response:",e),a.store.pushPayload(t),a.store.pushPayload(e),this.state.platforms=a.store.all("withdrawal-platforms"),this.state.requests=a.store.all("withdrawal-requests"),console.log("Loaded platforms:",this.state.platforms),console.log("Loaded requests:",this.state.requests),this.state.loading=!1,u.redraw()}catch(t){console.error("Error loading data:",t),this.state.loading=!1,u.redraw()}}async loadUserBalance(t=!1){try{if(this.state.loadingBalance=!0,t&&a.session.user){const e=await a.request({method:"GET",url:`${a.forum.attribute("apiUrl")}/users/${a.session.user.id()}`});a.store.pushPayload(e);const s=a.store.getById("users",a.session.user.id());s?this.state.userBalance=parseFloat(s.attribute("money"))||0:this.state.userBalance=0}else this.state.userBalance=parseFloat(a.session.user?.attribute("money"))||0;this.state.loadingBalance=!1,u.redraw()}catch(e){console.error("Error loading user balance:",e),this.state.loadingBalance=!1,u.redraw()}}async loadWithdrawalRequests(){try{const t=await a.request({method:"GET",url:a.forum.attribute("apiUrl")+"/withdrawal-requests"});a.store.pushPayload(t),this.state.requests=a.store.all("withdrawal-requests")}catch(t){console.error("Error loading withdrawal requests:",t)}}}class Z extends l{constructor(){super(...arguments),this.name=l.attribute("name"),this.symbol=l.attribute("symbol"),this.minAmount=l.attribute("minAmount"),this.maxAmount=l.attribute("maxAmount"),this.fee=l.attribute("fee"),this.iconUrl=l.attribute("iconUrl"),this.iconClass=l.attribute("iconClass"),this.isActive=l.attribute("isActive"),this.createdAt=l.attribute("createdAt",l.transformDate),this.updatedAt=l.attribute("updatedAt",l.transformDate)}apiEndpoint(){return`/withdrawal-platforms/${this.id()}`}displayName(){const t=this.symbol(),e=this.name();return t?`${e} (${t})`:e}isValidAmount(t){const e=this.minAmount(),s=this.maxAmount();return t>=e&&t<=s}getTotalCost(t){return t+this.fee()}}const p={PENDING:"pending",APPROVED:"approved",REJECTED:"rejected"};class $ extends l{constructor(){super(...arguments),this.amount=l.attribute("amount"),this.accountDetails=l.attribute("accountDetails"),this.status=l.attribute("status"),this.platformId=l.attribute("platformId"),this.userId=l.attribute("userId"),this.createdAt=l.attribute("createdAt",l.transformDate),this.updatedAt=l.attribute("updatedAt",l.transformDate),this.user=l.hasOne("user"),this.platform=l.hasOne("platform")}apiEndpoint(){return`/withdrawal-requests/${this.id()}`}isPending(){return this.status()===p.PENDING}isApproved(){return this.status()===p.APPROVED}isRejected(){return this.status()===p.REJECTED}canBeModified(){return this.isPending()}statusLabel(){const t=this.status();return app.translator.trans(`withdrawal.forum.status.${t}`)}statusColor(){switch(this.status()){case p.APPROVED:return"success";case p.REJECTED:return"danger";case p.PENDING:default:return"warning"}}}class tt extends y{view(){if(!a.session.user)return null;const e=(a.forum.attribute("antoinefr-money.moneyname")||"[money]").replace("[money]",a.session.user.attribute("money")),s=a.forum.attribute("wusong8899-withdrawal.moneyIconUrl")||"https://i.mji.rip/2025/08/28/cd18932c68e9bbee9502b1fb6317cba9.png";return m("div",{id:"moneyDisplayContainer",className:"client1-header-adv-wrapper clientCustomizeWithdrawalHeaderTotalMoney"},m("div",{className:"clientCustomizeWithdrawalHeaderText"},m("span",{style:{borderRadius:"50%",padding:"6px 8px",marginRight:"8px",display:"inline-flex",alignItems:"center",justifyContent:"center"}},m("img",{src:s,alt:"Money icon",style:{width:"20px",height:"20px"},onError:r=>{const o=r.target;o.style.display="none";const d=document.createElement("i");d.className="fas fa-yen-sign",d.style.color="#ffffff",d.style.fontSize="14px",o.parentNode?.appendChild(d)}})),e),m("div",{className:"clientCustomizeWithdrawalHeaderIcon"},m("i",{className:"fas fa-wallet"})),m("div",{className:"clientCustomizeWithdrawalButton",onclick:this.handleWithdrawalClick.bind(this),title:"提款"},m("i",{className:"fas fa-money-bill-transfer"}),m("span",{style:{marginLeft:"4px",fontSize:"12px"}},"提款")))}handleWithdrawalClick(t){t.preventDefault(),t.stopPropagation(),window.location.href="/withdrawal"}}class at extends y{view(){const t=a.session.user?.attribute("money")||0,e=a.forum.attribute("wusong8899-withdrawal.moneyIconUrl")||"https://i.mji.rip/2025/08/28/cd18932c68e9bbee9502b1fb6317cba9.png";return m("div",{className:"Navigation-mobileMoneyDisplay"},m("div",{className:"Navigation-moneySection",onclick:this.handleWithdrawalClick.bind(this),title:`余额: ${t} - 点击提款`},m("div",{className:"Navigation-moneyText"},m("span",{style:{borderRadius:"50%",padding:"4px 6px",marginRight:"6px",display:"inline-flex",alignItems:"center",justifyContent:"center"}},m("img",{src:e,alt:"Money icon",style:{width:"18px",height:"18px"},onError:s=>{const r=s.target;r.style.display="none";const o=document.createElement("i");o.className="fas fa-yen-sign",o.style.color="#ffffff",o.style.fontSize="12px",r.parentNode?.appendChild(o)}})),m("span",{className:"Navigation-moneyAmount"},t)),m("div",{className:"Navigation-withdrawalButton"},m("i",{className:"fas fa-money-bill-transfer"}),m("span",null,"提款"))))}handleWithdrawalClick(t){t.preventDefault(),t.stopPropagation(),console.log("MobileMoneyDisplay clicked!");try{window.location.href="/withdrawal"}catch(e){console.error("Navigation error:",e),window.location.href="/withdrawal"}}}class A{constructor(){}static getInstance(){return A.instance||(A.instance=new A),A.instance}isTagsPage(){try{return a.current?.get("routeName")==="index"}catch{return!1}}}function x(){return window.innerWidth<=767}function T(){return window.innerWidth>=768&&window.innerWidth<=1024}function et(){return window.innerWidth>1024}function st(){return x()||T()}function rt(){return x()?"mobile":T()?"tablet":"desktop"}function it(){return"ontouchstart"in window||navigator.maxTouchPoints>0}const ot={isMobile:x,isTablet:T,isDesktop:et,isMobileOrTablet:st,getCurrentBreakpoint:rt,isTouchDevice:it};a.initializers.add("wusong8899-withdrawal",()=>{a.store.models["withdrawal-platforms"]=Z,a.store.models["withdrawal-requests"]=$,a.routes.withdrawal={path:"/withdrawal",component:Q},C.extend(q.prototype,"view",function(i){const t=A.getInstance();a.session.user&&t.isTagsPage()&&!ot.isMobile()&&i.children.push(tt.component())}),C.extend(O.prototype,"view",function(i){if(window.innerWidth>768||a.current.get("routeName")!=="tags"||!a.session.user||!i||!i.children||!Array.isArray(i.children))return;i.children.some(s=>s&&s.attrs&&s.attrs.className&&s.attrs.className.includes("Navigation-mobileMoneyDisplay"))||i.children.push(at.component({className:"item-withdrawal Navigation-mobileMoneyDisplay"}))})})})(flarum.core.compat["forum/app"],flarum.core.compat["common/extend"],flarum.core.compat["forum/components/HeaderPrimary"],flarum.core.compat["common/components/Navigation"],flarum.core.compat["common/components/Page"],flarum.core.compat["common/components/Button"],flarum.core.compat["common/components/LoadingIndicator"],flarum.core.compat["common/utils/Stream"],flarum.core.compat["common/helpers/icon"],m,flarum.core.compat["common/Component"],flarum.core.compat["common/Model"]);
//# sourceMappingURL=forum.js.map

module.exports={};